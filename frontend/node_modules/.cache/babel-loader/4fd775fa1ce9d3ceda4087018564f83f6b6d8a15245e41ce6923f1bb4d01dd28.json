{"ast":null,"code":"var _jsxFileName = \"/Users/shubhamjana/Desktop/algo-visualizer/frontend/src/components/BSTVisualizer.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Node from './BSTNode';\n\n// Helper function for exponential backoff retry logic (copied from App.js for self-containment)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fetchWithRetry = async (url, options, retries = 3) => {\n  for (let i = 0; i < retries; i++) {\n    try {\n      const response = await fetch(url, options);\n      if (!response.ok) {\n        try {\n          const errorData = await response.json();\n          throw new Error(errorData.error || `HTTP status: ${response.status}`);\n        } catch {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n      }\n      return response;\n    } catch (error) {\n      console.error(`Fetch attempt ${i + 1} failed:`, error);\n      if (i === retries - 1) throw error;\n      await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));\n    }\n  }\n};\n\n// --- Tree Drawing Constants ---\nconst CANVAS_WIDTH = 800;\nconst CANVAS_HEIGHT = 600;\nconst NODE_RADIUS = 20;\nconst VERTICAL_SPACING = 70;\nconst ANIMATION_SPEED = 500; // ms per step\n\nconst BSTVisualizer = () => {\n  _s();\n  const [inputValue, setInputValue] = useState('');\n  const [treeState, setTreeState] = useState(null); // Initialize to null for empty tree (matches Python's None)\n  const [steps, setSteps] = useState([]);\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [status, setStatus] = useState('Ready for operations.');\n  const [error, setError] = useState(null);\n  const [isAnimating, setIsAnimating] = useState(false);\n\n  // Function to calculate node positions recursively\n  const calculateNodePositions = useCallback((node, x, y, level, offset) => {\n    if (!node) return;\n\n    // Calculate a local offset based on level\n    const nextOffset = offset / 2;\n    node.x = x;\n    node.y = y;\n    node.level = level;\n    if (node.left) {\n      calculateNodePositions(node.left, x - nextOffset, y + VERTICAL_SPACING, level + 1, nextOffset);\n    }\n    if (node.right) {\n      calculateNodePositions(node.right, x + nextOffset, y + VERTICAL_SPACING, level + 1, nextOffset);\n    }\n  }, []);\n\n  // Effect to start the animation when new steps arrive\n  useEffect(() => {\n    if (steps.length > 0 && !isAnimating) {\n      setIsAnimating(true);\n      setCurrentStepIndex(0);\n    }\n  }, [steps, isAnimating]);\n\n  // Animation loop for steps\n  useEffect(() => {\n    if (!isAnimating || currentStepIndex >= steps.length) {\n      setIsAnimating(false);\n      if (currentStepIndex > 0) {\n        setStatus(`Operation Complete: ${steps[steps.length - 1].action}`);\n      }\n      return;\n    }\n    const currentStep = steps[currentStepIndex];\n    setStatus(`Step ${currentStepIndex + 1}/${steps.length}: Node ${currentStep.value} - **${currentStep.action}**`);\n    const timer = setTimeout(() => {\n      setCurrentStepIndex(prev => prev + 1);\n    }, ANIMATION_SPEED);\n    return () => clearTimeout(timer);\n  }, [isAnimating, steps, currentStepIndex]);\n\n  // Recursive function to render tree structure\n  const renderTree = node => {\n    if (!node) return null;\n    const currentStep = steps[currentStepIndex] || {};\n\n    // Determine the style based on the current step\n    let style = 'default';\n    if (currentStep.value === node.value) {\n      if (currentStep.action.includes('Visiting') || currentStep.action.includes('Target Found')) {\n        style = 'active';\n      } else if (currentStep.action.includes('Inserted') || currentStep.action.includes('Value Replaced')) {\n        style = 'success';\n      }\n    }\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [node.left && /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: node.x,\n        y1: node.y,\n        x2: node.left.x,\n        y2: node.left.y,\n        stroke: \"#4A5568\",\n        strokeWidth: \"2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this), node.right && /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: node.x,\n        y1: node.y,\n        x2: node.right.x,\n        y2: node.right.y,\n        stroke: \"#4A5568\",\n        strokeWidth: \"2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Node, {\n        x: node.x,\n        y: node.y,\n        value: node.value,\n        radius: NODE_RADIUS,\n        style: style\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this), renderTree(node.left), renderTree(node.right)]\n    }, node.value, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this);\n  };\n  const handleOperation = useCallback(async (operation, value) => {\n    setError(null);\n    setSteps([]);\n    setCurrentStepIndex(0);\n    setIsAnimating(false);\n    setStatus(`Attempting ${operation} on value ${value}...`);\n\n    // Check for valid number input\n    const numberValue = parseInt(value, 10);\n    if (isNaN(numberValue)) {\n      setError(\"Error: Please enter a valid integer for the node value.\");\n      setStatus('Operation failed.');\n      return;\n    }\n    try {\n      const payload = {\n        operation: operation,\n        value: numberValue,\n        // treeState is null for an empty tree or the object structure otherwise\n        treeState: treeState\n      };\n\n      // Note: The proxy in package.json directs /api/bst to http://localhost:5001/api/bst\n      const response = await fetchWithRetry('/api/bst', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      if (result.steps && result.newState !== undefined) {\n        // 1. Update the tree state\n        setTreeState(result.newState);\n\n        // 2. Prepare the steps for animation\n        setSteps(result.steps);\n\n        // 3. Start the animation loop via useEffect\n      } else {\n        throw new Error(\"Invalid response format: Missing steps or newState.\");\n      }\n    } catch (err) {\n      console.error(\"BST API Error:\", err);\n      setError(`Error: API Communication Failed: ${err.message}. Check Flask server logs.`);\n      setStatus('Operation failed.');\n    }\n  }, [treeState]);\n  const handleInsert = () => {\n    handleOperation('insert', inputValue);\n  };\n  const handleDelete = () => {\n    handleOperation('delete', inputValue);\n  };\n  const handleClearTree = () => {\n    setTreeState(null); // Reset to null\n    setSteps([]);\n    setCurrentStepIndex(0);\n    setIsAnimating(false);\n    setError(null);\n    setStatus('Tree cleared.');\n  };\n\n  // Calculate positions before rendering\n  let displayTree = treeState ? JSON.parse(JSON.stringify(treeState)) : null;\n  if (displayTree) {\n    // Initial offset for the root node, centered\n    const initialOffset = CANVAS_WIDTH / 4;\n    calculateNodePositions(displayTree, CANVAS_WIDTH / 2, NODE_RADIUS * 2, 0, initialOffset);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 bg-white rounded-xl shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4 text-gray-800\",\n      children: \"Binary Search Tree Visualizer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-3 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"Enter node value (e.g., 50)\",\n        className: \"p-2 border border-gray-300 rounded-lg w-48 focus:ring-blue-500 focus:border-blue-500 transition-shadow\",\n        value: inputValue,\n        onChange: e => setInputValue(e.target.value),\n        onKeyDown: e => {\n          if (e.key === 'Enter') handleInsert();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition-colors shadow-md disabled:bg-gray-400\",\n        onClick: handleInsert,\n        disabled: isAnimating || !inputValue.trim(),\n        children: \"Insert\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition-colors shadow-md disabled:bg-gray-400\",\n        onClick: handleDelete,\n        disabled: isAnimating || !inputValue.trim() || !treeState,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 transition-colors shadow-md\",\n        onClick: handleClearTree,\n        disabled: isAnimating,\n        children: \"Clear Tree\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg\",\n      children: [\"**Error:** \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm font-medium mb-4 text-gray-600\",\n      children: [\"**Status:** \", status]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border border-gray-300 bg-gray-50 rounded-lg overflow-auto\",\n      style: {\n        width: '100%',\n        height: CANVAS_HEIGHT + 20\n      },\n      children: displayTree ? /*#__PURE__*/_jsxDEV(\"svg\", {\n        width: CANVAS_WIDTH,\n        height: CANVAS_HEIGHT + VERTICAL_SPACING,\n        children: renderTree(displayTree)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-full text-gray-500\",\n        children: \"The tree is empty. Insert a value to begin!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 9\n  }, this);\n};\n_s(BSTVisualizer, \"Qop2H0T8XpTq/Gb8ZjTfHipcGos=\");\n_c = BSTVisualizer;\nexport default BSTVisualizer;\nvar _c;\n$RefreshReg$(_c, \"BSTVisualizer\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Node","jsxDEV","_jsxDEV","fetchWithRetry","url","options","retries","i","response","fetch","ok","errorData","json","Error","error","status","console","Promise","resolve","setTimeout","Math","pow","CANVAS_WIDTH","CANVAS_HEIGHT","NODE_RADIUS","VERTICAL_SPACING","ANIMATION_SPEED","BSTVisualizer","_s","inputValue","setInputValue","treeState","setTreeState","steps","setSteps","currentStepIndex","setCurrentStepIndex","setStatus","setError","isAnimating","setIsAnimating","calculateNodePositions","node","x","y","level","offset","nextOffset","left","right","length","action","currentStep","value","timer","prev","clearTimeout","renderTree","style","includes","Fragment","children","x1","y1","x2","y2","stroke","strokeWidth","fileName","_jsxFileName","lineNumber","columnNumber","radius","handleOperation","operation","numberValue","parseInt","isNaN","payload","method","headers","body","JSON","stringify","result","newState","undefined","err","message","handleInsert","handleDelete","handleClearTree","displayTree","parse","initialOffset","className","type","placeholder","onChange","e","target","onKeyDown","key","onClick","disabled","trim","width","height","_c","$RefreshReg$"],"sources":["/Users/shubhamjana/Desktop/algo-visualizer/frontend/src/components/BSTVisualizer.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport Node from './BSTNode';\n\n// Helper function for exponential backoff retry logic (copied from App.js for self-containment)\nconst fetchWithRetry = async (url, options, retries = 3) => {\n    for (let i = 0; i < retries; i++) {\n        try {\n            const response = await fetch(url, options);\n            if (!response.ok) {\n                try {\n                    const errorData = await response.json();\n                    throw new Error(errorData.error || `HTTP status: ${response.status}`);\n                } catch {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n            }\n            return response;\n        } catch (error) {\n            console.error(`Fetch attempt ${i + 1} failed:`, error);\n            if (i === retries - 1) throw error;\n            await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));\n        }\n    }\n};\n\n// --- Tree Drawing Constants ---\nconst CANVAS_WIDTH = 800;\nconst CANVAS_HEIGHT = 600;\nconst NODE_RADIUS = 20;\nconst VERTICAL_SPACING = 70;\nconst ANIMATION_SPEED = 500; // ms per step\n\nconst BSTVisualizer = () => {\n    const [inputValue, setInputValue] = useState('');\n    const [treeState, setTreeState] = useState(null); // Initialize to null for empty tree (matches Python's None)\n    const [steps, setSteps] = useState([]);\n    const [currentStepIndex, setCurrentStepIndex] = useState(0);\n    const [status, setStatus] = useState('Ready for operations.');\n    const [error, setError] = useState(null);\n    const [isAnimating, setIsAnimating] = useState(false);\n\n    // Function to calculate node positions recursively\n    const calculateNodePositions = useCallback((node, x, y, level, offset) => {\n        if (!node) return;\n\n        // Calculate a local offset based on level\n        const nextOffset = offset / 2;\n        \n        node.x = x;\n        node.y = y;\n        node.level = level;\n\n        if (node.left) {\n            calculateNodePositions(node.left, x - nextOffset, y + VERTICAL_SPACING, level + 1, nextOffset);\n        }\n        if (node.right) {\n            calculateNodePositions(node.right, x + nextOffset, y + VERTICAL_SPACING, level + 1, nextOffset);\n        }\n    }, []);\n\n    // Effect to start the animation when new steps arrive\n    useEffect(() => {\n        if (steps.length > 0 && !isAnimating) {\n            setIsAnimating(true);\n            setCurrentStepIndex(0);\n        }\n    }, [steps, isAnimating]);\n\n    // Animation loop for steps\n    useEffect(() => {\n        if (!isAnimating || currentStepIndex >= steps.length) {\n            setIsAnimating(false);\n            if (currentStepIndex > 0) {\n                 setStatus(`Operation Complete: ${steps[steps.length - 1].action}`);\n            }\n            return;\n        }\n\n        const currentStep = steps[currentStepIndex];\n        setStatus(`Step ${currentStepIndex + 1}/${steps.length}: Node ${currentStep.value} - **${currentStep.action}**`);\n        \n        const timer = setTimeout(() => {\n            setCurrentStepIndex(prev => prev + 1);\n        }, ANIMATION_SPEED);\n\n        return () => clearTimeout(timer);\n    }, [isAnimating, steps, currentStepIndex]);\n\n    // Recursive function to render tree structure\n    const renderTree = (node) => {\n        if (!node) return null;\n\n        const currentStep = steps[currentStepIndex] || {};\n        \n        // Determine the style based on the current step\n        let style = 'default';\n        if (currentStep.value === node.value) {\n            if (currentStep.action.includes('Visiting') || currentStep.action.includes('Target Found')) {\n                style = 'active';\n            } else if (currentStep.action.includes('Inserted') || currentStep.action.includes('Value Replaced')) {\n                 style = 'success';\n            }\n        }\n\n        return (\n            <React.Fragment key={node.value}>\n                {/* Draw lines to children */}\n                {node.left && (\n                    <line \n                        x1={node.x} y1={node.y} \n                        x2={node.left.x} y2={node.left.y}\n                        stroke=\"#4A5568\" strokeWidth=\"2\"\n                    />\n                )}\n                {node.right && (\n                    <line \n                        x1={node.x} y1={node.y} \n                        x2={node.right.x} y2={node.right.y}\n                        stroke=\"#4A5568\" strokeWidth=\"2\"\n                    />\n                )}\n\n                {/* Render current node */}\n                <Node x={node.x} y={node.y} value={node.value} radius={NODE_RADIUS} style={style} />\n                \n                {/* Render children recursively */}\n                {renderTree(node.left)}\n                {renderTree(node.right)}\n            </React.Fragment>\n        );\n    };\n\n    const handleOperation = useCallback(async (operation, value) => {\n        setError(null);\n        setSteps([]);\n        setCurrentStepIndex(0);\n        setIsAnimating(false);\n        setStatus(`Attempting ${operation} on value ${value}...`);\n\n        // Check for valid number input\n        const numberValue = parseInt(value, 10);\n        if (isNaN(numberValue)) {\n            setError(\"Error: Please enter a valid integer for the node value.\");\n            setStatus('Operation failed.');\n            return;\n        }\n\n        try {\n            const payload = {\n                operation: operation,\n                value: numberValue,\n                // treeState is null for an empty tree or the object structure otherwise\n                treeState: treeState \n            };\n            \n            // Note: The proxy in package.json directs /api/bst to http://localhost:5001/api/bst\n            const response = await fetchWithRetry('/api/bst', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(payload)\n            });\n\n            const result = await response.json();\n            \n            if (result.steps && result.newState !== undefined) {\n                // 1. Update the tree state\n                setTreeState(result.newState); \n                \n                // 2. Prepare the steps for animation\n                setSteps(result.steps); \n                \n                // 3. Start the animation loop via useEffect\n                \n            } else {\n                throw new Error(\"Invalid response format: Missing steps or newState.\");\n            }\n        } catch (err) {\n            console.error(\"BST API Error:\", err);\n            setError(`Error: API Communication Failed: ${err.message}. Check Flask server logs.`);\n            setStatus('Operation failed.');\n        }\n    }, [treeState]);\n\n    const handleInsert = () => {\n        handleOperation('insert', inputValue);\n    };\n\n    const handleDelete = () => {\n        handleOperation('delete', inputValue);\n    };\n\n    const handleClearTree = () => {\n        setTreeState(null); // Reset to null\n        setSteps([]);\n        setCurrentStepIndex(0);\n        setIsAnimating(false);\n        setError(null);\n        setStatus('Tree cleared.');\n    };\n\n    // Calculate positions before rendering\n    let displayTree = treeState ? JSON.parse(JSON.stringify(treeState)) : null;\n    if (displayTree) {\n        // Initial offset for the root node, centered\n        const initialOffset = CANVAS_WIDTH / 4; \n        calculateNodePositions(displayTree, CANVAS_WIDTH / 2, NODE_RADIUS * 2, 0, initialOffset);\n    }\n    \n    return (\n        <div className=\"p-4 bg-white rounded-xl shadow-lg\">\n            <h2 className=\"text-2xl font-bold mb-4 text-gray-800\">Binary Search Tree Visualizer</h2>\n\n            {/* Controls */}\n            <div className=\"flex items-center space-x-3 mb-6\">\n                <input\n                    type=\"number\"\n                    placeholder=\"Enter node value (e.g., 50)\"\n                    className=\"p-2 border border-gray-300 rounded-lg w-48 focus:ring-blue-500 focus:border-blue-500 transition-shadow\"\n                    value={inputValue}\n                    onChange={(e) => setInputValue(e.target.value)}\n                    onKeyDown={(e) => {\n                        if (e.key === 'Enter') handleInsert();\n                    }}\n                />\n                <button\n                    className=\"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition-colors shadow-md disabled:bg-gray-400\"\n                    onClick={handleInsert}\n                    disabled={isAnimating || !inputValue.trim()}\n                >\n                    Insert\n                </button>\n                <button\n                    className=\"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition-colors shadow-md disabled:bg-gray-400\"\n                    onClick={handleDelete}\n                    disabled={isAnimating || !inputValue.trim() || !treeState}\n                >\n                    Delete\n                </button>\n                <button\n                    className=\"px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 transition-colors shadow-md\"\n                    onClick={handleClearTree}\n                    disabled={isAnimating}\n                >\n                    Clear Tree\n                </button>\n            </div>\n\n            {/* Status and Error */}\n            {error && (\n                <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\n                    **Error:** {error}\n                </div>\n            )}\n            <p className=\"text-sm font-medium mb-4 text-gray-600\">\n                **Status:** {status}\n            </p>\n\n            {/* Visualization Area */}\n            <div className=\"border border-gray-300 bg-gray-50 rounded-lg overflow-auto\" style={{ width: '100%', height: CANVAS_HEIGHT + 20 }}>\n                {displayTree ? (\n                    <svg width={CANVAS_WIDTH} height={CANVAS_HEIGHT + VERTICAL_SPACING}>\n                        {renderTree(displayTree)}\n                    </svg>\n                ) : (\n                    <div className=\"flex items-center justify-center h-full text-gray-500\">\n                        The tree is empty. Insert a value to begin!\n                    </div>\n                )}\n            </div>\n            \n        </div>\n    );\n};\n\nexport default BSTVisualizer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}