{"ast":null,"code":"var _jsxFileName = \"/Users/shubhamjana/Desktop/algo-visualizer/frontend/src/components/BSTVisualizer.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Node from './BSTNode'; // Assuming BSTNode.jsx is now named BSTNode.js or similar\n\n// Helper function for exponential backoff retry logic\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fetchWithRetry = async (url, options, retries = 3) => {\n  // ... (Your original fetchWithRetry logic remains unchanged)\n  for (let i = 0; i < retries; i++) {\n    try {\n      const response = await fetch(url, options);\n      if (!response.ok) {\n        try {\n          const errorData = await response.json();\n          throw new Error(errorData.error || `HTTP status: ${response.status}`);\n        } catch {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n      }\n      return response;\n    } catch (error) {\n      console.error(`Fetch attempt ${i + 1} failed:`, error);\n      if (i === retries - 1) throw error;\n      await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));\n    }\n  }\n};\n\n// --- Tree Drawing Constants ---\nconst CANVAS_WIDTH = 800;\nconst CANVAS_HEIGHT = 600;\nconst NODE_RADIUS = 20;\nconst VERTICAL_SPACING = 70;\nconst ANIMATION_SPEED = 500; // ms per step\n\nconst BSTVisualizer = () => {\n  _s();\n  const [inputValue, setInputValue] = useState('');\n  const [treeState, setTreeState] = useState(null);\n  const [displayTree, setDisplayTree] = useState(null); // NEW: State for tree with coordinates\n  const [steps, setSteps] = useState([]);\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [status, setStatus] = useState('Ready for operations.');\n  const [error, setError] = useState(null);\n  const [isAnimating, setIsAnimating] = useState(false);\n\n  // Function to calculate node positions recursively\n  const calculateNodePositions = useCallback((node, x, y, level, offset) => {\n    if (!node) return;\n\n    // Calculate a local offset based on level\n    const nextOffset = offset / 2;\n    node.x = x;\n    node.y = y;\n    node.level = level;\n    if (node.left) {\n      calculateNodePositions(node.left, x - nextOffset, y + VERTICAL_SPACING, level + 1, nextOffset);\n    }\n    if (node.right) {\n      calculateNodePositions(node.right, x + nextOffset, y + VERTICAL_SPACING, level + 1, nextOffset);\n    }\n  }, []); // Dependencies are empty as it only relies on function arguments\n\n  // *** FIX 1: Calculate positions ONLY when the tree structure (treeState) changes ***\n  useEffect(() => {\n    if (treeState) {\n      // Deep clone the structure to avoid modifying the core state\n      let newDisplayTree = JSON.parse(JSON.stringify(treeState));\n\n      // Initial offset for the root node, centered\n      const initialOffset = CANVAS_WIDTH / 4;\n\n      // Calculate and assign x, y coordinates\n      calculateNodePositions(newDisplayTree, CANVAS_WIDTH / 2, NODE_RADIUS * 2, 0, initialOffset);\n\n      // Save the tree with coordinates to the display state\n      setDisplayTree(newDisplayTree);\n    } else {\n      setDisplayTree(null);\n    }\n  }, [treeState, calculateNodePositions]); // Recalculate if treeState changes\n\n  // Effect to start the animation when new steps arrive\n  useEffect(() => {\n    if (steps.length > 0 && !isAnimating) {\n      setIsAnimating(true);\n      setCurrentStepIndex(0);\n    }\n  }, [steps, isAnimating]);\n\n  // Animation loop for steps\n  useEffect(() => {\n    if (!isAnimating || currentStepIndex >= steps.length) {\n      setIsAnimating(false);\n      if (currentStepIndex > 0) {\n        setStatus(`Operation Complete: ${steps[steps.length - 1].action}`);\n      }\n      return;\n    }\n    const currentStep = steps[currentStepIndex];\n    // Note: The tree itself only updates when treeState changes (outside this loop)\n    setStatus(`Step ${currentStepIndex + 1}/${steps.length}: Node ${currentStep.value} - **${currentStep.action}**`);\n    const timer = setTimeout(() => {\n      setCurrentStepIndex(prev => prev + 1);\n    }, ANIMATION_SPEED);\n    return () => clearTimeout(timer);\n  }, [isAnimating, steps, currentStepIndex, ANIMATION_SPEED]); // Added ANIMATION_SPEED dependency\n\n  // Recursive function to render tree structure\n  const renderTree = node => {\n    // Renders the tree from the pre-calculated 'displayTree' state\n    if (!node) return null;\n    const currentStep = steps[currentStepIndex] || {};\n\n    // Determine the style based on the current step\n    let style = 'default';\n    if (currentStep.value === node.value) {\n      if (currentStep.action.includes('Visiting') || currentStep.action.includes('Target Found')) {\n        style = 'active';\n      } else if (currentStep.action.includes('Inserted') || currentStep.action.includes('Value Replaced')) {\n        style = 'success';\n      }\n    }\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [node.left && /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: node.x,\n        y1: node.y,\n        x2: node.left.x,\n        y2: node.left.y,\n        stroke: \"#4A5568\",\n        strokeWidth: \"2\"\n        // Added transition to lines as well\n        ,\n        style: {\n          transition: 'x1 0.5s ease-out, y1 0.5s ease-out, x2 0.5s ease-out, y2 0.5s ease-out'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }, this), node.right && /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: node.x,\n        y1: node.y,\n        x2: node.right.x,\n        y2: node.right.y,\n        stroke: \"#4A5568\",\n        strokeWidth: \"2\"\n        // Added transition to lines as well\n        ,\n        style: {\n          transition: 'x1 0.5s ease-out, y1 0.5s ease-out, x2 0.5s ease-out, y2 0.5s ease-out'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Node, {\n        x: node.x,\n        y: node.y,\n        value: node.value,\n        radius: NODE_RADIUS,\n        style: style\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this), renderTree(node.left), renderTree(node.right)]\n    }, node.value, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this);\n  };\n  const handleOperation = useCallback(async (operation, value) => {\n    setError(null);\n    setSteps([]);\n    setCurrentStepIndex(0);\n    setIsAnimating(false);\n    setStatus(`Attempting ${operation} on value ${value}...`);\n    const numberValue = parseInt(value, 10);\n    if (isNaN(numberValue)) {\n      setError(\"Error: Please enter a valid integer for the node value.\");\n      setStatus('Operation failed.');\n      return;\n    }\n    try {\n      const payload = {\n        operation: operation,\n        value: numberValue,\n        treeState: treeState\n      };\n      const response = await fetchWithRetry('/api/bst', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      if (result.steps && result.newState !== undefined) {\n        // 1. Update the tree state (triggers the position calculation effect)\n        setTreeState(result.newState);\n\n        // 2. Prepare the steps for animation\n        setSteps(result.steps);\n\n        // 3. Animation starts automatically via useEffect\n      } else {\n        throw new Error(\"Invalid response format: Missing steps or newState.\");\n      }\n    } catch (err) {\n      console.error(\"BST API Error:\", err);\n      setError(`Error: API Communication Failed: ${err.message}. Check Flask server logs.`);\n      setStatus('Operation failed.');\n    }\n  }, [treeState]);\n  const handleInsert = () => {\n    handleOperation('insert', inputValue);\n  };\n  const handleDelete = () => {\n    handleOperation('delete', inputValue);\n  };\n  const handleClearTree = () => {\n    setTreeState(null); // Reset to null (triggers position calculation effect)\n    setSteps([]);\n    setCurrentStepIndex(0);\n    setIsAnimating(false);\n    setError(null);\n    setStatus('Tree cleared.');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 bg-white rounded-xl shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4 text-gray-800\",\n      children: \"Binary Search Tree Visualizer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-3 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"Enter node value (e.g., 50)\",\n        className: \"p-2 border border-gray-300 rounded-lg w-48 focus:ring-blue-500 focus:border-blue-500 transition-shadow\",\n        value: inputValue,\n        onChange: e => setInputValue(e.target.value),\n        onKeyDown: e => {\n          if (e.key === 'Enter') handleInsert();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition-colors shadow-md disabled:bg-gray-400\",\n        onClick: handleInsert,\n        disabled: isAnimating || !inputValue.trim(),\n        children: \"Insert\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition-colors shadow-md disabled:bg-gray-400\",\n        onClick: handleDelete,\n        disabled: isAnimating || !inputValue.trim() || !treeState,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 transition-colors shadow-md\",\n        onClick: handleClearTree,\n        disabled: isAnimating,\n        children: \"Clear Tree\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg\",\n      children: [\"**Error:** \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm font-medium mb-4 text-gray-600\",\n      children: [\"**Status:** \", status]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border border-gray-300 bg-gray-50 rounded-lg overflow-auto\",\n      style: {\n        width: '100%',\n        height: CANVAS_HEIGHT + 20\n      },\n      children: displayTree ? /*#__PURE__*/_jsxDEV(\"svg\", {\n        width: CANVAS_WIDTH,\n        height: CANVAS_HEIGHT + VERTICAL_SPACING,\n        children: renderTree(displayTree)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-full text-gray-500\",\n        children: \"The tree is empty. Insert a value to begin!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 232,\n    columnNumber: 9\n  }, this);\n};\n_s(BSTVisualizer, \"StpfXFBzmt9HoN3FfcRmgKlL3Gg=\");\n_c = BSTVisualizer;\nexport default BSTVisualizer;\nvar _c;\n$RefreshReg$(_c, \"BSTVisualizer\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Node","jsxDEV","_jsxDEV","fetchWithRetry","url","options","retries","i","response","fetch","ok","errorData","json","Error","error","status","console","Promise","resolve","setTimeout","Math","pow","CANVAS_WIDTH","CANVAS_HEIGHT","NODE_RADIUS","VERTICAL_SPACING","ANIMATION_SPEED","BSTVisualizer","_s","inputValue","setInputValue","treeState","setTreeState","displayTree","setDisplayTree","steps","setSteps","currentStepIndex","setCurrentStepIndex","setStatus","setError","isAnimating","setIsAnimating","calculateNodePositions","node","x","y","level","offset","nextOffset","left","right","newDisplayTree","JSON","parse","stringify","initialOffset","length","action","currentStep","value","timer","prev","clearTimeout","renderTree","style","includes","Fragment","children","x1","y1","x2","y2","stroke","strokeWidth","transition","fileName","_jsxFileName","lineNumber","columnNumber","radius","handleOperation","operation","numberValue","parseInt","isNaN","payload","method","headers","body","result","newState","undefined","err","message","handleInsert","handleDelete","handleClearTree","className","type","placeholder","onChange","e","target","onKeyDown","key","onClick","disabled","trim","width","height","_c","$RefreshReg$"],"sources":["/Users/shubhamjana/Desktop/algo-visualizer/frontend/src/components/BSTVisualizer.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport Node from './BSTNode'; // Assuming BSTNode.jsx is now named BSTNode.js or similar\n\n// Helper function for exponential backoff retry logic\nconst fetchWithRetry = async (url, options, retries = 3) => {\n    // ... (Your original fetchWithRetry logic remains unchanged)\n    for (let i = 0; i < retries; i++) {\n        try {\n            const response = await fetch(url, options);\n            if (!response.ok) {\n                try {\n                    const errorData = await response.json();\n                    throw new Error(errorData.error || `HTTP status: ${response.status}`);\n                } catch {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n            }\n            return response;\n        } catch (error) {\n            console.error(`Fetch attempt ${i + 1} failed:`, error);\n            if (i === retries - 1) throw error;\n            await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));\n        }\n    }\n};\n\n// --- Tree Drawing Constants ---\nconst CANVAS_WIDTH = 800;\nconst CANVAS_HEIGHT = 600;\nconst NODE_RADIUS = 20;\nconst VERTICAL_SPACING = 70;\nconst ANIMATION_SPEED = 500; // ms per step\n\nconst BSTVisualizer = () => {\n    const [inputValue, setInputValue] = useState('');\n    const [treeState, setTreeState] = useState(null); \n    const [displayTree, setDisplayTree] = useState(null); // NEW: State for tree with coordinates\n    const [steps, setSteps] = useState([]);\n    const [currentStepIndex, setCurrentStepIndex] = useState(0);\n    const [status, setStatus] = useState('Ready for operations.');\n    const [error, setError] = useState(null);\n    const [isAnimating, setIsAnimating] = useState(false);\n\n    // Function to calculate node positions recursively\n    const calculateNodePositions = useCallback((node, x, y, level, offset) => {\n        if (!node) return;\n\n        // Calculate a local offset based on level\n        const nextOffset = offset / 2;\n        \n        node.x = x;\n        node.y = y;\n        node.level = level;\n\n        if (node.left) {\n            calculateNodePositions(node.left, x - nextOffset, y + VERTICAL_SPACING, level + 1, nextOffset);\n        }\n        if (node.right) {\n            calculateNodePositions(node.right, x + nextOffset, y + VERTICAL_SPACING, level + 1, nextOffset);\n        }\n    }, []); // Dependencies are empty as it only relies on function arguments\n\n    // *** FIX 1: Calculate positions ONLY when the tree structure (treeState) changes ***\n    useEffect(() => {\n        if (treeState) {\n            // Deep clone the structure to avoid modifying the core state\n            let newDisplayTree = JSON.parse(JSON.stringify(treeState));\n            \n            // Initial offset for the root node, centered\n            const initialOffset = CANVAS_WIDTH / 4; \n            \n            // Calculate and assign x, y coordinates\n            calculateNodePositions(newDisplayTree, CANVAS_WIDTH / 2, NODE_RADIUS * 2, 0, initialOffset);\n\n            // Save the tree with coordinates to the display state\n            setDisplayTree(newDisplayTree);\n        } else {\n            setDisplayTree(null);\n        }\n    }, [treeState, calculateNodePositions]); // Recalculate if treeState changes\n\n    // Effect to start the animation when new steps arrive\n    useEffect(() => {\n        if (steps.length > 0 && !isAnimating) {\n            setIsAnimating(true);\n            setCurrentStepIndex(0);\n        }\n    }, [steps, isAnimating]);\n\n    // Animation loop for steps\n    useEffect(() => {\n        if (!isAnimating || currentStepIndex >= steps.length) {\n            setIsAnimating(false);\n            if (currentStepIndex > 0) {\n                 setStatus(`Operation Complete: ${steps[steps.length - 1].action}`);\n            }\n            return;\n        }\n\n        const currentStep = steps[currentStepIndex];\n        // Note: The tree itself only updates when treeState changes (outside this loop)\n        setStatus(`Step ${currentStepIndex + 1}/${steps.length}: Node ${currentStep.value} - **${currentStep.action}**`);\n        \n        const timer = setTimeout(() => {\n            setCurrentStepIndex(prev => prev + 1);\n        }, ANIMATION_SPEED);\n\n        return () => clearTimeout(timer);\n    }, [isAnimating, steps, currentStepIndex, ANIMATION_SPEED]); // Added ANIMATION_SPEED dependency\n\n    // Recursive function to render tree structure\n    const renderTree = (node) => {\n        // Renders the tree from the pre-calculated 'displayTree' state\n        if (!node) return null;\n\n        const currentStep = steps[currentStepIndex] || {};\n        \n        // Determine the style based on the current step\n        let style = 'default';\n        if (currentStep.value === node.value) {\n            if (currentStep.action.includes('Visiting') || currentStep.action.includes('Target Found')) {\n                style = 'active';\n            } else if (currentStep.action.includes('Inserted') || currentStep.action.includes('Value Replaced')) {\n                 style = 'success';\n            }\n        }\n\n        return (\n            <React.Fragment key={node.value}>\n                {/* Draw lines to children */}\n                {node.left && (\n                    <line \n                        x1={node.x} y1={node.y} \n                        x2={node.left.x} y2={node.left.y}\n                        stroke=\"#4A5568\" strokeWidth=\"2\"\n                        // Added transition to lines as well\n                        style={{ transition: 'x1 0.5s ease-out, y1 0.5s ease-out, x2 0.5s ease-out, y2 0.5s ease-out' }}\n                    />\n                )}\n                {node.right && (\n                    <line \n                        x1={node.x} y1={node.y} \n                        x2={node.right.x} y2={node.right.y}\n                        stroke=\"#4A5568\" strokeWidth=\"2\"\n                        // Added transition to lines as well\n                        style={{ transition: 'x1 0.5s ease-out, y1 0.5s ease-out, x2 0.5s ease-out, y2 0.5s ease-out' }}\n                    />\n                )}\n\n                {/* Render current node - The Node component has its own memoization */}\n                <Node \n                    x={node.x} \n                    y={node.y} \n                    value={node.value} \n                    radius={NODE_RADIUS} \n                    style={style} \n                />\n                \n                {/* Render children recursively */}\n                {renderTree(node.left)}\n                {renderTree(node.right)}\n            </React.Fragment>\n        );\n    };\n\n    const handleOperation = useCallback(async (operation, value) => {\n        setError(null);\n        setSteps([]);\n        setCurrentStepIndex(0);\n        setIsAnimating(false);\n        setStatus(`Attempting ${operation} on value ${value}...`);\n\n        const numberValue = parseInt(value, 10);\n        if (isNaN(numberValue)) {\n            setError(\"Error: Please enter a valid integer for the node value.\");\n            setStatus('Operation failed.');\n            return;\n        }\n\n        try {\n            const payload = {\n                operation: operation,\n                value: numberValue,\n                treeState: treeState \n            };\n            \n            const response = await fetchWithRetry('/api/bst', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(payload)\n            });\n\n            const result = await response.json();\n            \n            if (result.steps && result.newState !== undefined) {\n                // 1. Update the tree state (triggers the position calculation effect)\n                setTreeState(result.newState); \n                \n                // 2. Prepare the steps for animation\n                setSteps(result.steps); \n                \n                // 3. Animation starts automatically via useEffect\n                \n            } else {\n                throw new Error(\"Invalid response format: Missing steps or newState.\");\n            }\n        } catch (err) {\n            console.error(\"BST API Error:\", err);\n            setError(`Error: API Communication Failed: ${err.message}. Check Flask server logs.`);\n            setStatus('Operation failed.');\n        }\n    }, [treeState]);\n\n    const handleInsert = () => {\n        handleOperation('insert', inputValue);\n    };\n\n    const handleDelete = () => {\n        handleOperation('delete', inputValue);\n    };\n\n    const handleClearTree = () => {\n        setTreeState(null); // Reset to null (triggers position calculation effect)\n        setSteps([]);\n        setCurrentStepIndex(0);\n        setIsAnimating(false);\n        setError(null);\n        setStatus('Tree cleared.');\n    };\n    \n    return (\n        <div className=\"p-4 bg-white rounded-xl shadow-lg\">\n            <h2 className=\"text-2xl font-bold mb-4 text-gray-800\">Binary Search Tree Visualizer</h2>\n\n            {/* Controls */}\n            <div className=\"flex items-center space-x-3 mb-6\">\n                <input\n                    type=\"number\"\n                    placeholder=\"Enter node value (e.g., 50)\"\n                    className=\"p-2 border border-gray-300 rounded-lg w-48 focus:ring-blue-500 focus:border-blue-500 transition-shadow\"\n                    value={inputValue}\n                    onChange={(e) => setInputValue(e.target.value)}\n                    onKeyDown={(e) => {\n                        if (e.key === 'Enter') handleInsert();\n                    }}\n                />\n                <button\n                    className=\"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition-colors shadow-md disabled:bg-gray-400\"\n                    onClick={handleInsert}\n                    disabled={isAnimating || !inputValue.trim()}\n                >\n                    Insert\n                </button>\n                <button\n                    className=\"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition-colors shadow-md disabled:bg-gray-400\"\n                    onClick={handleDelete}\n                    disabled={isAnimating || !inputValue.trim() || !treeState}\n                >\n                    Delete\n                </button>\n                <button\n                    className=\"px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 transition-colors shadow-md\"\n                    onClick={handleClearTree}\n                    disabled={isAnimating}\n                >\n                    Clear Tree\n                </button>\n            </div>\n\n            {/* Status and Error */}\n            {error && (\n                <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\n                    **Error:** {error}\n                </div>\n            )}\n            <p className=\"text-sm font-medium mb-4 text-gray-600\">\n                **Status:** {status}\n            </p>\n\n            {/* Visualization Area */}\n            <div className=\"border border-gray-300 bg-gray-50 rounded-lg overflow-auto\" style={{ width: '100%', height: CANVAS_HEIGHT + 20 }}>\n                {/* Use the displayTree state which already has coordinates */}\n                {displayTree ? ( \n                    <svg width={CANVAS_WIDTH} height={CANVAS_HEIGHT + VERTICAL_SPACING}>\n                        {renderTree(displayTree)}\n                    </svg>\n                ) : (\n                    <div className=\"flex items-center justify-center h-full text-gray-500\">\n                        The tree is empty. Insert a value to begin!\n                    </div>\n                )}\n            </div>\n            \n        </div>\n    );\n};\n\nexport default BSTVisualizer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}