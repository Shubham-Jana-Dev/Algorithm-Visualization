{"ast":null,"code":"var _jsxFileName = \"/Users/shubhamjana/Desktop/algo-visualizer/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\n// BSTVisualizer component import has been removed as it was not provided and assumed to be external\n\n// --- Components ---\n\n/**\n * ArrayBar Component: Displays a single element in the array visualization.\n * It handles color coding based on the algorithm state.\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ArrayBar = /*#__PURE__*/React.memo(_c = ({\n  value,\n  height,\n  width,\n  isHighlighted,\n  isPivot,\n  isSorted,\n  isSearchMid,\n  isSearchRange,\n  isFound,\n  isLinearCheck,\n  isBinarySearchMode\n}) => {\n  // Default color is Blue - using inline styles instead of Tailwind\n  let backgroundColor = '#3b82f6'; // blue-500\n  let opacity = 1;\n\n  // --- Search Mode Logic ---\n  if (isFound) {\n    // Found element (Both Search Algorithms) takes highest priority\n    backgroundColor = '#10b981'; // emerald-500\n  } else if (isLinearCheck) {\n    // Linear Search Specific Color for current comparison\n    backgroundColor = '#ef4444'; // red-500\n  } else if (isSearchMid) {\n    // Mid element (Binary Search)\n    backgroundColor = '#f59e0b'; // amber-500\n  } else if (isSearchRange) {\n    // Elements in the current search range (Binary Search)\n    backgroundColor = '#60a5fa'; // blue-400\n  } else if (isBinarySearchMode) {\n    // Excluded elements during Binary Search\n    opacity = 0.3;\n    backgroundColor = '#9ca3af'; // gray-400\n  }\n\n  // --- Sorting Mode Logic (Applied if not in active search highlight) ---\n  // These only apply if the search flags above were false.\n  if (!isBinarySearchMode && !isLinearCheck) {\n    if (isSorted) {\n      backgroundColor = '#22c55e'; // green-500\n      opacity = 1;\n    } else if (isPivot) {\n      backgroundColor = '#9333ea'; // purple-600\n    } else if (isHighlighted) {\n      backgroundColor = '#f97316'; // orange-500\n    }\n  }\n  const finalWidth = width > 0 ? `${width}px` : '20px';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: `${height}px`,\n      width: finalWidth,\n      minWidth: finalWidth,\n      minHeight: '20px',\n      margin: '0 1px',\n      backgroundColor: backgroundColor,\n      opacity: opacity,\n      display: 'flex',\n      alignItems: 'flex-end',\n      justifyContent: 'center',\n      color: 'white',\n      fontWeight: 'bold',\n      fontSize: width > 20 ? '10px' : '8px',\n      borderRadius: '4px 4px 0 0',\n      boxShadow: '0 1px 3px rgba(0,0,0,0.2)',\n      position: 'relative',\n      flexShrink: 0,\n      transition: 'all 0.1s ease-linear'\n    },\n    title: `Value: ${value}`,\n    children: width > 20 && value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n});\n\n// --- Constants ---\n_c2 = ArrayBar;\nconst DEFAULT_ARRAY_SIZE = 15;\nconst MAX_ARRAY_VALUE = 400;\nconst MIN_ARRAY_VALUE = 10;\nconst ANIMATION_SPEED_MS = 80;\n\n// --- Algorithm Pseudocode ---\nconst PSEUDOCODE = {\n  bubblesort: [\"function bubbleSort(array):\", \"  n = array.length\", \"  for i from 0 to n - 2:\", \"    for j from 0 to n - 2 - i:\", \"      // Compare & Highlight array[j] and array[j+1]\", \"      if array[j] > array[j+1]:\", \"        // Swap elements\", \"        swap(array[j], array[j+1])\", \"  return array\"],\n  mergesort: [\"function mergeSort(array):\", \"  if array.length <= 1: return array\", \"  mid = floor(array.length / 2)\", \"  left = mergeSort(array[0...mid])\", \"  right = mergeSort(array[mid...n])\", \"  return merge(left, right)\", \"\", \"function merge(left, right):\", \"  // Merging sub-arrays and placing back into the original array...\", \"  result = []\", \"  while left & right are not empty:\", \"    if left[0] <= right[0]:\", \"      result.push(left.shift())\", \"    else:\", \"      result.push(right.shift())\", \"  return result + left + right\"],\n  quicksort: [\"function quickSort(array, low, high):\", \"  if low < high:\", \"    // Partition the array\", \"    pi = partition(array, low, high)\", \"    // Recursively sort left and right sub-arrays\", \"    quickSort(array, low, pi - 1)\", \"    quickSort(array, pi + 1, high)\", \"\", \"function partition(array, low, high):\", \"  pivot = array[high] // Choose the last element as pivot\", \"  i = low - 1\", \"  for j from low to high - 1:\", \"    if array[j] < pivot:\", \"      i++\", \"      swap(array[i], array[j])\", \"  swap(array[i+1], array[high])\", \"  return i + 1\"],\n  shellsort: [\"function shellSort(array):\", \"  n = array.length\", \"  gap = floor(n / 2)\", \"  while gap > 0:\", \"    // Perform gapped insertion sort\", \"    for i from gap to n - 1:\", \"      temp = array[i]\", \"      j = i\", \"      while j >= gap and array[j - gap] > temp:\", \"        // Shift elements (Highlight comparison and shift)\", \"        array[j] = array[j - gap]\", \"        j = j - gap\", \"      // Place temp (Highlight placement)\", \"      array[j] = temp\", \"    gap = floor(gap / 2) // Reduce the gap\"],\n  selectionsort: [\"function selectionSort(array):\", \"  n = array.length\", \"  for i from 0 to n - 2:\", \"    // Assume current position i holds the minimum\", \"    minIndex = i\", \"    for j from i + 1 to n - 1:\", \"      // Highlight comparison between array[j] and array[minIndex]\", \"      if array[j] < array[minIndex]:\", \"        // Update the index of the minimum element\", \"        minIndex = j\", \"    // If a smaller element was found, swap it into position i\", \"    if minIndex is not i:\", \"      swap(array[i], array[minIndex])\", \"    // Position i is finalized\", \"  return array\"],\n  binarysearch: [\"function binarySearch(array, target):\", \"  // Array MUST be sorted\", \"  low = 0\", \"  high = array.length - 1\", \"  while low <= high:\", \"    mid = floor((low + high) / 2)\", \"    // Highlight mid element (array[mid])\", \"    if array[mid] == target:\", \"      return mid\", \"    else if array[mid] < target:\", \"      // Search right (New Low = mid + 1)\", \"      low = mid + 1\", \"    else:\", \"      // Search left (New High = mid - 1)\", \"      high = mid - 1\", \"  return -1\"],\n  linearsearch: [\"function linearSearch(array, target):\", \"  n = array.length\", \"  for i from 0 to n - 1:\", \"    // Highlight array[i]\", \"    if array[i] == target:\", \"      return i\", \"  return -1\"]\n};\n\n// --- Helper Functions ---\n\nconst generateRandomArray = size => {\n  return Array.from({\n    length: size\n  }, () => Math.floor(Math.random() * (MAX_ARRAY_VALUE - MIN_ARRAY_VALUE + 1)) + MIN_ARRAY_VALUE);\n};\nconst parseCustomArray = inputString => {\n  const elements = inputString.split(',').map(s => {\n    const num = parseInt(s.trim());\n    return isNaN(num) || num <= 0 ? null : Math.min(num, MAX_ARRAY_VALUE);\n  }).filter(n => n !== null);\n  return elements;\n};\n\n// --- CLIENT-SIDE ALGORITHM LOGIC (Generators for visualization steps) ---\nconst getBubbleSortSteps = initialArray => {\n  const array = [...initialArray];\n  const steps = [];\n  const n = array.length;\n  let sortedIndices = [];\n  for (let i = 0; i < n - 1; i++) {\n    let swapped = false;\n    for (let j = 0; j < n - 1 - i; j++) {\n      // Step 1: Comparison\n      steps.push({\n        array: [...array],\n        highlight_indices: [j, j + 1],\n        action: `Comparing array[${j}] and array[${j + 1}]`,\n        sorted_indices: [...sortedIndices]\n      });\n      if (array[j] > array[j + 1]) {\n        [array[j], array[j + 1]] = [array[j + 1], array[j]];\n        swapped = true;\n        // Step 2: Swap (new array state)\n        steps.push({\n          array: [...array],\n          highlight_indices: [j, j + 1],\n          // Still highlighted to show swap result\n          action: `Swapping ${array[j + 1]} and ${array[j]}`,\n          sorted_indices: [...sortedIndices]\n        });\n      }\n    }\n    if (n - 1 - i >= 0) {\n      sortedIndices.push(n - 1 - i);\n    }\n    if (!swapped) {\n      // Mark the rest as sorted if no swap occurred\n      for (let k = 0; k < n - 1 - i; k++) {\n        if (!sortedIndices.includes(k)) {\n          sortedIndices.push(k);\n        }\n      }\n      break;\n    }\n  }\n  const finalSortedIndices = Array.from({\n    length: n\n  }, (_, i) => i);\n  steps.push({\n    array: [...array],\n    highlight_indices: [],\n    action: \"Finished Bubble Sort\",\n    sorted_indices: finalSortedIndices\n  });\n  return steps;\n};\nconst getMergeSortSteps = initialArray => {\n  const array = [...initialArray];\n  const steps = [];\n\n  // Helper function to record the current state\n  const recordStep = (action, highlight_indices = [], sorted_indices = []) => {\n    steps.push({\n      array: [...array],\n      highlight_indices: highlight_indices,\n      action: action,\n      sorted_indices: [...sorted_indices]\n    });\n  };\n  const merge = (arr, start, mid, end) => {\n    const left = arr.slice(start, mid);\n    const right = arr.slice(mid, end);\n    let i = 0,\n      j = 0,\n      k = start;\n\n    // Step 1: Show the sub-arrays being merged\n    recordStep(`Preparing to merge elements from index ${start} to ${end - 1}`, Array.from({\n      length: end - start\n    }, (_, idx) => start + idx));\n\n    // Create a temporary working copy of the original array segment\n    const tempSegment = [...array];\n    while (i < left.length && j < right.length) {\n      const compareIndex = left[i] <= right[j] ? start + i : mid + j;\n      recordStep(`Comparing ${left[i]} and ${right[j]}`, [start + i, mid + j]);\n      if (left[i] <= right[j]) {\n        array[k] = left[i];\n        i++;\n      } else {\n        array[k] = right[j];\n        j++;\n      }\n      // Step 2: Show element placement and update array state\n      recordStep(`Placing element ${array[k]} at index ${k}`, [k]);\n      k++;\n    }\n    while (i < left.length) {\n      array[k] = left[i];\n      // Step 3: Show element placement\n      recordStep(`Placing remaining element ${array[k]} from left half at ${k}`, [k]);\n      i++;\n      k++;\n    }\n    while (j < right.length) {\n      array[k] = right[j];\n      // Step 3: Show element placement\n      recordStep(`Placing remaining element ${array[k]} from right half at ${k}`, [k]);\n      j++;\n      k++;\n    }\n\n    // Step 4: Show completion of merge for this segment\n    recordStep(`Merged segment complete from index ${start} to ${end - 1}`, Array.from({\n      length: end - start\n    }, (_, idx) => start + idx));\n  };\n  const mergeSortHelper = (arr, start, end) => {\n    if (end - start <= 1) return;\n    recordStep(`Splitting array segment from ${start} to ${end - 1}`, Array.from({\n      length: end - start\n    }, (_, idx) => start + idx));\n    const mid = Math.floor((start + end) / 2);\n    mergeSortHelper(arr, start, mid);\n    mergeSortHelper(arr, mid, end);\n    merge(arr, start, mid, end);\n  };\n  mergeSortHelper(array, 0, array.length);\n  const finalSortedIndices = Array.from({\n    length: array.length\n  }, (_, i) => i);\n  recordStep(\"Finished Merge Sort\", [], finalSortedIndices);\n  return steps;\n};\nconst getQuickSortSteps = initialArray => {\n  const array = [...initialArray];\n  const steps = [];\n  const recordStep = (action, highlight_indices = [], pivot_index = null, sorted_indices = []) => {\n    steps.push({\n      array: [...array],\n      action: action,\n      highlight_indices: highlight_indices,\n      pivot_index: pivot_index,\n      sorted_indices: [...sorted_indices]\n    });\n  };\n  const partition = (arr, low, high, sortedIndices) => {\n    const pivot = arr[high];\n    let i = low - 1;\n    recordStep(`Selecting pivot ${pivot} at index ${high}`, [], high, sortedIndices);\n    for (let j = low; j <= high - 1; j++) {\n      // Step 1: Comparison with pivot\n      recordStep(`Comparing ${arr[j]} at ${j} with pivot ${pivot}`, [j], high, sortedIndices);\n      if (arr[j] < pivot) {\n        i++;\n        [arr[i], arr[j]] = [arr[j], arr[i]];\n        // Step 2: Swap\n        recordStep(`Swapping ${arr[i]} at ${i} and ${arr[j]} at ${j}`, [i, j], high, sortedIndices);\n      }\n    }\n    const pivotIndex = i + 1;\n    [arr[pivotIndex], arr[high]] = [arr[high], arr[pivotIndex]];\n\n    // Step 3: Final pivot placement\n    recordStep(`Pivot ${pivot} placed correctly at index ${pivotIndex}`, [pivotIndex], null, [...sortedIndices, pivotIndex]);\n    return pivotIndex;\n  };\n  const sortedIndicesTracker = [];\n  const quickSortHelper = (arr, low, high) => {\n    if (low < high) {\n      const pi = partition(arr, low, high, sortedIndicesTracker);\n      if (!sortedIndicesTracker.includes(pi)) {\n        sortedIndicesTracker.push(pi);\n      }\n      quickSortHelper(arr, low, pi - 1);\n      quickSortHelper(arr, pi + 1, high);\n    } else if (low === high && low >= 0) {\n      if (!sortedIndicesTracker.includes(low)) {\n        sortedIndicesTracker.push(low);\n        recordStep(`Sub-array of size 1 at index ${low} is sorted.`, [], null, sortedIndicesTracker);\n      }\n    }\n  };\n  quickSortHelper(array, 0, array.length - 1);\n  const finalSortedIndices = Array.from({\n    length: array.length\n  }, (_, i) => i);\n  steps.push({\n    array: [...array],\n    action: \"Finished Quick Sort\",\n    highlight_indices: [],\n    pivot_index: null,\n    sorted_indices: finalSortedIndices\n  });\n  return steps;\n};\nconst getShellSortSteps = initialArray => {\n  const array = [...initialArray];\n  const steps = [];\n  const n = array.length;\n  let gap = Math.floor(n / 2);\n  let sortedIndices = [];\n  const recordStep = (action, highlight_indices = [], current_gap = gap, sorted_indices = []) => {\n    steps.push({\n      array: [...array],\n      action: action,\n      highlight_indices: highlight_indices,\n      gap: current_gap,\n      sorted_indices: [...sorted_indices]\n    });\n  };\n  while (gap > 0) {\n    recordStep(`Starting pass with Gap = ${gap}`, [], gap, sortedIndices);\n    for (let i = gap; i < n; i++) {\n      const temp = array[i];\n      let j = i;\n      recordStep(`Selecting element ${temp} at index ${i}. Gap = ${gap}`, [i], gap, sortedIndices);\n      while (j >= gap && array[j - gap] > temp) {\n        // Step 1: Comparison\n        recordStep(`Comparing ${array[j - gap]} at ${j - gap} and ${temp} (to be placed at ${j}). Gap = ${gap}`, [j, j - gap], gap, sortedIndices);\n        array[j] = array[j - gap];\n\n        // Step 2: Shifting\n        recordStep(`Shifting ${array[j - gap]} to ${j}. Gap = ${gap}`, [j], gap, sortedIndices);\n        j -= gap;\n      }\n      array[j] = temp;\n\n      // Step 3: Placement\n      recordStep(`Placing ${temp} at index ${j}. Gap = ${gap}`, [j], gap, sortedIndices);\n    }\n    gap = Math.floor(gap / 2);\n  }\n  const finalSortedIndices = Array.from({\n    length: n\n  }, (_, i) => i);\n  recordStep(\"Finished Shell Sort\", [], 0, finalSortedIndices);\n  return steps;\n};\nconst getSelectionSortSteps = initialArray => {\n  const array = [...initialArray];\n  const steps = [];\n  const n = array.length;\n  let sortedIndices = [];\n  const recordStep = (action, highlight_indices = [], min_index = null, sorted_indices = []) => {\n    steps.push({\n      array: [...array],\n      action: action,\n      highlight_indices: highlight_indices,\n      pivot_index: min_index,\n      // Using pivot_index to track current minimum\n      sorted_indices: [...sorted_indices]\n    });\n  };\n  for (let i = 0; i < n - 1; i++) {\n    let minIndex = i;\n\n    // Step 1: Mark current position and assumed minimum\n    recordStep(`Starting pass ${i + 1}. Current index is ${i}.`, [i], minIndex, sortedIndices);\n    for (let j = i + 1; j < n; j++) {\n      // Step 2: Comparison\n      recordStep(`Comparing ${array[j]} at ${j} with current minimum ${array[minIndex]} at ${minIndex}.`, [j, i], minIndex, sortedIndices);\n      if (array[j] < array[minIndex]) {\n        minIndex = j;\n        // Step 3: New minimum found\n        recordStep(`New minimum found: ${array[minIndex]} at index ${minIndex}.`, [j, i], minIndex, sortedIndices);\n      }\n    }\n    if (minIndex !== i) {\n      [array[i], array[minIndex]] = [array[minIndex], array[i]];\n      // Step 4: Swap to finalize position i\n      recordStep(`Swapping ${array[i]} (new smallest) with ${array[minIndex]} (current position) to place smallest element at ${i}.`, [i, minIndex], null, sortedIndices);\n    } else {\n      // Step 4 (Alternative): No swap needed\n      recordStep(`Element at ${i} is already the smallest in the unsorted portion.`, [i], null, sortedIndices);\n    }\n    sortedIndices.push(i);\n    // Step 5: Position i is finalized\n    recordStep(`Position ${i} is finalized (Sorted).`, [], null, sortedIndices);\n  }\n  if (n > 0 && !sortedIndices.includes(n - 1)) {\n    sortedIndices.push(n - 1);\n  }\n  const finalSortedIndices = Array.from({\n    length: n\n  }, (_, k) => k);\n  recordStep(\"Finished Selection Sort\", [], null, finalSortedIndices);\n  return steps;\n};\nconst getBinarySearchSteps = (arr, target) => {\n  const steps = [];\n  const array = [...arr];\n  steps.push({\n    array: [...array],\n    action: `Search started for target ${target}. Array must be sorted.`,\n    low: 0,\n    high: array.length - 1,\n    mid: -1,\n    found: false,\n    search_target: target,\n    highlight_indices: [],\n    isSearch: true\n  });\n  let low = 0;\n  let high = array.length - 1;\n  let found = false;\n  let mid = -1;\n  while (low <= high) {\n    mid = Math.floor((low + high) / 2);\n\n    // Step 1: Checking mid element\n    steps.push({\n      array: [...array],\n      action: `Checking mid element at index ${mid}: Value is ${array[mid]}`,\n      low: low,\n      high: high,\n      mid: mid,\n      found: false,\n      search_target: target,\n      highlight_indices: [mid],\n      isSearch: true\n    });\n    if (array[mid] === target) {\n      found = true;\n      break;\n    } else if (array[mid] < target) {\n      low = mid + 1;\n      // Step 2: Adjusting low\n      steps.push({\n        array: [...array],\n        action: `Target (${target}) is greater than ${array[mid]}. Searching right half (New Low: ${low}).`,\n        low: low,\n        high: high,\n        mid: mid,\n        found: false,\n        search_target: target,\n        highlight_indices: [],\n        isSearch: true\n      });\n    } else {\n      high = mid - 1;\n      // Step 2: Adjusting high\n      steps.push({\n        array: [...array],\n        action: `Target (${target}) is less than ${array[mid]}. Searching left half (New High: ${high}).`,\n        low: low,\n        high: high,\n        mid: mid,\n        found: false,\n        search_target: target,\n        highlight_indices: [],\n        isSearch: true\n      });\n    }\n  }\n  if (found) {\n    steps.push({\n      array: [...array],\n      action: `SUCCESS! Target ${target} found at index ${mid}. Search complete.`,\n      low: low,\n      high: high,\n      mid: mid,\n      found: true,\n      search_target: target,\n      highlight_indices: [mid],\n      isSearch: true\n    });\n  } else {\n    steps.push({\n      array: [...array],\n      action: `FAILURE! Target ${target} not found. Low (${low}) > High (${high}).`,\n      low: low,\n      high: high,\n      mid: -1,\n      found: false,\n      search_target: target,\n      highlight_indices: [],\n      isSearch: true\n    });\n  }\n  return steps;\n};\nconst getLinearSearchSteps = (arr, target) => {\n  const steps = [];\n  const array = [...arr];\n  const n = array.length;\n  let found = false;\n  let foundIndex = -1;\n  steps.push({\n    array: [...array],\n    action: `Linear Search started for target ${target}.`,\n    current_index: -1,\n    found: false,\n    search_target: target,\n    highlight_indices: [],\n    isLinearSearch: true\n  });\n  for (let i = 0; i < n; i++) {\n    // Step 1: Comparison check\n    steps.push({\n      array: [...array],\n      action: `Comparing element at index ${i}: Value is ${array[i]}`,\n      current_index: i,\n      found: false,\n      search_target: target,\n      highlight_indices: [i],\n      isLinearSearch: true\n    });\n    if (array[i] === target) {\n      found = true;\n      foundIndex = i;\n      break;\n    }\n\n    // Step 2: Move to next index (optional step for clarity)\n    steps.push({\n      array: [...array],\n      action: `Value ${array[i]} does not match ${target}. Moving to next index.`,\n      current_index: i,\n      found: false,\n      search_target: target,\n      highlight_indices: [],\n      isLinearSearch: true\n    });\n  }\n  if (found) {\n    steps.push({\n      array: [...array],\n      action: `SUCCESS! Target ${target} found at index ${foundIndex}. Search complete.`,\n      current_index: foundIndex,\n      found: true,\n      search_target: target,\n      highlight_indices: [foundIndex],\n      isLinearSearch: true\n    });\n  } else {\n    steps.push({\n      array: [...array],\n      action: `FAILURE! Target ${target} not found after checking all elements. Search complete.`,\n      current_index: n - 1,\n      found: false,\n      search_target: target,\n      highlight_indices: [],\n      isLinearSearch: true\n    });\n  }\n  return steps;\n};\n\n// --- Main App Component ---\nexport default function App() {\n  _s();\n  const [currentView, setCurrentView] = useState('sort');\n\n  // Sorting/Searching Visualizer States\n  const [steps, setSteps] = useState(null);\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [selectedAlgorithm, setSelectedAlgorithm] = useState(\"bubblesort\");\n  const [loadingError, setLoadingError] = useState(null);\n  const [inputArray, setInputArray] = useState(() => generateRandomArray(DEFAULT_ARRAY_SIZE));\n  const [arraySize, setArraySize] = useState(DEFAULT_ARRAY_SIZE);\n  const [customInputData, setCustomInputData] = useState(\"\");\n  const [speed, setSpeed] = useState(ANIMATION_SPEED_MS);\n\n  // State for Search Algorithms\n  const [searchTarget, setSearchTarget] = useState(50);\n\n  // Animation State\n  const [isAnimating, setIsAnimating] = useState(false);\n  const animationRef = useRef(null);\n  const isAnimatingRef = useRef(false); // Used to safely stop animation within timeout\n\n  // Derived States\n  const currentStep = steps ? steps[currentStepIndex] : null;\n  const currentArray = currentStep ? currentStep.array : inputArray;\n  const highlightIndices = currentStep ? currentStep.highlight_indices : [];\n  const pivotIndex = currentStep ? currentStep.pivot_index : null;\n  const sortedIndices = currentStep ? currentStep.sorted_indices || [] : [];\n  const isSortingComplete = steps && currentStepIndex >= steps.length - 1 && steps.length > 0;\n  const currentPseudocode = PSEUDOCODE[selectedAlgorithm];\n  const isSearchAlgorithm = selectedAlgorithm === 'binarysearch' || selectedAlgorithm === 'linearsearch';\n  const isSupportedAlgorithm = [\"bubblesort\", \"mergesort\", \"quicksort\", \"shellsort\", \"selectionsort\", \"binarysearch\", \"linearsearch\"].includes(selectedAlgorithm);\n\n  // Calculate bar width based on container width and number of elements\n  const barWidth = currentArray.length > 0 ? Math.max(10, 800 / currentArray.length - 2) : 20; // Max 800px width for visualization container\n\n  // Calculate max height for bar normalization\n  const maxVal = Math.max(...inputArray, 100);\n\n  // --- Handlers ---\n  const handleGenerateNewArray = (size = arraySize) => {\n    if (isAnimating) handleStartStopAnimation();\n    const newArray = generateRandomArray(size);\n    setInputArray(newArray);\n    setCustomInputData(\"\");\n    setArraySize(size);\n\n    // Set a random element from the new array as the target for search\n    if (isSearchAlgorithm && newArray.length > 0) {\n      setSearchTarget(newArray[Math.floor(Math.random() * newArray.length)]);\n    } else {\n      setSearchTarget(50); // Default target\n    }\n  };\n  const handleLoadCustomArray = () => {\n    if (isAnimating) handleStartStopAnimation();\n    const newArray = parseCustomArray(customInputData);\n    if (newArray.length > 0 && newArray.length <= 50) {\n      setInputArray(newArray);\n      setArraySize(newArray.length);\n      setLoadingError(null);\n      if (isSearchAlgorithm && newArray.length > 0) {\n        setSearchTarget(newArray[Math.floor(Math.random() * newArray.length)]);\n      } else {\n        setSearchTarget(50);\n      }\n    } else if (newArray.length > 50) {\n      setLoadingError(\"Maximum array size for custom input is 50 elements.\");\n    } else {\n      setLoadingError(\"Invalid or empty custom array input. Please use comma-separated integers (e.g., 5,12,3,40).\");\n    }\n  };\n  const handleSearchClick = () => {\n    // Re-trigger useEffect for search logic\n    const currentTarget = Number(searchTarget);\n    setSearchTarget(currentTarget);\n    if (isAnimating) handleStartStopAnimation();\n    setCurrentStepIndex(0);\n    // Note: The main logic runs in useEffect below\n  };\n\n  // --- Animation Control Logic (THE FIX) ---\n\n  const handleStartStopAnimation = useCallback(() => {\n    // Toggle the animation state flag\n    const newAnimatingState = !isAnimatingRef.current;\n\n    // Cleanup any existing timeout\n    if (animationRef.current) {\n      clearTimeout(animationRef.current);\n      animationRef.current = null;\n    }\n    setIsAnimating(newAnimatingState);\n    isAnimatingRef.current = newAnimatingState;\n    if (newAnimatingState && isSortingComplete) {\n      setCurrentStepIndex(0); // Reset if starting again after completion\n    }\n  }, [isAnimating, isSortingComplete]);\n\n  // Effect to control the animation loop start/stop\n  useEffect(() => {\n    if (!isAnimating || !steps || steps.length === 0) {\n      return; // Nothing to animate\n    }\n    const startAnimation = () => {\n      // Schedule the first step update after the delay\n      animationRef.current = setTimeout(() => {\n        // Use functional update to ensure we use the latest state\n        setCurrentStepIndex(prevIndex => {\n          const nextIndex = prevIndex + 1;\n          if (nextIndex < steps.length) {\n            // Keep going: schedule the next step\n            startAnimation();\n            return nextIndex;\n          } else {\n            // Stop: reached the end\n            setIsAnimating(false);\n            isAnimatingRef.current = false;\n            return prevIndex; // Stay at the last index\n          }\n        });\n      }, speed);\n    };\n\n    // Start the loop\n    startAnimation();\n\n    // Cleanup function\n    return () => {\n      if (animationRef.current) {\n        clearTimeout(animationRef.current);\n        animationRef.current = null;\n      }\n    };\n  }, [isAnimating, steps, speed]);\n\n  // Effect to recalculate steps whenever the array, algorithm, or target changes\n  useEffect(() => {\n    if (isAnimating) {\n      handleStartStopAnimation();\n    }\n    setCurrentStepIndex(0);\n    setLoadingError(null);\n    if (!inputArray || inputArray.length === 0) {\n      setLoadingError(\"The array is empty. Please generate or enter an array.\");\n      setSteps(null);\n      return;\n    }\n    let arrayForAlgo = [...inputArray];\n    if (selectedAlgorithm === 'binarysearch') {\n      // Binary search MUST have a sorted array\n      const isAlreadySorted = arrayForAlgo.every((val, i, arr) => i === 0 || val >= arr[i - 1]);\n      if (!isAlreadySorted) {\n        arrayForAlgo.sort((a, b) => a - b);\n        const arraysEqual = arrayForAlgo.length === inputArray.length && arrayForAlgo.every((val, i) => val === inputArray[i]);\n        if (!arraysEqual) {\n          setInputArray(arrayForAlgo); // Update state to the sorted array\n        }\n        setLoadingError(\"Binary Search requires a sorted array. The array has been sorted automatically.\");\n      }\n    } else {\n      // All other algorithms operate on the current inputArray state\n      arrayForAlgo = [...inputArray];\n    }\n    try {\n      let newSteps = [];\n      switch (selectedAlgorithm) {\n        case 'bubblesort':\n          newSteps = getBubbleSortSteps(arrayForAlgo);\n          break;\n        case 'mergesort':\n          newSteps = getMergeSortSteps(arrayForAlgo);\n          break;\n        case 'quicksort':\n          newSteps = getQuickSortSteps(arrayForAlgo);\n          break;\n        case 'shellsort':\n          newSteps = getShellSortSteps(arrayForAlgo);\n          break;\n        case 'selectionsort':\n          newSteps = getSelectionSortSteps(arrayForAlgo);\n          break;\n        case 'binarysearch':\n          newSteps = getBinarySearchSteps(arrayForAlgo, searchTarget);\n          break;\n        case 'linearsearch':\n          newSteps = getLinearSearchSteps(arrayForAlgo, searchTarget);\n          break;\n        default:\n          setLoadingError(`Algorithm \"${selectedAlgorithm}\" is not supported.`);\n          setSteps(null);\n          return;\n      }\n      if (newSteps && newSteps.length > 0) {\n        setSteps(newSteps);\n      } else {\n        setSteps(null);\n        setLoadingError(\"No steps generated for this algorithm.\");\n      }\n    } catch (e) {\n      console.error(\"Error generating steps:\", e);\n      setLoadingError(\"An error occurred while running the algorithm: \" + e.message);\n      setSteps(null);\n    }\n  }, [selectedAlgorithm, inputArray, searchTarget]);\n  const handleStepControl = action => {\n    if (isAnimating) handleStartStopAnimation();\n    switch (action) {\n      case 'start':\n        setCurrentStepIndex(0);\n        break;\n      case 'back':\n        setCurrentStepIndex(prev => Math.max(0, prev - 1));\n        break;\n      case 'forward':\n        setCurrentStepIndex(prev => Math.min(steps.length - 1, prev + 1));\n        break;\n      case 'end':\n        if (steps) setCurrentStepIndex(steps.length - 1);\n        break;\n      default:\n        break;\n    }\n  };\n\n  // --- Render Helpers for Array Visualization ---\n  const isBinarySearchMode = selectedAlgorithm === 'binarysearch';\n  const isLinearSearchMode = selectedAlgorithm === 'linearsearch';\n  const maxBarHeight = 300;\n  const lowIndex = currentStep && currentStep.isSearch ? currentStep.low : -1;\n  const highIndex = currentStep && currentStep.isSearch ? currentStep.high : -1;\n  const midIndex = currentStep && currentStep.isSearch ? currentStep.mid : -1;\n  const isFound = currentStep && currentStep.isSearch ? currentStep.found : false;\n  const linearCheckIndex = currentStep && currentStep.isLinearSearch ? currentStep.current_index : -1;\n\n  // Determine the state of each bar\n  const bars = currentArray.map((value, index) => {\n    let isSearchRange = false;\n    let isBinarySearchModeBar = false;\n    if (isBinarySearchMode) {\n      if (index >= lowIndex && index <= highIndex) {\n        isSearchRange = true;\n      } else {\n        isBinarySearchModeBar = true;\n      }\n    }\n    return /*#__PURE__*/_jsxDEV(ArrayBar, {\n      value: value,\n      height: value / maxVal * maxBarHeight,\n      width: barWidth,\n      isHighlighted: highlightIndices.includes(index),\n      isPivot: pivotIndex === index,\n      isSorted: sortedIndices.includes(index),\n      isSearchMid: midIndex === index,\n      isSearchRange: isSearchRange,\n      isFound: isFound && (midIndex === index || linearCheckIndex === index),\n      isLinearCheck: isLinearSearchMode && linearCheckIndex === index,\n      isBinarySearchMode: isBinarySearchModeBar\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 983,\n      columnNumber: 13\n    }, this);\n  });\n\n  // --- Main Render ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 p-6 sm:p-10 font-sans\",\n    children: [/*#__PURE__*/_jsxDEV(\"script\", {\n      src: \"https://cdn.tailwindcss.com\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1004,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      dangerouslySetInnerHTML: {\n        __html: `\n            .code-line.active {\n                background-color: #fef3c7; /* Amber-100 */\n                border-left: 4px solid #f59e0b; /* Amber-500 */\n                font-weight: 600;\n            }\n            .code-line {\n                padding: 2px 8px;\n                transition: all 0.1s ease-in-out;\n                font-family: monospace;\n                white-space: pre;\n            }\n        `\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1005,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl mx-auto bg-white shadow-xl rounded-2xl p-6 sm:p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-extrabold text-indigo-700 mb-6 border-b pb-2\",\n        children: \"Algorithm Visualizer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1019,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-4 rounded-lg shadow-inner\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Select Algorithm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1027,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"w-full p-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\",\n            value: selectedAlgorithm,\n            onChange: e => setSelectedAlgorithm(e.target.value),\n            disabled: isAnimating,\n            children: [/*#__PURE__*/_jsxDEV(\"optgroup\", {\n              label: \"Sorting\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"bubblesort\",\n                children: \"Bubble Sort\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1035,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"selectionsort\",\n                children: \"Selection Sort\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1036,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"mergesort\",\n                children: \"Merge Sort\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1037,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"quicksort\",\n                children: \"Quick Sort\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1038,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"shellsort\",\n                children: \"Shell Sort\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1039,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1034,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n              label: \"Searching\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"binarysearch\",\n                children: \"Binary Search\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1042,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"linearsearch\",\n                children: \"Linear Search\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1043,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1041,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1028,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1026,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-4 rounded-lg shadow-inner space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleGenerateNewArray(),\n              className: \"flex-1 px-4 py-2 bg-indigo-500 text-white font-semibold rounded-lg shadow hover:bg-indigo-600 transition disabled:opacity-50\",\n              disabled: isAnimating,\n              children: \"Generate Random Array\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1051,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleGenerateNewArray(25),\n              className: \"px-4 py-2 bg-indigo-400 text-white font-semibold rounded-lg shadow hover:bg-indigo-500 transition disabled:opacity-50 text-sm\",\n              disabled: isAnimating,\n              children: \"Size 25\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1058,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1050,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"e.g., 10,25,3,40\",\n              value: customInputData,\n              onChange: e => setCustomInputData(e.target.value),\n              className: \"flex-1 p-2 border border-gray-300 rounded-lg\",\n              disabled: isAnimating\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1068,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleLoadCustomArray,\n              className: \"px-4 py-2 bg-yellow-500 text-white font-semibold rounded-lg shadow hover:bg-yellow-600 transition disabled:opacity-50 text-sm\",\n              disabled: isAnimating,\n              children: \"Load\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1076,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1067,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1049,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-4 rounded-lg shadow-inner space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700\",\n            children: [\"Animation Speed (ms): \", speed]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1088,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"20\",\n            max: \"500\",\n            step: \"10\",\n            value: speed,\n            onChange: e => setSpeed(Number(e.target.value)),\n            className: \"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\",\n            disabled: isAnimating\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1089,\n            columnNumber: 21\n          }, this), isSearchAlgorithm && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              placeholder: \"Target Value\",\n              value: searchTarget,\n              onChange: e => setSearchTarget(Number(e.target.value)),\n              className: \"w-2/3 p-2 border border-gray-300 rounded-lg\",\n              disabled: isAnimating\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1102,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSearchClick,\n              className: \"w-1/3 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow hover:bg-blue-600 transition disabled:opacity-50\",\n              disabled: isAnimating || !steps,\n              children: \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1110,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1101,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1087,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1024,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-6 rounded-xl shadow-2xl border border-gray-100 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold text-gray-700\",\n            children: [selectedAlgorithm.split(/(?=[A-Z])/).map(s => s.charAt(0).toUpperCase() + s.slice(1)).join(' '), \" Visualization\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1125,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm font-medium text-gray-500\",\n            children: [\"Total Steps: \", steps ? steps.length : 0, \" | Current Step: \", currentStepIndex + 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1128,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1124,\n          columnNumber: 17\n        }, this), loadingError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg mb-4\",\n          children: loadingError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1134,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end justify-center w-full min-h-[350px] max-h-[400px] overflow-x-auto overflow-y-hidden border-b-2 border-gray-300 pb-2\",\n          children: bars\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1139,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4 text-center text-lg font-medium text-gray-800\",\n          children: currentStep ? currentStep.action : \"Press Play to Start Visualization\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1143,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1123,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2 bg-white p-4 rounded-xl border shadow-md flex flex-col justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-700 mb-3\",\n            children: \"Playback Controls\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1152,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleStepControl('start'),\n              className: \"p-3 text-gray-600 hover:text-indigo-600 rounded-full transition disabled:opacity-50\",\n              disabled: isAnimating || currentStepIndex === 0,\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-6 w-6\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: \"2\",\n                  d: \"M11 19l-7-7 7-7m4 14l-7-7 7-7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1155,\n                  columnNumber: 143\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1155,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1154,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleStepControl('back'),\n              className: \"p-3 text-gray-600 hover:text-indigo-600 rounded-full transition disabled:opacity-50\",\n              disabled: isAnimating || currentStepIndex === 0,\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-6 w-6\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: \"2\",\n                  d: \"M15 19l-7-7 7-7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1158,\n                  columnNumber: 144\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1158,\n                columnNumber: 30\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1157,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleStartStopAnimation,\n              className: `p-4 rounded-full shadow-lg transform transition disabled:opacity-50 ${isAnimating ? 'bg-red-500 hover:bg-red-600 text-white' : 'bg-green-500 hover:bg-green-600 text-white'}`,\n              disabled: !steps || steps.length === 0,\n              children: isAnimating ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-8 w-8\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: \"2\",\n                  d: \"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1167,\n                  columnNumber: 147\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1167,\n                columnNumber: 33\n              }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-8 w-8\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: \"2\",\n                  d: \"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1169,\n                  columnNumber: 147\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: \"2\",\n                  d: \"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1169,\n                  columnNumber: 317\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1169,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1161,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleStepControl('forward'),\n              className: \"p-3 text-gray-600 hover:text-indigo-600 rounded-full transition disabled:opacity-50\",\n              disabled: isAnimating || steps && currentStepIndex === steps.length - 1,\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-6 w-6\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: \"2\",\n                  d: \"M9 5l7 7-7 7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1174,\n                  columnNumber: 143\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1174,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1173,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleStepControl('end'),\n              className: \"p-3 text-gray-600 hover:text-indigo-600 rounded-full transition disabled:opacity-50\",\n              disabled: isAnimating || steps && currentStepIndex === steps.length - 1,\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-6 w-6\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: \"2\",\n                  d: \"M13 5l7 7-7 7M5 5l7 7-7 7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1177,\n                  columnNumber: 144\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1177,\n                columnNumber: 30\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1176,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1153,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1151,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-1 bg-gray-900 p-4 rounded-xl shadow-md overflow-x-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-white mb-3\",\n            children: \"Pseudocode\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1184,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n            className: \"text-sm text-gray-200 bg-gray-800 p-2 rounded max-h-60 overflow-y-auto\",\n            children: currentPseudocode ? currentPseudocode.map((line, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `code-line ${currentStep && currentStep.code_line === index ? 'active' : ''}`,\n              children: line\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1187,\n              columnNumber: 29\n            }, this)) : 'Select an algorithm to view pseudocode.'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1185,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1183,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1149,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1018,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1003,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"UadH6hqNhAY6KqehRw7CbkL+YPM=\");\n_c3 = App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ArrayBar$React.memo\");\n$RefreshReg$(_c2, \"ArrayBar\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","jsxDEV","_jsxDEV","ArrayBar","memo","_c","value","height","width","isHighlighted","isPivot","isSorted","isSearchMid","isSearchRange","isFound","isLinearCheck","isBinarySearchMode","backgroundColor","opacity","finalWidth","style","minWidth","minHeight","margin","display","alignItems","justifyContent","color","fontWeight","fontSize","borderRadius","boxShadow","position","flexShrink","transition","title","children","fileName","_jsxFileName","lineNumber","columnNumber","_c2","DEFAULT_ARRAY_SIZE","MAX_ARRAY_VALUE","MIN_ARRAY_VALUE","ANIMATION_SPEED_MS","PSEUDOCODE","bubblesort","mergesort","quicksort","shellsort","selectionsort","binarysearch","linearsearch","generateRandomArray","size","Array","from","length","Math","floor","random","parseCustomArray","inputString","elements","split","map","s","num","parseInt","trim","isNaN","min","filter","n","getBubbleSortSteps","initialArray","array","steps","sortedIndices","i","swapped","j","push","highlight_indices","action","sorted_indices","k","includes","finalSortedIndices","_","getMergeSortSteps","recordStep","merge","arr","start","mid","end","left","slice","right","idx","tempSegment","compareIndex","mergeSortHelper","getQuickSortSteps","pivot_index","partition","low","high","pivot","pivotIndex","sortedIndicesTracker","quickSortHelper","pi","getShellSortSteps","gap","current_gap","temp","getSelectionSortSteps","min_index","minIndex","getBinarySearchSteps","target","found","search_target","isSearch","getLinearSearchSteps","foundIndex","current_index","isLinearSearch","App","_s","currentView","setCurrentView","setSteps","currentStepIndex","setCurrentStepIndex","selectedAlgorithm","setSelectedAlgorithm","loadingError","setLoadingError","inputArray","setInputArray","arraySize","setArraySize","customInputData","setCustomInputData","speed","setSpeed","searchTarget","setSearchTarget","isAnimating","setIsAnimating","animationRef","isAnimatingRef","currentStep","currentArray","highlightIndices","isSortingComplete","currentPseudocode","isSearchAlgorithm","isSupportedAlgorithm","barWidth","max","maxVal","handleGenerateNewArray","handleStartStopAnimation","newArray","handleLoadCustomArray","handleSearchClick","currentTarget","Number","newAnimatingState","current","clearTimeout","startAnimation","setTimeout","prevIndex","nextIndex","arrayForAlgo","isAlreadySorted","every","val","sort","a","b","arraysEqual","newSteps","e","console","error","message","handleStepControl","prev","isLinearSearchMode","maxBarHeight","lowIndex","highIndex","midIndex","linearCheckIndex","bars","index","isBinarySearchModeBar","className","src","dangerouslySetInnerHTML","__html","onChange","disabled","label","onClick","type","placeholder","step","charAt","toUpperCase","join","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","line","code_line","_c3","$RefreshReg$"],"sources":["/Users/shubhamjana/Desktop/algo-visualizer/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\n// BSTVisualizer component import has been removed as it was not provided and assumed to be external\n\n// --- Components ---\n\n/**\n * ArrayBar Component: Displays a single element in the array visualization.\n * It handles color coding based on the algorithm state.\n */\nconst ArrayBar = React.memo(({ value, height, width, isHighlighted, isPivot, isSorted, isSearchMid, isSearchRange, isFound, isLinearCheck, isBinarySearchMode }) => {\n    \n    // Default color is Blue - using inline styles instead of Tailwind\n    let backgroundColor = '#3b82f6'; // blue-500\n    let opacity = 1;\n\n    // --- Search Mode Logic ---\n    if (isFound) {\n        // Found element (Both Search Algorithms) takes highest priority\n        backgroundColor = '#10b981'; // emerald-500\n    } else if (isLinearCheck) {\n        // Linear Search Specific Color for current comparison\n        backgroundColor = '#ef4444'; // red-500\n    } else if (isSearchMid) {\n        // Mid element (Binary Search)\n        backgroundColor = '#f59e0b'; // amber-500\n    } else if (isSearchRange) {\n        // Elements in the current search range (Binary Search)\n        backgroundColor = '#60a5fa'; // blue-400\n    } else if (isBinarySearchMode) { \n        // Excluded elements during Binary Search\n        opacity = 0.3;\n        backgroundColor = '#9ca3af'; // gray-400\n    }\n    \n    // --- Sorting Mode Logic (Applied if not in active search highlight) ---\n    // These only apply if the search flags above were false.\n    if (!isBinarySearchMode && !isLinearCheck) {\n        if (isSorted) {\n            backgroundColor = '#22c55e'; // green-500\n            opacity = 1;\n        } else if (isPivot) {\n            backgroundColor = '#9333ea'; // purple-600\n        } else if (isHighlighted) {\n            backgroundColor = '#f97316'; // orange-500\n        }\n    }\n\n    const finalWidth = width > 0 ? `${width}px` : '20px';\n\n    return (\n        <div \n            style={{\n                height: `${height}px`,\n                width: finalWidth,\n                minWidth: finalWidth,\n                minHeight: '20px',\n                margin: '0 1px',\n                backgroundColor: backgroundColor,\n                opacity: opacity,\n                display: 'flex',\n                alignItems: 'flex-end',\n                justifyContent: 'center',\n                color: 'white',\n                fontWeight: 'bold',\n                fontSize: width > 20 ? '10px' : '8px',\n                borderRadius: '4px 4px 0 0',\n                boxShadow: '0 1px 3px rgba(0,0,0,0.2)',\n                position: 'relative',\n                flexShrink: 0,\n                transition: 'all 0.1s ease-linear',\n            }}\n            title={`Value: ${value}`}\n        >\n            {/* Show value for bars wide enough */}\n            {width > 20 && value}\n        </div>\n    );\n});\n\n// --- Constants ---\nconst DEFAULT_ARRAY_SIZE = 15;\nconst MAX_ARRAY_VALUE = 400; \nconst MIN_ARRAY_VALUE = 10;\nconst ANIMATION_SPEED_MS = 80; \n\n// --- Algorithm Pseudocode ---\nconst PSEUDOCODE = {\n    bubblesort: [\n        \"function bubbleSort(array):\",\n        \"  n = array.length\",\n        \"  for i from 0 to n - 2:\",\n        \"    for j from 0 to n - 2 - i:\",\n        \"      // Compare & Highlight array[j] and array[j+1]\",\n        \"      if array[j] > array[j+1]:\",\n        \"        // Swap elements\",\n        \"        swap(array[j], array[j+1])\",\n        \"  return array\"\n    ],\n    mergesort: [\n        \"function mergeSort(array):\",\n        \"  if array.length <= 1: return array\",\n        \"  mid = floor(array.length / 2)\",\n        \"  left = mergeSort(array[0...mid])\",\n        \"  right = mergeSort(array[mid...n])\",\n        \"  return merge(left, right)\",\n        \"\",\n        \"function merge(left, right):\",\n        \"  // Merging sub-arrays and placing back into the original array...\",\n        \"  result = []\",\n        \"  while left & right are not empty:\",\n        \"    if left[0] <= right[0]:\",\n        \"      result.push(left.shift())\",\n        \"    else:\",\n        \"      result.push(right.shift())\",\n        \"  return result + left + right\"\n    ],\n    quicksort: [\n        \"function quickSort(array, low, high):\",\n        \"  if low < high:\",\n        \"    // Partition the array\",\n        \"    pi = partition(array, low, high)\",\n        \"    // Recursively sort left and right sub-arrays\",\n        \"    quickSort(array, low, pi - 1)\",\n        \"    quickSort(array, pi + 1, high)\",\n        \"\",\n        \"function partition(array, low, high):\",\n        \"  pivot = array[high] // Choose the last element as pivot\",\n        \"  i = low - 1\",\n        \"  for j from low to high - 1:\",\n        \"    if array[j] < pivot:\",\n        \"      i++\",\n        \"      swap(array[i], array[j])\",\n        \"  swap(array[i+1], array[high])\",\n        \"  return i + 1\"\n    ],\n    shellsort: [\n        \"function shellSort(array):\",\n        \"  n = array.length\",\n        \"  gap = floor(n / 2)\",\n        \"  while gap > 0:\",\n        \"    // Perform gapped insertion sort\",\n        \"    for i from gap to n - 1:\",\n        \"      temp = array[i]\",\n        \"      j = i\",\n        \"      while j >= gap and array[j - gap] > temp:\",\n        \"        // Shift elements (Highlight comparison and shift)\",\n        \"        array[j] = array[j - gap]\",\n        \"        j = j - gap\",\n        \"      // Place temp (Highlight placement)\",\n        \"      array[j] = temp\",\n        \"    gap = floor(gap / 2) // Reduce the gap\"\n    ],\n    selectionsort: [\n        \"function selectionSort(array):\",\n        \"  n = array.length\",\n        \"  for i from 0 to n - 2:\",\n        \"    // Assume current position i holds the minimum\",\n        \"    minIndex = i\",\n        \"    for j from i + 1 to n - 1:\",\n        \"      // Highlight comparison between array[j] and array[minIndex]\",\n        \"      if array[j] < array[minIndex]:\",\n        \"        // Update the index of the minimum element\",\n        \"        minIndex = j\",\n        \"    // If a smaller element was found, swap it into position i\",\n        \"    if minIndex is not i:\",\n        \"      swap(array[i], array[minIndex])\",\n        \"    // Position i is finalized\",\n        \"  return array\"\n    ],\n    binarysearch: [\n        \"function binarySearch(array, target):\",\n        \"  // Array MUST be sorted\",\n        \"  low = 0\",\n        \"  high = array.length - 1\",\n        \"  while low <= high:\",\n        \"    mid = floor((low + high) / 2)\",\n        \"    // Highlight mid element (array[mid])\",\n        \"    if array[mid] == target:\",\n        \"      return mid\",\n        \"    else if array[mid] < target:\",\n        \"      // Search right (New Low = mid + 1)\",\n        \"      low = mid + 1\",\n        \"    else:\",\n        \"      // Search left (New High = mid - 1)\",\n        \"      high = mid - 1\",\n        \"  return -1\"\n    ],\n    linearsearch: [\n        \"function linearSearch(array, target):\",\n        \"  n = array.length\",\n        \"  for i from 0 to n - 1:\",\n        \"    // Highlight array[i]\",\n        \"    if array[i] == target:\",\n        \"      return i\",\n        \"  return -1\"\n    ]\n};\n\n// --- Helper Functions ---\n\nconst generateRandomArray = (size) => {\n    return Array.from({ length: size }, () => \n        Math.floor(Math.random() * (MAX_ARRAY_VALUE - MIN_ARRAY_VALUE + 1)) + MIN_ARRAY_VALUE\n    );\n};\n\nconst parseCustomArray = (inputString) => {\n    const elements = inputString.split(',')\n        .map(s => {\n            const num = parseInt(s.trim());\n            return isNaN(num) || num <= 0 ? null : Math.min(num, MAX_ARRAY_VALUE);\n        })\n        .filter(n => n !== null);\n    return elements;\n};\n\n// --- CLIENT-SIDE ALGORITHM LOGIC (Generators for visualization steps) ---\nconst getBubbleSortSteps = (initialArray) => { \n    const array = [...initialArray];\n    const steps = [];\n    const n = array.length;\n    let sortedIndices = [];\n\n    for (let i = 0; i < n - 1; i++) {\n        let swapped = false;\n        for (let j = 0; j < n - 1 - i; j++) {\n            // Step 1: Comparison\n            steps.push({\n                array: [...array], \n                highlight_indices: [j, j + 1], \n                action: `Comparing array[${j}] and array[${j + 1}]`,\n                sorted_indices: [...sortedIndices]\n            });\n\n            if (array[j] > array[j + 1]) {\n                [array[j], array[j + 1]] = [array[j + 1], array[j]];\n                swapped = true;\n                // Step 2: Swap (new array state)\n                steps.push({\n                    array: [...array], \n                    highlight_indices: [j, j + 1], // Still highlighted to show swap result\n                    action: `Swapping ${array[j+1]} and ${array[j]}`, \n                    sorted_indices: [...sortedIndices]\n                });\n            }\n        }\n        \n        if (n - 1 - i >= 0) {\n            sortedIndices.push(n - 1 - i);\n        }\n\n        if (!swapped) {\n            // Mark the rest as sorted if no swap occurred\n            for (let k = 0; k < n - 1 - i; k++) {\n                if (!sortedIndices.includes(k)) {\n                     sortedIndices.push(k);\n                }\n            }\n            break;\n        }\n    }\n\n    const finalSortedIndices = Array.from({ length: n }, (_, i) => i);\n    steps.push({\n        array: [...array], \n        highlight_indices: [], \n        action: \"Finished Bubble Sort\",\n        sorted_indices: finalSortedIndices\n    });\n\n    return steps;\n};\n\nconst getMergeSortSteps = (initialArray) => { \n    const array = [...initialArray];\n    const steps = [];\n    \n    // Helper function to record the current state\n    const recordStep = (action, highlight_indices = [], sorted_indices = []) => {\n        steps.push({\n            array: [...array],\n            highlight_indices: highlight_indices,\n            action: action,\n            sorted_indices: [...sorted_indices]\n        });\n    };\n\n    const merge = (arr, start, mid, end) => {\n        const left = arr.slice(start, mid);\n        const right = arr.slice(mid, end);\n        let i = 0, j = 0, k = start;\n\n        // Step 1: Show the sub-arrays being merged\n        recordStep(`Preparing to merge elements from index ${start} to ${end - 1}`, Array.from({ length: end - start }, (_, idx) => start + idx));\n\n        // Create a temporary working copy of the original array segment\n        const tempSegment = [...array]; \n\n        while (i < left.length && j < right.length) {\n            const compareIndex = left[i] <= right[j] ? start + i : mid + j;\n\n            recordStep(`Comparing ${left[i]} and ${right[j]}`, [start + i, mid + j]);\n            \n            if (left[i] <= right[j]) {\n                array[k] = left[i];\n                i++;\n            } else {\n                array[k] = right[j];\n                j++;\n            }\n            // Step 2: Show element placement and update array state\n            recordStep(`Placing element ${array[k]} at index ${k}`, [k]);\n            k++;\n        }\n\n        while (i < left.length) {\n            array[k] = left[i];\n            // Step 3: Show element placement\n            recordStep(`Placing remaining element ${array[k]} from left half at ${k}`, [k]);\n            i++; k++;\n        }\n        while (j < right.length) {\n            array[k] = right[j];\n            // Step 3: Show element placement\n            recordStep(`Placing remaining element ${array[k]} from right half at ${k}`, [k]);\n            j++; k++;\n        }\n        \n        // Step 4: Show completion of merge for this segment\n        recordStep(`Merged segment complete from index ${start} to ${end - 1}`, Array.from({ length: end - start }, (_, idx) => start + idx));\n    };\n\n    const mergeSortHelper = (arr, start, end) => {\n        if (end - start <= 1) return;\n        \n        recordStep(`Splitting array segment from ${start} to ${end - 1}`, Array.from({ length: end - start }, (_, idx) => start + idx));\n\n        const mid = Math.floor((start + end) / 2);\n        mergeSortHelper(arr, start, mid);\n        mergeSortHelper(arr, mid, end);\n        merge(arr, start, mid, end);\n    };\n\n    mergeSortHelper(array, 0, array.length);\n\n    const finalSortedIndices = Array.from({ length: array.length }, (_, i) => i);\n    recordStep(\"Finished Merge Sort\", [], finalSortedIndices);\n    \n    return steps;\n};\n\nconst getQuickSortSteps = (initialArray) => { \n    const array = [...initialArray];\n    const steps = [];\n\n    const recordStep = (action, highlight_indices = [], pivot_index = null, sorted_indices = []) => {\n        steps.push({\n            array: [...array],\n            action: action,\n            highlight_indices: highlight_indices,\n            pivot_index: pivot_index,\n            sorted_indices: [...sorted_indices]\n        });\n    };\n\n    const partition = (arr, low, high, sortedIndices) => {\n        const pivot = arr[high]; \n        let i = low - 1; \n\n        recordStep(`Selecting pivot ${pivot} at index ${high}`, [], high, sortedIndices);\n\n        for (let j = low; j <= high - 1; j++) {\n            // Step 1: Comparison with pivot\n            recordStep(`Comparing ${arr[j]} at ${j} with pivot ${pivot}`, [j], high, sortedIndices);\n            \n            if (arr[j] < pivot) {\n                i++;\n                [arr[i], arr[j]] = [arr[j], arr[i]];\n                // Step 2: Swap\n                recordStep(`Swapping ${arr[i]} at ${i} and ${arr[j]} at ${j}`, [i, j], high, sortedIndices);\n            }\n        }\n\n        const pivotIndex = i + 1;\n        [arr[pivotIndex], arr[high]] = [arr[high], arr[pivotIndex]];\n        \n        // Step 3: Final pivot placement\n        recordStep(`Pivot ${pivot} placed correctly at index ${pivotIndex}`, [pivotIndex], null, [...sortedIndices, pivotIndex]);\n\n        return pivotIndex;\n    };\n\n    const sortedIndicesTracker = [];\n\n    const quickSortHelper = (arr, low, high) => {\n        if (low < high) {\n            const pi = partition(arr, low, high, sortedIndicesTracker);\n\n            if (!sortedIndicesTracker.includes(pi)) {\n                sortedIndicesTracker.push(pi);\n            }\n\n            quickSortHelper(arr, low, pi - 1);\n            quickSortHelper(arr, pi + 1, high);\n        } else if (low === high && low >= 0) {\n            if (!sortedIndicesTracker.includes(low)) {\n                sortedIndicesTracker.push(low);\n                recordStep(`Sub-array of size 1 at index ${low} is sorted.`, [], null, sortedIndicesTracker);\n            }\n        }\n    };\n\n    quickSortHelper(array, 0, array.length - 1);\n\n    const finalSortedIndices = Array.from({ length: array.length }, (_, i) => i);\n    steps.push({\n        array: [...array], \n        action: \"Finished Quick Sort\",\n        highlight_indices: [],\n        pivot_index: null,\n        sorted_indices: finalSortedIndices\n    });\n\n    return steps;\n};\n\nconst getShellSortSteps = (initialArray) => { \n    const array = [...initialArray];\n    const steps = [];\n    const n = array.length;\n    let gap = Math.floor(n / 2);\n    let sortedIndices = [];\n\n    const recordStep = (action, highlight_indices = [], current_gap = gap, sorted_indices = []) => {\n        steps.push({\n            array: [...array],\n            action: action,\n            highlight_indices: highlight_indices,\n            gap: current_gap,\n            sorted_indices: [...sorted_indices]\n        });\n    };\n\n    while (gap > 0) {\n        recordStep(`Starting pass with Gap = ${gap}`, [], gap, sortedIndices);\n\n        for (let i = gap; i < n; i++) {\n            const temp = array[i];\n            let j = i;\n\n            recordStep(`Selecting element ${temp} at index ${i}. Gap = ${gap}`, [i], gap, sortedIndices);\n\n            while (j >= gap && array[j - gap] > temp) {\n                // Step 1: Comparison\n                recordStep(`Comparing ${array[j - gap]} at ${j - gap} and ${temp} (to be placed at ${j}). Gap = ${gap}`, [j, j - gap], gap, sortedIndices);\n                \n                array[j] = array[j - gap];\n                \n                // Step 2: Shifting\n                recordStep(`Shifting ${array[j - gap]} to ${j}. Gap = ${gap}`, [j], gap, sortedIndices);\n                \n                j -= gap;\n            }\n            \n            array[j] = temp;\n            \n            // Step 3: Placement\n            recordStep(`Placing ${temp} at index ${j}. Gap = ${gap}`, [j], gap, sortedIndices);\n        }\n\n        gap = Math.floor(gap / 2);\n    }\n    \n    const finalSortedIndices = Array.from({ length: n }, (_, i) => i);\n    recordStep(\"Finished Shell Sort\", [], 0, finalSortedIndices);\n\n    return steps;\n};\n\nconst getSelectionSortSteps = (initialArray) => { \n    const array = [...initialArray];\n    const steps = [];\n    const n = array.length;\n    let sortedIndices = [];\n\n    const recordStep = (action, highlight_indices = [], min_index = null, sorted_indices = []) => {\n        steps.push({\n            array: [...array],\n            action: action,\n            highlight_indices: highlight_indices,\n            pivot_index: min_index, // Using pivot_index to track current minimum\n            sorted_indices: [...sorted_indices]\n        });\n    };\n\n    for (let i = 0; i < n - 1; i++) {\n        let minIndex = i;\n        \n        // Step 1: Mark current position and assumed minimum\n        recordStep(`Starting pass ${i + 1}. Current index is ${i}.`, [i], minIndex, sortedIndices);\n\n        for (let j = i + 1; j < n; j++) {\n            // Step 2: Comparison\n            recordStep(`Comparing ${array[j]} at ${j} with current minimum ${array[minIndex]} at ${minIndex}.`, [j, i], minIndex, sortedIndices);\n\n            if (array[j] < array[minIndex]) {\n                minIndex = j;\n                // Step 3: New minimum found\n                recordStep(`New minimum found: ${array[minIndex]} at index ${minIndex}.`, [j, i], minIndex, sortedIndices);\n            }\n        }\n\n        if (minIndex !== i) {\n            [array[i], array[minIndex]] = [array[minIndex], array[i]];\n            // Step 4: Swap to finalize position i\n            recordStep(`Swapping ${array[i]} (new smallest) with ${array[minIndex]} (current position) to place smallest element at ${i}.`, [i, minIndex], null, sortedIndices);\n        } else {\n             // Step 4 (Alternative): No swap needed\n             recordStep(`Element at ${i} is already the smallest in the unsorted portion.`, [i], null, sortedIndices);\n        }\n        \n        sortedIndices.push(i);\n        // Step 5: Position i is finalized\n        recordStep(`Position ${i} is finalized (Sorted).`, [], null, sortedIndices);\n    }\n    \n    if (n > 0 && !sortedIndices.includes(n - 1)) {\n        sortedIndices.push(n - 1);\n    }\n\n    const finalSortedIndices = Array.from({ length: n }, (_, k) => k);\n    recordStep(\"Finished Selection Sort\", [], null, finalSortedIndices);\n\n    return steps;\n};\n\n\nconst getBinarySearchSteps = (arr, target) => { \n    const steps = [];\n    const array = [...arr];\n\n    steps.push({\n        array: [...array],\n        action: `Search started for target ${target}. Array must be sorted.`,\n        low: 0,\n        high: array.length - 1,\n        mid: -1,\n        found: false,\n        search_target: target,\n        highlight_indices: [], \n        isSearch: true,\n    });\n\n    let low = 0;\n    let high = array.length - 1;\n    let found = false;\n    let mid = -1;\n\n    while (low <= high) {\n        mid = Math.floor((low + high) / 2);\n\n        // Step 1: Checking mid element\n        steps.push({\n            array: [...array],\n            action: `Checking mid element at index ${mid}: Value is ${array[mid]}`,\n            low: low,\n            high: high,\n            mid: mid,\n            found: false,\n            search_target: target,\n            highlight_indices: [mid],\n            isSearch: true,\n        });\n\n        if (array[mid] === target) {\n            found = true;\n            break;\n        } else if (array[mid] < target) {\n            low = mid + 1;\n            // Step 2: Adjusting low\n            steps.push({\n                array: [...array],\n                action: `Target (${target}) is greater than ${array[mid]}. Searching right half (New Low: ${low}).`,\n                low: low,\n                high: high,\n                mid: mid,\n                found: false,\n                search_target: target,\n                highlight_indices: [],\n                isSearch: true,\n            });\n        } else {\n            high = mid - 1;\n            // Step 2: Adjusting high\n            steps.push({\n                array: [...array],\n                action: `Target (${target}) is less than ${array[mid]}. Searching left half (New High: ${high}).`,\n                low: low,\n                high: high,\n                mid: mid,\n                found: false,\n                search_target: target,\n                highlight_indices: [],\n                isSearch: true,\n            });\n        }\n    }\n\n    if (found) {\n        steps.push({\n            array: [...array],\n            action: `SUCCESS! Target ${target} found at index ${mid}. Search complete.`,\n            low: low,\n            high: high,\n            mid: mid,\n            found: true,\n            search_target: target,\n            highlight_indices: [mid],\n            isSearch: true,\n        });\n    } else {\n        steps.push({\n            array: [...array],\n            action: `FAILURE! Target ${target} not found. Low (${low}) > High (${high}).`,\n            low: low,\n            high: high,\n            mid: -1,\n            found: false,\n            search_target: target,\n            highlight_indices: [],\n            isSearch: true,\n        });\n    }\n\n    return steps;\n};\n\nconst getLinearSearchSteps = (arr, target) => { \n    const steps = [];\n    const array = [...arr];\n    const n = array.length;\n    let found = false;\n    let foundIndex = -1;\n\n    steps.push({\n        array: [...array],\n        action: `Linear Search started for target ${target}.`,\n        current_index: -1,\n        found: false,\n        search_target: target,\n        highlight_indices: [],\n        isLinearSearch: true,\n    });\n\n    for (let i = 0; i < n; i++) {\n        \n        // Step 1: Comparison check\n        steps.push({\n            array: [...array],\n            action: `Comparing element at index ${i}: Value is ${array[i]}`,\n            current_index: i,\n            found: false,\n            search_target: target,\n            highlight_indices: [i],\n            isLinearSearch: true,\n        });\n        \n        if (array[i] === target) {\n            found = true;\n            foundIndex = i;\n            break;\n        }\n\n        // Step 2: Move to next index (optional step for clarity)\n        steps.push({\n            array: [...array],\n            action: `Value ${array[i]} does not match ${target}. Moving to next index.`,\n            current_index: i,\n            found: false,\n            search_target: target,\n            highlight_indices: [], \n            isLinearSearch: true,\n        });\n    }\n\n    if (found) {\n        steps.push({\n            array: [...array],\n            action: `SUCCESS! Target ${target} found at index ${foundIndex}. Search complete.`,\n            current_index: foundIndex,\n            found: true,\n            search_target: target,\n            highlight_indices: [foundIndex],\n            isLinearSearch: true,\n        });\n    } else {\n        steps.push({\n            array: [...array],\n            action: `FAILURE! Target ${target} not found after checking all elements. Search complete.`,\n            current_index: n - 1,\n            found: false,\n            search_target: target,\n            highlight_indices: [],\n            isLinearSearch: true,\n        });\n    }\n\n    return steps;\n};\n\n// --- Main App Component ---\nexport default function App() {\n  const [currentView, setCurrentView] = useState('sort'); \n    \n  // Sorting/Searching Visualizer States\n  const [steps, setSteps] = useState(null);\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [selectedAlgorithm, setSelectedAlgorithm] = useState(\"bubblesort\"); \n  const [loadingError, setLoadingError] = useState(null);\n  const [inputArray, setInputArray] = useState(() => generateRandomArray(DEFAULT_ARRAY_SIZE));\n  const [arraySize, setArraySize] = useState(DEFAULT_ARRAY_SIZE);\n  const [customInputData, setCustomInputData] = useState(\"\");\n  const [speed, setSpeed] = useState(ANIMATION_SPEED_MS);\n  \n  // State for Search Algorithms\n  const [searchTarget, setSearchTarget] = useState(50); \n  \n  // Animation State\n  const [isAnimating, setIsAnimating] = useState(false);\n  const animationRef = useRef(null);\n  const isAnimatingRef = useRef(false); // Used to safely stop animation within timeout\n\n  // Derived States\n  const currentStep = steps ? steps[currentStepIndex] : null;\n  const currentArray = currentStep ? currentStep.array : inputArray; \n  const highlightIndices = currentStep ? currentStep.highlight_indices : [];\n  const pivotIndex = currentStep ? currentStep.pivot_index : null;\n  const sortedIndices = currentStep ? currentStep.sorted_indices || [] : [];\n  const isSortingComplete = steps && currentStepIndex >= steps.length - 1 && steps.length > 0; \n  const currentPseudocode = PSEUDOCODE[selectedAlgorithm];\n  \n  const isSearchAlgorithm = selectedAlgorithm === 'binarysearch' || selectedAlgorithm === 'linearsearch';\n  const isSupportedAlgorithm = [\"bubblesort\", \"mergesort\", \"quicksort\", \"shellsort\", \"selectionsort\", \"binarysearch\", \"linearsearch\"].includes(selectedAlgorithm); \n  \n  // Calculate bar width based on container width and number of elements\n  const barWidth = currentArray.length > 0 ? Math.max(10, (800 / currentArray.length) - 2) : 20; // Max 800px width for visualization container\n\n  // Calculate max height for bar normalization\n  const maxVal = Math.max(...inputArray, 100); \n\n  // --- Handlers ---\n  const handleGenerateNewArray = (size = arraySize) => {\n      if (isAnimating) handleStartStopAnimation();\n      const newArray = generateRandomArray(size);\n      setInputArray(newArray);\n      setCustomInputData(\"\"); \n      setArraySize(size);\n      \n      // Set a random element from the new array as the target for search\n      if (isSearchAlgorithm && newArray.length > 0) {\n          setSearchTarget(newArray[Math.floor(Math.random() * newArray.length)]); \n      } else {\n          setSearchTarget(50); // Default target\n      }\n  };\n  \n  const handleLoadCustomArray = () => {\n      if (isAnimating) handleStartStopAnimation();\n      const newArray = parseCustomArray(customInputData);\n      if (newArray.length > 0 && newArray.length <= 50) {\n          setInputArray(newArray);\n          setArraySize(newArray.length); \n          setLoadingError(null);\n          if (isSearchAlgorithm && newArray.length > 0) {\n            setSearchTarget(newArray[Math.floor(Math.random() * newArray.length)]);\n          } else {\n            setSearchTarget(50);\n          }\n      } else if (newArray.length > 50) {\n           setLoadingError(\"Maximum array size for custom input is 50 elements.\");\n      } else {\n          setLoadingError(\"Invalid or empty custom array input. Please use comma-separated integers (e.g., 5,12,3,40).\");\n      }\n  };\n  \n  const handleSearchClick = () => {\n    // Re-trigger useEffect for search logic\n    const currentTarget = Number(searchTarget);\n    setSearchTarget(currentTarget);\n    if (isAnimating) handleStartStopAnimation();\n    setCurrentStepIndex(0);\n    // Note: The main logic runs in useEffect below\n  };\n\n\n  // --- Animation Control Logic (THE FIX) ---\n  \n  const handleStartStopAnimation = useCallback(() => {\n    // Toggle the animation state flag\n    const newAnimatingState = !isAnimatingRef.current;\n    \n    // Cleanup any existing timeout\n    if (animationRef.current) {\n        clearTimeout(animationRef.current);\n        animationRef.current = null;\n    }\n    \n    setIsAnimating(newAnimatingState);\n    isAnimatingRef.current = newAnimatingState;\n\n    if (newAnimatingState && isSortingComplete) {\n        setCurrentStepIndex(0); // Reset if starting again after completion\n    }\n  }, [isAnimating, isSortingComplete]);\n\n  // Effect to control the animation loop start/stop\n  useEffect(() => {\n    if (!isAnimating || !steps || steps.length === 0) {\n      return; // Nothing to animate\n    }\n\n    const startAnimation = () => {\n      // Schedule the first step update after the delay\n      animationRef.current = setTimeout(() => {\n        // Use functional update to ensure we use the latest state\n        setCurrentStepIndex(prevIndex => {\n          const nextIndex = prevIndex + 1;\n          \n          if (nextIndex < steps.length) {\n            // Keep going: schedule the next step\n            startAnimation(); \n            return nextIndex;\n          } else {\n            // Stop: reached the end\n            setIsAnimating(false);\n            isAnimatingRef.current = false;\n            return prevIndex; // Stay at the last index\n          }\n        });\n      }, speed);\n    };\n\n    // Start the loop\n    startAnimation();\n\n    // Cleanup function\n    return () => {\n      if (animationRef.current) {\n        clearTimeout(animationRef.current);\n        animationRef.current = null;\n      }\n    };\n  }, [isAnimating, steps, speed]); \n\n  \n  // Effect to recalculate steps whenever the array, algorithm, or target changes\n  useEffect(() => {\n    if (isAnimating) {\n        handleStartStopAnimation(); \n    }\n    \n    setCurrentStepIndex(0);\n    setLoadingError(null);\n\n    if (!inputArray || inputArray.length === 0) {\n        setLoadingError(\"The array is empty. Please generate or enter an array.\");\n        setSteps(null);\n        return;\n    }\n    \n    let arrayForAlgo = [...inputArray];\n    if (selectedAlgorithm === 'binarysearch') {\n        // Binary search MUST have a sorted array\n        const isAlreadySorted = arrayForAlgo.every((val, i, arr) => i === 0 || val >= arr[i - 1]);\n        \n        if (!isAlreadySorted) {\n             arrayForAlgo.sort((a, b) => a - b);\n             const arraysEqual = arrayForAlgo.length === inputArray.length && \n                                arrayForAlgo.every((val, i) => val === inputArray[i]);\n             if (!arraysEqual) {\n                 setInputArray(arrayForAlgo); // Update state to the sorted array\n             }\n             setLoadingError(\"Binary Search requires a sorted array. The array has been sorted automatically.\");\n        }\n    } else {\n        // All other algorithms operate on the current inputArray state\n        arrayForAlgo = [...inputArray];\n    }\n\n\n    try {\n        let newSteps = [];\n        switch (selectedAlgorithm) {\n            case 'bubblesort':\n                newSteps = getBubbleSortSteps(arrayForAlgo);\n                break;\n            case 'mergesort':\n                newSteps = getMergeSortSteps(arrayForAlgo);\n                break;\n            case 'quicksort':\n                newSteps = getQuickSortSteps(arrayForAlgo);\n                break;\n            case 'shellsort':\n                newSteps = getShellSortSteps(arrayForAlgo);\n                break;\n            case 'selectionsort':\n                newSteps = getSelectionSortSteps(arrayForAlgo);\n                break;\n            case 'binarysearch':\n                newSteps = getBinarySearchSteps(arrayForAlgo, searchTarget);\n                break;\n            case 'linearsearch':\n                newSteps = getLinearSearchSteps(arrayForAlgo, searchTarget);\n                break;\n            default:\n                setLoadingError(`Algorithm \"${selectedAlgorithm}\" is not supported.`);\n                setSteps(null);\n                return;\n        }\n        \n        if (newSteps && newSteps.length > 0) {\n            setSteps(newSteps);\n        } else {\n            setSteps(null);\n            setLoadingError(\"No steps generated for this algorithm.\");\n        }\n\n    } catch (e) {\n        console.error(\"Error generating steps:\", e);\n        setLoadingError(\"An error occurred while running the algorithm: \" + e.message);\n        setSteps(null);\n    }\n    \n  }, [selectedAlgorithm, inputArray, searchTarget]);\n  \n\n  const handleStepControl = (action) => {\n      if (isAnimating) handleStartStopAnimation();\n      \n      switch (action) {\n          case 'start':\n              setCurrentStepIndex(0);\n              break;\n          case 'back':\n              setCurrentStepIndex(prev => Math.max(0, prev - 1));\n              break;\n          case 'forward':\n              setCurrentStepIndex(prev => Math.min(steps.length - 1, prev + 1));\n              break;\n          case 'end':\n              if (steps) setCurrentStepIndex(steps.length - 1);\n              break;\n          default:\n              break;\n      }\n  };\n\n  // --- Render Helpers for Array Visualization ---\n    const isBinarySearchMode = selectedAlgorithm === 'binarysearch';\n    const isLinearSearchMode = selectedAlgorithm === 'linearsearch';\n    const maxBarHeight = 300; \n    \n    const lowIndex = currentStep && currentStep.isSearch ? currentStep.low : -1;\n    const highIndex = currentStep && currentStep.isSearch ? currentStep.high : -1;\n    const midIndex = currentStep && currentStep.isSearch ? currentStep.mid : -1;\n    const isFound = currentStep && currentStep.isSearch ? currentStep.found : false;\n    const linearCheckIndex = currentStep && currentStep.isLinearSearch ? currentStep.current_index : -1;\n\n    // Determine the state of each bar\n    const bars = currentArray.map((value, index) => {\n        let isSearchRange = false;\n        let isBinarySearchModeBar = false;\n\n        if (isBinarySearchMode) {\n            if (index >= lowIndex && index <= highIndex) {\n                isSearchRange = true;\n            } else {\n                isBinarySearchModeBar = true;\n            }\n        }\n        \n        return (\n            <ArrayBar\n                key={index}\n                value={value}\n                height={(value / maxVal) * maxBarHeight}\n                width={barWidth}\n                isHighlighted={highlightIndices.includes(index)}\n                isPivot={pivotIndex === index}\n                isSorted={sortedIndices.includes(index)}\n                isSearchMid={midIndex === index}\n                isSearchRange={isSearchRange}\n                isFound={isFound && (midIndex === index || linearCheckIndex === index)}\n                isLinearCheck={isLinearSearchMode && linearCheckIndex === index}\n                isBinarySearchMode={isBinarySearchModeBar}\n            />\n        );\n    });\n\n  \n  // --- Main Render ---\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6 sm:p-10 font-sans\">\n        <script src=\"https://cdn.tailwindcss.com\"></script>\n        <style dangerouslySetInnerHTML={{ __html: `\n            .code-line.active {\n                background-color: #fef3c7; /* Amber-100 */\n                border-left: 4px solid #f59e0b; /* Amber-500 */\n                font-weight: 600;\n            }\n            .code-line {\n                padding: 2px 8px;\n                transition: all 0.1s ease-in-out;\n                font-family: monospace;\n                white-space: pre;\n            }\n        `}} />\n        <div className=\"max-w-6xl mx-auto bg-white shadow-xl rounded-2xl p-6 sm:p-8\">\n            <h1 className=\"text-3xl font-extrabold text-indigo-700 mb-6 border-b pb-2\">\n                Algorithm Visualizer\n            </h1>\n\n            {/* Controls Panel */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\">\n                {/* Algorithm Selection */}\n                <div className=\"bg-gray-50 p-4 rounded-lg shadow-inner\">\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Select Algorithm</label>\n                    <select\n                        className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"\n                        value={selectedAlgorithm}\n                        onChange={(e) => setSelectedAlgorithm(e.target.value)}\n                        disabled={isAnimating}\n                    >\n                        <optgroup label=\"Sorting\">\n                            <option value=\"bubblesort\">Bubble Sort</option>\n                            <option value=\"selectionsort\">Selection Sort</option>\n                            <option value=\"mergesort\">Merge Sort</option>\n                            <option value=\"quicksort\">Quick Sort</option>\n                            <option value=\"shellsort\">Shell Sort</option>\n                        </optgroup>\n                        <optgroup label=\"Searching\">\n                            <option value=\"binarysearch\">Binary Search</option>\n                            <option value=\"linearsearch\">Linear Search</option>\n                        </optgroup>\n                    </select>\n                </div>\n                \n                {/* Array Generation and Custom Input */}\n                <div className=\"bg-gray-50 p-4 rounded-lg shadow-inner space-y-3\">\n                    <div className=\"flex gap-2\">\n                        <button\n                            onClick={() => handleGenerateNewArray()}\n                            className=\"flex-1 px-4 py-2 bg-indigo-500 text-white font-semibold rounded-lg shadow hover:bg-indigo-600 transition disabled:opacity-50\"\n                            disabled={isAnimating}\n                        >\n                            Generate Random Array\n                        </button>\n                        <button\n                            onClick={() => handleGenerateNewArray(25)}\n                            className=\"px-4 py-2 bg-indigo-400 text-white font-semibold rounded-lg shadow hover:bg-indigo-500 transition disabled:opacity-50 text-sm\"\n                            disabled={isAnimating}\n                        >\n                            Size 25\n                        </button>\n                    </div>\n\n                    <div className=\"flex gap-2\">\n                        <input\n                            type=\"text\"\n                            placeholder=\"e.g., 10,25,3,40\"\n                            value={customInputData}\n                            onChange={(e) => setCustomInputData(e.target.value)}\n                            className=\"flex-1 p-2 border border-gray-300 rounded-lg\"\n                            disabled={isAnimating}\n                        />\n                        <button\n                            onClick={handleLoadCustomArray}\n                            className=\"px-4 py-2 bg-yellow-500 text-white font-semibold rounded-lg shadow hover:bg-yellow-600 transition disabled:opacity-50 text-sm\"\n                            disabled={isAnimating}\n                        >\n                            Load\n                        </button>\n                    </div>\n                </div>\n\n                {/* Animation and Search Control */}\n                <div className=\"bg-gray-50 p-4 rounded-lg shadow-inner space-y-3\">\n                    <label className=\"block text-sm font-medium text-gray-700\">Animation Speed (ms): {speed}</label>\n                    <input\n                        type=\"range\"\n                        min=\"20\"\n                        max=\"500\"\n                        step=\"10\"\n                        value={speed}\n                        onChange={(e) => setSpeed(Number(e.target.value))}\n                        className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                        disabled={isAnimating}\n                    />\n                    \n                    {isSearchAlgorithm && (\n                        <div className=\"flex gap-2\">\n                            <input\n                                type=\"number\"\n                                placeholder=\"Target Value\"\n                                value={searchTarget}\n                                onChange={(e) => setSearchTarget(Number(e.target.value))}\n                                className=\"w-2/3 p-2 border border-gray-300 rounded-lg\"\n                                disabled={isAnimating}\n                            />\n                             <button\n                                onClick={handleSearchClick}\n                                className=\"w-1/3 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow hover:bg-blue-600 transition disabled:opacity-50\"\n                                disabled={isAnimating || !steps}\n                            >\n                                Search\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {/* Visualization Area */}\n            <div className=\"bg-white p-6 rounded-xl shadow-2xl border border-gray-100 mb-6\">\n                <div className=\"flex justify-between items-center mb-4\">\n                    <h2 className=\"text-xl font-semibold text-gray-700\">\n                        {selectedAlgorithm.split(/(?=[A-Z])/).map(s => s.charAt(0).toUpperCase() + s.slice(1)).join(' ')} Visualization\n                    </h2>\n                    <p className=\"text-sm font-medium text-gray-500\">\n                        Total Steps: {steps ? steps.length : 0} | Current Step: {currentStepIndex + 1}\n                    </p>\n                </div>\n                \n                {loadingError && (\n                    <div className=\"p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg mb-4\">\n                        {loadingError}\n                    </div>\n                )}\n\n                <div className=\"flex items-end justify-center w-full min-h-[350px] max-h-[400px] overflow-x-auto overflow-y-hidden border-b-2 border-gray-300 pb-2\">\n                    {bars}\n                </div>\n                \n                <p className=\"mt-4 text-center text-lg font-medium text-gray-800\">\n                    {currentStep ? currentStep.action : \"Press Play to Start Visualization\"}\n                </p>\n            </div>\n\n            {/* Playback Controls and Pseudocode */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                {/* Playback Controls */}\n                <div className=\"lg:col-span-2 bg-white p-4 rounded-xl border shadow-md flex flex-col justify-between\">\n                    <h3 className=\"text-lg font-semibold text-gray-700 mb-3\">Playback Controls</h3>\n                    <div className=\"flex justify-center items-center space-x-2\">\n                        <button onClick={() => handleStepControl('start')} className=\"p-3 text-gray-600 hover:text-indigo-600 rounded-full transition disabled:opacity-50\" disabled={isAnimating || currentStepIndex === 0}>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M11 19l-7-7 7-7m4 14l-7-7 7-7\" /></svg>\n                        </button>\n                        <button onClick={() => handleStepControl('back')} className=\"p-3 text-gray-600 hover:text-indigo-600 rounded-full transition disabled:opacity-50\" disabled={isAnimating || currentStepIndex === 0}>\n                             <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 19l-7-7 7-7\" /></svg>\n                        </button>\n\n                        <button\n                            onClick={handleStartStopAnimation}\n                            className={`p-4 rounded-full shadow-lg transform transition disabled:opacity-50 ${isAnimating ? 'bg-red-500 hover:bg-red-600 text-white' : 'bg-green-500 hover:bg-green-600 text-white'}`}\n                            disabled={!steps || steps.length === 0}\n                        >\n                            {isAnimating ? (\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n                            ) : (\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n                            )}\n                        </button>\n\n                        <button onClick={() => handleStepControl('forward')} className=\"p-3 text-gray-600 hover:text-indigo-600 rounded-full transition disabled:opacity-50\" disabled={isAnimating || (steps && currentStepIndex === steps.length - 1)}>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 5l7 7-7 7\" /></svg>\n                        </button>\n                        <button onClick={() => handleStepControl('end')} className=\"p-3 text-gray-600 hover:text-indigo-600 rounded-full transition disabled:opacity-50\" disabled={isAnimating || (steps && currentStepIndex === steps.length - 1)}>\n                             <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13 5l7 7-7 7M5 5l7 7-7 7\" /></svg>\n                        </button>\n                    </div>\n                </div>\n\n                {/* Pseudocode */}\n                <div className=\"lg:col-span-1 bg-gray-900 p-4 rounded-xl shadow-md overflow-x-auto\">\n                    <h3 className=\"text-lg font-semibold text-white mb-3\">Pseudocode</h3>\n                    <pre className=\"text-sm text-gray-200 bg-gray-800 p-2 rounded max-h-60 overflow-y-auto\">\n                        {currentPseudocode ? currentPseudocode.map((line, index) => (\n                            <div key={index} className={`code-line ${currentStep && currentStep.code_line === index ? 'active' : ''}`}>\n                                {line}\n                            </div>\n                        )) : 'Select an algorithm to view pseudocode.'}\n                    </pre>\n                </div>\n            </div>\n        </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}