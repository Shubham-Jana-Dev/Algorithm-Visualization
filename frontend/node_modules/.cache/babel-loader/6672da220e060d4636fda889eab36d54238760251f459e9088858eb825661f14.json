{"ast":null,"code":"var _jsxFileName = \"/Users/shubhamjana/Desktop/algo-visualizer/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport BSTVisualizer from './components/BSTVisualizer';\n\n// --- Components ---\n\n/**\n * ArrayBar Component: Displays a single element in the array visualization.\n * It handles color coding based on the algorithm state.\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ArrayBar = /*#__PURE__*/React.memo(_c = ({\n  value,\n  height,\n  width,\n  isHighlighted,\n  isPivot,\n  isSorted,\n  isSearchMid,\n  isSearchRange,\n  isFound,\n  isLinearCheck,\n  isBinarySearchMode\n}) => {\n  // Default color is Blue\n  let color = 'bg-blue-500';\n  let opacity = 'opacity-100';\n\n  // --- Search Mode Logic ---\n  if (isFound) {\n    // Found element (Both Search Algorithms) takes highest priority\n    color = 'bg-emerald-500'; // Emerald/Found\n  } else if (isLinearCheck) {\n    // Linear Search Specific Color for current comparison\n    color = 'bg-red-500'; // Red for comparison check\n  } else if (isSearchMid) {\n    // Mid element (Binary Search)\n    color = 'bg-amber-500'; // Amber/Mid\n  } else if (isSearchRange) {\n    // Elements in the current search range (Binary Search)\n    color = 'bg-blue-400';\n  } else if (isBinarySearchMode) {\n    // FIX: Only apply the excluded style if we are explicitly in Binary Search mode\n    // Excluded elements during Binary Search\n    opacity = 'opacity-30';\n    color = 'bg-gray-400';\n  }\n\n  // --- Sorting Mode Logic (Applied if not in active search highlight) ---\n  // These only apply if the search flags above were false.\n  if (!isBinarySearchMode && !isLinearCheck) {\n    if (isSorted) {\n      color = 'bg-green-500';\n      opacity = 'opacity-100';\n    } else if (isPivot) {\n      color = 'bg-purple-600'; // Purple for Pivot/MinIndex\n    } else if (isHighlighted) {\n      color = 'bg-orange-500'; // Orange for comparison/swap\n    }\n  }\n  const finalWidth = width > 0 ? `${width}px` : 'auto';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `transition-all duration-100 ease-linear rounded-t-sm shadow-md flex items-end justify-center text-white font-bold relative ${color} ${opacity}`,\n    style: {\n      height: `${height}px`,\n      width: finalWidth,\n      margin: '0 1px',\n      fontSize: width > 20 ? '10px' : '8px'\n    },\n    title: `Value: ${value}`,\n    children: width > 20 && value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n});\n\n// --- Constants ---\n_c2 = ArrayBar;\nconst DEFAULT_ARRAY_SIZE = 15;\nconst MAX_ARRAY_VALUE = 400;\nconst MIN_ARRAY_VALUE = 10;\nconst ANIMATION_SPEED_MS = 80;\n\n// --- Algorithm Pseudocode ---\nconst PSEUDOCODE = {\n  bubblesort: [\"function bubbleSort(array):\", \"  n = array.length\", \"  for i from 0 to n - 2:\", \"    for j from 0 to n - 2 - i:\", \"      // Compare & Highlight array[j] and array[j+1]\", \"      if array[j] > array[j+1]:\", \"        // Swap elements\", \"        swap(array[j], array[j+1])\", \"  return array\"],\n  mergesort: [\"function mergeSort(array):\", \"  if array.length <= 1: return array\", \"  mid = floor(array.length / 2)\", \"  left = mergeSort(array[0...mid])\", \"  right = mergeSort(array[mid...n])\", \"  return merge(left, right)\", \"\", \"function merge(left, right):\", \"  // Merging sub-arrays and placing back into the original array...\", \"  result = []\", \"  while left & right are not empty:\", \"    if left[0] <= right[0]:\", \"      result.push(left.shift())\", \"    else:\", \"      result.push(right.shift())\", \"  return result + left + right\"],\n  quicksort: [\"function quickSort(array, low, high):\", \"  if low < high:\", \"    // Partition the array\", \"    pi = partition(array, low, high)\", \"    // Recursively sort left and right sub-arrays\", \"    quickSort(array, low, pi - 1)\", \"    quickSort(array, pi + 1, high)\", \"\", \"function partition(array, low, high):\", \"  pivot = array[high] // Choose the last element as pivot\", \"  i = low - 1\", \"  for j from low to high - 1:\", \"    if array[j] < pivot:\", \"      i++\", \"      swap(array[i], array[j])\", \"  swap(array[i+1], array[high])\", \"  return i + 1\"],\n  shellsort: [\"function shellSort(array):\", \"  n = array.length\", \"  gap = floor(n / 2)\", \"  while gap > 0:\", \"    // Perform gapped insertion sort\", \"    for i from gap to n - 1:\", \"      temp = array[i]\", \"      j = i\", \"      while j >= gap and array[j - gap] > temp:\", \"        // Shift elements (Highlight comparison and shift)\", \"        array[j] = array[j - gap]\", \"        j = j - gap\", \"      // Place temp (Highlight placement)\", \"      array[j] = temp\", \"    gap = floor(gap / 2) // Reduce the gap\"],\n  selectionsort: [\"function selectionSort(array):\", \"  n = array.length\", \"  for i from 0 to n - 2:\", \"    // Assume current position i holds the minimum\", \"    minIndex = i\", \"    for j from i + 1 to n - 1:\", \"      // Highlight comparison between array[j] and array[minIndex]\", \"      if array[j] < array[minIndex]:\", \"        // Update the index of the minimum element\", \"        minIndex = j\", \"    // If a smaller element was found, swap it into position i\", \"    if minIndex is not i:\", \"      swap(array[i], array[minIndex])\", \"    // Position i is finalized\", \"  return array\"],\n  binarysearch: [\"function binarySearch(array, target):\", \"  // Array MUST be sorted\", \"  low = 0\", \"  high = array.length - 1\", \"  while low <= high:\", \"    mid = floor((low + high) / 2)\", \"    // Highlight mid element (array[mid])\", \"    if array[mid] == target:\", \"      return mid\", \"    else if array[mid] < target:\", \"      // Search right (New Low = mid + 1)\", \"      low = mid + 1\", \"    else:\", \"      // Search left (New High = mid - 1)\", \"      high = mid - 1\", \"  return -1\"],\n  linearsearch: [\"function linearSearch(array, target):\", \"  n = array.length\", \"  for i from 0 to n - 1:\", \"    // Highlight array[i]\", \"    if array[i] == target:\", \"      return i\", \"  return -1\"]\n};\n\n// --- Helper Functions ---\n\nconst generateRandomArray = size => {\n  return Array.from({\n    length: size\n  }, () => Math.floor(Math.random() * (MAX_ARRAY_VALUE - MIN_ARRAY_VALUE + 1)) + MIN_ARRAY_VALUE);\n};\nconst parseCustomArray = inputString => {\n  const elements = inputString.split(',').map(s => {\n    const num = parseInt(s.trim());\n    return isNaN(num) || num <= 0 ? null : Math.min(num, MAX_ARRAY_VALUE);\n  }).filter(n => n !== null);\n  return elements;\n};\n\n// --- CLIENT-SIDE ALGORITHM LOGIC (Generators for visualization steps) ---\nconst getBubbleSortSteps = initialArray => {\n  const array = [...initialArray];\n  const steps = [];\n  const n = array.length;\n  let sortedIndices = [];\n  for (let i = 0; i < n - 1; i++) {\n    let swapped = false;\n    for (let j = 0; j < n - 1 - i; j++) {\n      steps.push({\n        array: [...array],\n        highlight_indices: [j, j + 1],\n        action: `Comparing array[${j}] and array[${j + 1}]`,\n        sorted_indices: [...sortedIndices]\n      });\n      if (array[j] > array[j + 1]) {\n        [array[j], array[j + 1]] = [array[j + 1], array[j]];\n        swapped = true;\n        steps.push({\n          array: [...array],\n          highlight_indices: [j, j + 1],\n          action: `Swapping ${array[j + 1]} and ${array[j]}`,\n          sorted_indices: [...sortedIndices]\n        });\n      }\n    }\n    if (n - 1 - i >= 0) {\n      sortedIndices.push(n - 1 - i);\n    }\n    if (!swapped) {\n      // Mark the rest as sorted if no swap occurred\n      for (let k = 0; k < n - 1 - i; k++) {\n        if (!sortedIndices.includes(k)) {\n          sortedIndices.push(k);\n        }\n      }\n      break;\n    }\n  }\n  const finalSortedIndices = Array.from({\n    length: n\n  }, (_, i) => i);\n  steps.push({\n    array: [...array],\n    highlight_indices: [],\n    action: \"Finished Bubble Sort\",\n    sorted_indices: finalSortedIndices\n  });\n  return steps;\n};\nconst getMergeSortSteps = initialArray => {\n  const array = [...initialArray];\n  const steps = [];\n  const merge = (arr, start, mid, end) => {\n    const left = arr.slice(start, mid);\n    const right = arr.slice(mid, end);\n    let i = 0,\n      j = 0,\n      k = start;\n    steps.push({\n      array: [...array],\n      highlight_indices: Array.from({\n        length: end - start\n      }, (_, idx) => start + idx),\n      action: `Merging sub-arrays from index ${start} to ${end - 1}`,\n      sorted_indices: []\n    });\n    while (i < left.length && j < right.length) {\n      if (left[i] <= right[j]) {\n        array[k] = left[i];\n        i++;\n      } else {\n        array[k] = right[j];\n        j++;\n      }\n      k++;\n      steps.push({\n        array: [...array],\n        highlight_indices: [k - 1],\n        action: `Placing element at index ${k - 1}`,\n        sorted_indices: []\n      });\n    }\n    while (i < left.length) {\n      array[k] = left[i];\n      i++;\n      k++;\n      steps.push({\n        array: [...array],\n        highlight_indices: [k - 1],\n        action: `Placing remaining element from left half at ${k - 1}`,\n        sorted_indices: []\n      });\n    }\n    while (j < right.length) {\n      array[k] = right[j];\n      j++;\n      k++;\n      steps.push({\n        array: [...array],\n        highlight_indices: [k - 1],\n        action: `Placing remaining element from right half at ${k - 1}`,\n        sorted_indices: []\n      });\n    }\n    steps.push({\n      array: [...array],\n      highlight_indices: [],\n      action: `Merged segment complete from index ${start} to ${end - 1}`,\n      sorted_indices: []\n    });\n  };\n  const mergeSortHelper = (arr, start, end) => {\n    if (end - start <= 1) return;\n    const mid = Math.floor((start + end) / 2);\n    mergeSortHelper(arr, start, mid);\n    mergeSortHelper(arr, mid, end);\n    merge(arr, start, mid, end);\n  };\n  mergeSortHelper(array, 0, array.length);\n  const finalSortedIndices = Array.from({\n    length: array.length\n  }, (_, i) => i);\n  steps.push({\n    array: [...array],\n    highlight_indices: [],\n    action: \"Finished Merge Sort\",\n    sorted_indices: finalSortedIndices\n  });\n  return steps;\n};\nconst getQuickSortSteps = initialArray => {\n  const array = [...initialArray];\n  const steps = [];\n  const recordStep = (action, highlight_indices = [], pivot_index = null, sorted_indices = []) => {\n    steps.push({\n      array: [...array],\n      action: action,\n      highlight_indices: highlight_indices,\n      pivot_index: pivot_index,\n      sorted_indices: [...sorted_indices]\n    });\n  };\n  const partition = (arr, low, high, sortedIndices) => {\n    const pivot = arr[high];\n    let i = low - 1;\n    recordStep(`Selecting pivot ${pivot} at index ${high}`, [], high, sortedIndices);\n    for (let j = low; j <= high - 1; j++) {\n      recordStep(`Comparing ${arr[j]} at ${j} with pivot ${pivot}`, [j], high, sortedIndices);\n      if (arr[j] < pivot) {\n        i++;\n        [arr[i], arr[j]] = [arr[j], arr[i]];\n        recordStep(`Swapping ${arr[i]} at ${i} and ${arr[j]} at ${j}`, [i, j], high, sortedIndices);\n      }\n    }\n    const pivotIndex = i + 1;\n    [arr[pivotIndex], arr[high]] = [arr[high], arr[pivotIndex]];\n    recordStep(`Pivot ${pivot} placed correctly at index ${pivotIndex}`, [pivotIndex], null, [...sortedIndices, pivotIndex]);\n    return pivotIndex;\n  };\n  const sortedIndicesTracker = [];\n  const quickSortHelper = (arr, low, high) => {\n    if (low < high) {\n      const pi = partition(arr, low, high, sortedIndicesTracker);\n      if (!sortedIndicesTracker.includes(pi)) {\n        sortedIndicesTracker.push(pi);\n      }\n      quickSortHelper(arr, low, pi - 1);\n      quickSortHelper(arr, pi + 1, high);\n    } else if (low === high && low >= 0) {\n      if (!sortedIndicesTracker.includes(low)) {\n        sortedIndicesTracker.push(low);\n        recordStep(`Sub-array of size 1 at index ${low} is sorted.`, [], null, sortedIndicesTracker);\n      }\n    }\n  };\n  quickSortHelper(array, 0, array.length - 1);\n  const finalSortedIndices = Array.from({\n    length: array.length\n  }, (_, i) => i);\n  steps.push({\n    array: [...array],\n    action: \"Finished Quick Sort\",\n    highlight_indices: [],\n    pivot_index: null,\n    sorted_indices: finalSortedIndices\n  });\n  return steps;\n};\nconst getShellSortSteps = initialArray => {\n  const array = [...initialArray];\n  const steps = [];\n  const n = array.length;\n  let gap = Math.floor(n / 2);\n  let sortedIndices = [];\n  const recordStep = (action, highlight_indices = [], current_gap = gap, sorted_indices = []) => {\n    steps.push({\n      array: [...array],\n      action: action,\n      highlight_indices: highlight_indices,\n      gap: current_gap,\n      sorted_indices: [...sorted_indices]\n    });\n  };\n  while (gap > 0) {\n    recordStep(`Starting pass with Gap = ${gap}`, [], gap, sortedIndices);\n    for (let i = gap; i < n; i++) {\n      const temp = array[i];\n      let j = i;\n      recordStep(`Selecting element ${temp} at index ${i}. Gap = ${gap}`, [i], gap, sortedIndices);\n      while (j >= gap && array[j - gap] > temp) {\n        recordStep(`Comparing ${array[j - gap]} at ${j - gap} and ${temp} (to be placed at ${j}). Gap = ${gap}`, [j, j - gap], gap, sortedIndices);\n        array[j] = array[j - gap];\n        recordStep(`Shifting ${array[j - gap]} to ${j}. Gap = ${gap}`, [j], gap, sortedIndices);\n        j -= gap;\n      }\n      array[j] = temp;\n      recordStep(`Placing ${temp} at index ${j}. Gap = ${gap}`, [j], gap, sortedIndices);\n    }\n    gap = Math.floor(gap / 2);\n  }\n  const finalSortedIndices = Array.from({\n    length: n\n  }, (_, i) => i);\n  recordStep(\"Finished Shell Sort\", [], 0, finalSortedIndices);\n  return steps;\n};\nconst getSelectionSortSteps = initialArray => {\n  const array = [...initialArray];\n  const steps = [];\n  const n = array.length;\n  let sortedIndices = [];\n  const recordStep = (action, highlight_indices = [], min_index = null, sorted_indices = []) => {\n    steps.push({\n      array: [...array],\n      action: action,\n      highlight_indices: highlight_indices,\n      pivot_index: min_index,\n      sorted_indices: [...sorted_indices]\n    });\n  };\n  for (let i = 0; i < n - 1; i++) {\n    let minIndex = i;\n    recordStep(`Starting pass ${i + 1}. Assume minimum is ${array[i]} at index ${i}.`, [], minIndex, sortedIndices);\n    for (let j = i + 1; j < n; j++) {\n      recordStep(`Comparing ${array[j]} at ${j} with current minimum ${array[minIndex]} at ${minIndex}.`, [j], minIndex, sortedIndices);\n      if (array[j] < array[minIndex]) {\n        minIndex = j;\n        recordStep(`New minimum found: ${array[minIndex]} at index ${minIndex}.`, [j], minIndex, sortedIndices);\n      }\n    }\n    if (minIndex !== i) {\n      [array[i], array[minIndex]] = [array[minIndex], array[i]];\n      recordStep(`Swapping ${array[i]} (new smallest) with ${array[minIndex]} (current position) to place smallest element at ${i}.`, [i, minIndex], null, sortedIndices);\n    } else {\n      recordStep(`Element at ${i} is already the smallest in the unsorted portion.`, [], null, sortedIndices);\n    }\n    sortedIndices.push(i);\n    recordStep(`Position ${i} is finalized (Sorted).`, [], null, sortedIndices);\n  }\n  if (n > 0 && !sortedIndices.includes(n - 1)) {\n    sortedIndices.push(n - 1);\n  }\n  const finalSortedIndices = Array.from({\n    length: n\n  }, (_, k) => k);\n  recordStep(\"Finished Selection Sort\", [], null, finalSortedIndices);\n  return steps;\n};\nconst getBinarySearchSteps = (arr, target) => {\n  const steps = [];\n  const array = [...arr];\n  steps.push({\n    array: [...array],\n    action: `Search started for target ${target}. Array must be sorted.`,\n    low: 0,\n    high: array.length - 1,\n    mid: -1,\n    found: false,\n    search_target: target,\n    highlight_indices: [],\n    isSearch: true\n  });\n  let low = 0;\n  let high = array.length - 1;\n  let found = false;\n  let mid = -1;\n  while (low <= high) {\n    mid = Math.floor((low + high) / 2);\n    steps.push({\n      array: [...array],\n      action: `Checking mid element at index ${mid}: Value is ${array[mid]}`,\n      low: low,\n      high: high,\n      mid: mid,\n      found: false,\n      search_target: target,\n      highlight_indices: [mid],\n      isSearch: true\n    });\n    if (array[mid] === target) {\n      found = true;\n      break;\n    } else if (array[mid] < target) {\n      low = mid + 1;\n      steps.push({\n        array: [...array],\n        action: `Target (${target}) is greater than ${array[mid]}. Searching right half (New Low: ${low}).`,\n        low: low,\n        high: high,\n        mid: mid,\n        found: false,\n        search_target: target,\n        highlight_indices: [],\n        isSearch: true\n      });\n    } else {\n      high = mid - 1;\n      steps.push({\n        array: [...array],\n        action: `Target (${target}) is less than ${array[mid]}. Searching left half (New High: ${high}).`,\n        low: low,\n        high: high,\n        mid: mid,\n        found: false,\n        search_target: target,\n        highlight_indices: [],\n        isSearch: true\n      });\n    }\n  }\n  if (found) {\n    steps.push({\n      array: [...array],\n      action: `SUCCESS! Target ${target} found at index ${mid}. Search complete.`,\n      low: low,\n      high: high,\n      mid: mid,\n      found: true,\n      search_target: target,\n      highlight_indices: [mid],\n      isSearch: true\n    });\n  } else {\n    steps.push({\n      array: [...array],\n      action: `FAILURE! Target ${target} not found. Low (${low}) > High (${high}).`,\n      low: low,\n      high: high,\n      mid: -1,\n      found: false,\n      search_target: target,\n      highlight_indices: [],\n      isSearch: true\n    });\n  }\n  return steps;\n};\nconst getLinearSearchSteps = (arr, target) => {\n  const steps = [];\n  const array = [...arr];\n  const n = array.length;\n  let found = false;\n  let foundIndex = -1;\n  steps.push({\n    array: [...array],\n    action: `Linear Search started for target ${target}.`,\n    current_index: -1,\n    found: false,\n    search_target: target,\n    highlight_indices: [],\n    isLinearSearch: true\n  });\n  for (let i = 0; i < n; i++) {\n    steps.push({\n      array: [...array],\n      action: `Comparing element at index ${i}: Value is ${array[i]}`,\n      current_index: i,\n      found: false,\n      search_target: target,\n      highlight_indices: [i],\n      isLinearSearch: true\n    });\n    if (array[i] === target) {\n      found = true;\n      foundIndex = i;\n      break;\n    }\n    steps.push({\n      array: [...array],\n      action: `Value ${array[i]} does not match ${target}. Moving to next index.`,\n      current_index: i,\n      found: false,\n      search_target: target,\n      highlight_indices: [],\n      isLinearSearch: true\n    });\n  }\n  if (found) {\n    steps.push({\n      array: [...array],\n      action: `SUCCESS! Target ${target} found at index ${foundIndex}. Search complete.`,\n      current_index: foundIndex,\n      found: true,\n      search_target: target,\n      highlight_indices: [foundIndex],\n      isLinearSearch: true\n    });\n  } else {\n    steps.push({\n      array: [...array],\n      action: `FAILURE! Target ${target} not found after checking all elements. Search complete.`,\n      current_index: n - 1,\n      found: false,\n      search_target: target,\n      highlight_indices: [],\n      isLinearSearch: true\n    });\n  }\n  return steps;\n};\n\n// --- Main App Component ---\nexport default function App() {\n  _s();\n  const [currentView, setCurrentView] = useState('sort');\n\n  // Sorting/Searching Visualizer States\n  const [steps, setSteps] = useState(null);\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [selectedAlgorithm, setSelectedAlgorithm] = useState(\"binarysearch\");\n  const [loadingError, setLoadingError] = useState(null);\n  const [inputArray, setInputArray] = useState(() => generateRandomArray(DEFAULT_ARRAY_SIZE));\n  const [arraySize, setArraySize] = useState(DEFAULT_ARRAY_SIZE);\n  const [customInputData, setCustomInputData] = useState(\"\");\n  const [speed, setSpeed] = useState(ANIMATION_SPEED_MS);\n\n  // State for Search Algorithms\n  const [searchTarget, setSearchTarget] = useState(50);\n\n  // Animation State\n  const [isAnimating, setIsAnimating] = useState(false);\n  const animationRef = useRef(null);\n\n  // Derived States\n  const currentStep = steps ? steps[currentStepIndex] : null;\n  const currentArray = currentStep ? currentStep.array : inputArray;\n  const highlightIndices = currentStep ? currentStep.highlight_indices : [];\n  const pivotIndex = currentStep ? currentStep.pivot_index : null;\n  const sortedIndices = currentStep ? currentStep.sorted_indices || [] : [];\n  const isSortingComplete = steps && currentStepIndex >= steps.length - 1;\n  const currentPseudocode = PSEUDOCODE[selectedAlgorithm];\n  const isSearchAlgorithm = selectedAlgorithm === 'binarysearch' || selectedAlgorithm === 'linearsearch';\n  const isSupportedAlgorithm = [\"bubblesort\", \"mergesort\", \"quicksort\", \"shellsort\", \"selectionsort\", \"binarysearch\", \"linearsearch\"].includes(selectedAlgorithm);\n\n  // Calculate bar width based on container width and number of elements\n  const barWidth = currentArray.length > 0 ? Math.max(10, 800 / currentArray.length - 2) : 20; // Max 800px width for visualization container\n\n  // --- Handlers ---\n  const handleGenerateNewArray = (size = arraySize) => {\n    if (isAnimating) handleStartStopAnimation();\n    const newArray = generateRandomArray(size);\n    setInputArray(newArray);\n    setCustomInputData(\"\");\n    setArraySize(size);\n    if (isSearchAlgorithm && newArray.length > 0) {\n      // Set a random element from the new array as the target\n      setSearchTarget(newArray[Math.floor(Math.random() * newArray.length)]);\n    } else {\n      setSearchTarget(50);\n    }\n  };\n  const handleLoadCustomArray = () => {\n    if (isAnimating) handleStartStopAnimation();\n    const newArray = parseCustomArray(customInputData);\n    if (newArray.length > 0 && newArray.length <= 50) {\n      setInputArray(newArray);\n      setArraySize(newArray.length);\n      setLoadingError(null);\n      if (isSearchAlgorithm && newArray.length > 0) {\n        setSearchTarget(newArray[Math.floor(Math.random() * newArray.length)]);\n      } else {\n        setSearchTarget(50);\n      }\n    } else if (newArray.length > 50) {\n      setLoadingError(\"Maximum array size for custom input is 50 elements.\");\n    } else {\n      setLoadingError(\"Invalid or empty custom array input. Please use comma-separated integers (e.g., 5,12,3,40).\");\n    }\n  };\n  const handleSearchClick = () => {\n    // Re-trigger useEffect for search logic\n    const currentTarget = Number(searchTarget);\n    setSearchTarget(currentTarget);\n    if (isAnimating) handleStartStopAnimation();\n    setCurrentStepIndex(0);\n    // Note: The main logic runs in useEffect below\n  };\n\n  // --- Animation Control Logic ---\n\n  // Function to handle the step-by-step animation\n  const animate = useCallback(() => {\n    setCurrentStepIndex(prevIndex => {\n      if (!steps || prevIndex >= steps.length - 1) {\n        setIsAnimating(false);\n        return prevIndex;\n      }\n      const nextStepIndex = prevIndex + 1;\n      animationRef.current = setTimeout(() => {\n        animate();\n      }, speed);\n      return nextStepIndex;\n    });\n  }, [steps, speed]);\n\n  // Start/Stop Animation handler\n  const handleStartStopAnimation = useCallback(() => {\n    if (isAnimating) {\n      if (animationRef.current) {\n        clearTimeout(animationRef.current);\n      }\n      setIsAnimating(false);\n    } else {\n      if (isSortingComplete) {\n        setCurrentStepIndex(0);\n      }\n      setIsAnimating(true);\n    }\n  }, [isAnimating, isSortingComplete]);\n\n  // Effect to control the animation loop start/stop\n  useEffect(() => {\n    if (isAnimating) {\n      animate();\n    } else if (animationRef.current) {\n      clearTimeout(animationRef.current);\n    }\n\n    // Cleanup function\n    return () => {\n      if (animationRef.current) {\n        clearTimeout(animationRef.current);\n      }\n    };\n  }, [isAnimating, animate]);\n\n  // Effect to recalculate steps whenever the array, algorithm, or target changes\n  useEffect(() => {\n    if (isAnimating) {\n      handleStartStopAnimation();\n    }\n\n    // Don't reset steps immediately - keep them until new ones are ready\n    setCurrentStepIndex(0);\n    setLoadingError(null);\n    if (!inputArray || inputArray.length === 0) {\n      setLoadingError(\"The array is empty. Please generate or enter an array.\");\n      setSteps(null);\n      return;\n    }\n\n    // Logic for search algorithms requiring sorting\n    let arrayToSort = [...inputArray];\n    if (selectedAlgorithm === 'binarysearch') {\n      // Binary search MUST have a sorted array\n      const isAlreadySorted = arrayToSort.every((val, i, arr) => i === 0 || val >= arr[i - 1]);\n      if (!isAlreadySorted) {\n        // Sort it internally for Binary Search demonstration\n        arrayToSort.sort((a, b) => a - b);\n        // Only update if the sorted array is different to avoid infinite loops\n        const arraysEqual = arrayToSort.length === inputArray.length && arrayToSort.every((val, i) => val === inputArray[i]);\n        if (!arraysEqual) {\n          setInputArray(arrayToSort);\n        }\n        setLoadingError(\"Binary Search requires a sorted array. The array has been sorted automatically.\");\n      }\n    } else if (selectedAlgorithm === 'linearsearch') {\n      // Linear search uses the original array\n      arrayToSort = [...inputArray];\n    }\n    try {\n      let newSteps = [];\n      switch (selectedAlgorithm) {\n        case 'bubblesort':\n          newSteps = getBubbleSortSteps(arrayToSort);\n          break;\n        case 'mergesort':\n          newSteps = getMergeSortSteps(arrayToSort);\n          break;\n        case 'quicksort':\n          newSteps = getQuickSortSteps(arrayToSort);\n          break;\n        case 'shellsort':\n          newSteps = getShellSortSteps(arrayToSort);\n          break;\n        case 'selectionsort':\n          newSteps = getSelectionSortSteps(arrayToSort);\n          break;\n        case 'binarysearch':\n          newSteps = getBinarySearchSteps(arrayToSort, searchTarget);\n          break;\n        case 'linearsearch':\n          newSteps = getLinearSearchSteps(arrayToSort, searchTarget);\n          break;\n        default:\n          setLoadingError(`Algorithm \"${selectedAlgorithm}\" is not supported.`);\n          return;\n      }\n      setSteps(newSteps);\n    } catch (e) {\n      console.error(\"Error generating steps:\", e);\n      setLoadingError(\"An error occurred while running the algorithm.\");\n    }\n  }, [selectedAlgorithm, inputArray, searchTarget]);\n  const handleStepControl = action => {\n    if (isAnimating) handleStartStopAnimation();\n    switch (action) {\n      case 'start':\n        setCurrentStepIndex(0);\n        break;\n      case 'back':\n        setCurrentStepIndex(prev => Math.max(0, prev - 1));\n        break;\n      case 'forward':\n        setCurrentStepIndex(prev => steps ? Math.min(steps.length - 1, prev + 1) : 0);\n        break;\n      case 'end':\n        setCurrentStepIndex(steps ? steps.length - 1 : 0);\n        break;\n      default:\n        break;\n    }\n  };\n\n  // --- Render Functions ---\n\n  const renderArrayVisualizer = () => {\n    // Determine the array to display - always fall back to inputArray if currentArray is empty\n    const displayArray = currentArray && currentArray.length > 0 ? currentArray : inputArray;\n\n    // Determine Binary Search status for ArrayBar coloring\n    const isBinarySearch = selectedAlgorithm === 'binarysearch';\n    const currentLow = currentStep ? currentStep.low : null;\n    const currentHigh = currentStep ? currentStep.high : null;\n\n    // Check if the current step is the final step where search is complete\n    const isSearchFinalized = isSearchAlgorithm && currentStep && (currentStep.found || steps && currentStepIndex === steps.length - 1);\n\n    // Calculate scaling for bar heights\n    const containerHeight = 450;\n    const maxValue = displayArray.length > 0 ? Math.max(...displayArray) : MAX_ARRAY_VALUE;\n    const minValue = displayArray.length > 0 ? Math.min(...displayArray) : MIN_ARRAY_VALUE;\n    const valueRange = maxValue - minValue || 1; // Avoid division by zero\n    const scaleFactor = (containerHeight - 40) / (maxValue || 1); // Leave 40px padding at top\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold mb-4 text-gray-700\",\n        children: isSearchAlgorithm ? `Array Visualization (Target: ${searchTarget})` : `Array Visualization`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 941,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center items-end h-[450px] w-full max-w-4xl border-2 border-gray-200 bg-gray-50 rounded-lg p-2 shadow-inner\",\n        children: displayArray.length > 0 ? displayArray.map((value, i) => {\n          // Scale the height to fit within the container\n          const scaledHeight = Math.max(20, value * scaleFactor); // Minimum 20px height\n          return /*#__PURE__*/_jsxDEV(ArrayBar, {\n            value: value,\n            height: scaledHeight,\n            width: barWidth\n\n            // Sorting Props\n            ,\n            isHighlighted: highlightIndices.includes(i),\n            isPivot: pivotIndex === i,\n            isSorted: sortedIndices.includes(i) || isSortingComplete || isSearchFinalized\n\n            // Search Props\n            ,\n            isSearchMid: currentStep ? currentStep.mid === i : false,\n            isSearchRange: isBinarySearch && i >= (currentLow !== null ? currentLow : 0) &&\n            // Handles start step where low is defined\n            i <= (currentHigh !== null ? currentHigh : -1) // Handles start step where high is defined\n            ,\n            isFound: currentStep ? currentStep.found && (currentStep.mid === i || currentStep.current_index === i) : false,\n            isLinearCheck: selectedAlgorithm === 'linearsearch' && currentStep && currentStep.current_index === i && !currentStep.found,\n            isBinarySearchMode: isBinarySearch // NEW PROP: Pass down the current algorithm mode\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 955,\n            columnNumber: 29\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 italic mt-40\",\n          children: \"No array data available. Generate a new array to begin.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 980,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 949,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 w-full max-w-4xl text-center\",\n        children: [currentStep && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg font-medium text-gray-800 p-2 bg-yellow-100 border border-yellow-300 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold mr-2\",\n            children: [\"Step \", currentStepIndex + 1, \"/\", steps.length, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 987,\n            columnNumber: 25\n          }, this), currentStep.action]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 986,\n          columnNumber: 21\n        }, this), loadingError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-600 font-semibold p-2 mt-2 bg-red-100 border border-red-300 rounded-lg\",\n          children: loadingError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 992,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 984,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 940,\n      columnNumber: 9\n    }, this);\n  };\n  const renderControls = () => {\n    const isAlgorithmSelected = isSupportedAlgorithm;\n    const isReadyToStart = steps && !loadingError;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-100 p-4 rounded-xl shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold text-gray-800 mb-3 border-b pb-2\",\n          children: \"Algorithm & Data Setup\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1008,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-2 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"algorithm-select\",\n            className: \"font-medium text-sm text-gray-700\",\n            children: \"Select Algorithm:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1012,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"algorithm-select\",\n            value: selectedAlgorithm,\n            onChange: e => {\n              setSelectedAlgorithm(e.target.value);\n              setCurrentView('sort'); // Switch back to sort view if changing alg\n            },\n            className: \"p-2 border border-gray-300 rounded-lg bg-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"bubblesort\",\n              children: \"Bubble Sort\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1022,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"selectionsort\",\n              children: \"Selection Sort\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1023,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"mergesort\",\n              children: \"Merge Sort\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1024,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"quicksort\",\n              children: \"Quick Sort\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1025,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"shellsort\",\n              children: \"Shell Sort\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1026,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              disabled: true,\n              children: \"--- Search Algorithms ---\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1027,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"linearsearch\",\n              children: \"Linear Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1028,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"binarysearch\",\n              children: \"Binary Search (Requires Sorted Array)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1029,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1013,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1011,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-2 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"array-size\",\n            className: \"font-medium text-sm text-gray-700\",\n            children: [\"Array Size (\", arraySize, \"):\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1035,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"array-size\",\n            type: \"range\",\n            min: \"5\",\n            max: \"50\",\n            value: arraySize,\n            onChange: e => setArraySize(Number(e.target.value)),\n            className: \"w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1036,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleGenerateNewArray(),\n            className: \"w-full px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 transition\",\n            children: \"Generate Random Array\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1045,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1034,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-2 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"custom-input\",\n            className: \"font-medium text-sm text-gray-700\",\n            children: \"Custom Array (e.g., 5,12,3,40):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1055,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"custom-input\",\n            type: \"text\",\n            value: customInputData,\n            onChange: e => setCustomInputData(e.target.value),\n            placeholder: \"Comma-separated integers\",\n            className: \"p-2 border border-gray-300 rounded-lg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1056,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLoadCustomArray,\n            className: \"w-full px-4 py-2 bg-teal-500 text-white font-semibold rounded-lg shadow-md hover:bg-teal-600 transition\",\n            children: \"Load Custom Array\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1064,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1054,\n          columnNumber: 17\n        }, this), isSearchAlgorithm && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-2 mb-4 p-3 bg-white border border-yellow-300 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"search-target\",\n            className: \"font-medium text-sm text-gray-700\",\n            children: \"Search Target:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1075,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"search-target\",\n              type: \"number\",\n              value: searchTarget,\n              onChange: e => setSearchTarget(Number(e.target.value)),\n              placeholder: \"Target value\",\n              className: \"flex-grow p-2 border border-gray-300 rounded-lg\",\n              min: MIN_ARRAY_VALUE,\n              max: MAX_ARRAY_VALUE\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1077,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSearchClick,\n              className: \"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition\",\n              children: \"Start Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1087,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1076,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1074,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"speed-range\",\n            className: \"font-medium text-sm text-gray-700\",\n            children: [\"Speed (Delay: \", speed, \"ms):\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1099,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"speed-range\",\n            type: \"range\",\n            min: \"10\",\n            max: \"500\",\n            value: speed,\n            onChange: e => setSpeed(Number(e.target.value)),\n            className: \"w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1100,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1098,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1007,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-100 p-4 rounded-xl shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold text-gray-800 mb-3 border-b pb-2\",\n          children: \"Animation Controls\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1114,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between space-x-2 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleStartStopAnimation(),\n            className: `flex-grow px-4 py-3 text-white font-bold rounded-lg shadow-lg transition disabled:opacity-50 ${isAnimating ? 'bg-orange-500 hover:bg-orange-600' : 'bg-green-500 hover:bg-green-600'}`,\n            disabled: !isAlgorithmSelected || !isReadyToStart,\n            children: isAnimating ? 'Pause' : currentStepIndex > 0 && !isSortingComplete ? 'Resume' : 'Start/Run'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1116,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleStepControl('start'),\n            className: \"p-3 bg-gray-300 rounded-lg hover:bg-gray-400 transition disabled:opacity-50\",\n            disabled: !isAlgorithmSelected || !isReadyToStart || currentStepIndex === 0 || isAnimating,\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-5 h-5\",\n              fill: \"currentColor\",\n              viewBox: \"0 0 20 20\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8 9a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm3 0v4a1 1 0 11-2 0V9a1 1 0 112 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1128,\n                columnNumber: 90\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1128,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1123,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1115,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleStepControl('back'),\n            className: \"px-4 py-2 bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition disabled:opacity-50\",\n            disabled: !isAlgorithmSelected || !isReadyToStart || currentStepIndex === 0 || isAnimating,\n            children: \"\\u2190 Prev Step\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1132,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleStepControl('forward'),\n            className: \"px-4 py-2 bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition disabled:opacity-50\",\n            disabled: !isAlgorithmSelected || !isReadyToStart || isSortingComplete || isAnimating,\n            children: \"Next Step \\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1139,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleStepControl('end'),\n            className: \"p-3 bg-gray-300 rounded-lg hover:bg-gray-400 transition disabled:opacity-50\",\n            disabled: !isAlgorithmSelected || !isReadyToStart || isSortingComplete || isAnimating,\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-5 h-5\",\n              fill: \"currentColor\",\n              viewBox: \"0 0 20 20\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm-1-9a1 1 0 011-1h2a1 1 0 110 2H10a1 1 0 01-1-1zm3 0v4a1 1 0 11-2 0V9a1 1 0 112 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1151,\n                columnNumber: 90\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1151,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1146,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1131,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1113,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-100 p-4 rounded-xl shadow-md font-mono text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold text-gray-800 mb-3 border-b pb-2\",\n          children: \"Pseudocode\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1158,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-48 overflow-y-auto bg-white p-2 rounded-lg border border-gray-200\",\n          children: currentPseudocode.map((line, index) => /*#__PURE__*/_jsxDEV(\"pre\", {\n            className: `whitespace-pre-wrap ${currentStep && currentStep.code_line === index + 1 ? 'bg-yellow-200 font-bold' : 'text-gray-700'}`,\n            children: line\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1161,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1159,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1157,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1005,\n      columnNumber: 9\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 p-4 sm:p-8 font-['Inter']\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"text-center mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-4xl font-extrabold text-blue-600 mb-2\",\n        children: \"Algorithm Visualizer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1180,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg text-gray-600\",\n        children: \"Visualize Sorting, Searching, and BST operations.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1181,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1179,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentView('sort'),\n        className: `px-6 py-2 rounded-l-full font-semibold transition ${currentView === 'sort' ? 'bg-blue-600 text-white shadow-lg' : 'bg-white text-gray-700 border border-blue-600'}`,\n        children: \"Array Algorithms (Sort/Search)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1186,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentView('bst'),\n        className: `px-6 py-2 rounded-r-full font-semibold transition ${currentView === 'bst' ? 'bg-blue-600 text-white shadow-lg' : 'bg-white text-gray-700 border border-blue-600'}`,\n        children: \"Binary Search Tree\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1192,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1185,\n      columnNumber: 9\n    }, this), currentView === 'sort' ? /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex flex-col lg:flex-row gap-8 max-w-7xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:w-1/3\",\n        children: renderControls()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1203,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:w-2/3 bg-white p-6 rounded-xl shadow-2xl\",\n        children: renderArrayVisualizer()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1208,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1201,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-4xl mx-auto\",\n      children: /*#__PURE__*/_jsxDEV(BSTVisualizer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1214,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1213,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1178,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"R1QOLiV8WMayHS/QH93UNQbiovc=\");\n_c3 = App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ArrayBar$React.memo\");\n$RefreshReg$(_c2, \"ArrayBar\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","BSTVisualizer","jsxDEV","_jsxDEV","ArrayBar","memo","_c","value","height","width","isHighlighted","isPivot","isSorted","isSearchMid","isSearchRange","isFound","isLinearCheck","isBinarySearchMode","color","opacity","finalWidth","className","style","margin","fontSize","title","children","fileName","_jsxFileName","lineNumber","columnNumber","_c2","DEFAULT_ARRAY_SIZE","MAX_ARRAY_VALUE","MIN_ARRAY_VALUE","ANIMATION_SPEED_MS","PSEUDOCODE","bubblesort","mergesort","quicksort","shellsort","selectionsort","binarysearch","linearsearch","generateRandomArray","size","Array","from","length","Math","floor","random","parseCustomArray","inputString","elements","split","map","s","num","parseInt","trim","isNaN","min","filter","n","getBubbleSortSteps","initialArray","array","steps","sortedIndices","i","swapped","j","push","highlight_indices","action","sorted_indices","k","includes","finalSortedIndices","_","getMergeSortSteps","merge","arr","start","mid","end","left","slice","right","idx","mergeSortHelper","getQuickSortSteps","recordStep","pivot_index","partition","low","high","pivot","pivotIndex","sortedIndicesTracker","quickSortHelper","pi","getShellSortSteps","gap","current_gap","temp","getSelectionSortSteps","min_index","minIndex","getBinarySearchSteps","target","found","search_target","isSearch","getLinearSearchSteps","foundIndex","current_index","isLinearSearch","App","_s","currentView","setCurrentView","setSteps","currentStepIndex","setCurrentStepIndex","selectedAlgorithm","setSelectedAlgorithm","loadingError","setLoadingError","inputArray","setInputArray","arraySize","setArraySize","customInputData","setCustomInputData","speed","setSpeed","searchTarget","setSearchTarget","isAnimating","setIsAnimating","animationRef","currentStep","currentArray","highlightIndices","isSortingComplete","currentPseudocode","isSearchAlgorithm","isSupportedAlgorithm","barWidth","max","handleGenerateNewArray","handleStartStopAnimation","newArray","handleLoadCustomArray","handleSearchClick","currentTarget","Number","animate","prevIndex","nextStepIndex","current","setTimeout","clearTimeout","arrayToSort","isAlreadySorted","every","val","sort","a","b","arraysEqual","newSteps","e","console","error","handleStepControl","prev","renderArrayVisualizer","displayArray","isBinarySearch","currentLow","currentHigh","isSearchFinalized","containerHeight","maxValue","minValue","valueRange","scaleFactor","scaledHeight","renderControls","isAlgorithmSelected","isReadyToStart","htmlFor","id","onChange","disabled","type","onClick","placeholder","fill","viewBox","d","line","index","code_line","_c3","$RefreshReg$"],"sources":["/Users/shubhamjana/Desktop/algo-visualizer/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport BSTVisualizer from './components/BSTVisualizer';\n\n// --- Components ---\n\n/**\n * ArrayBar Component: Displays a single element in the array visualization.\n * It handles color coding based on the algorithm state.\n */\nconst ArrayBar = React.memo(({ value, height, width, isHighlighted, isPivot, isSorted, isSearchMid, isSearchRange, isFound, isLinearCheck, isBinarySearchMode }) => {\n    \n    // Default color is Blue\n    let color = 'bg-blue-500'; \n    let opacity = 'opacity-100';\n\n    // --- Search Mode Logic ---\n    if (isFound) {\n        // Found element (Both Search Algorithms) takes highest priority\n        color = 'bg-emerald-500'; // Emerald/Found\n    } else if (isLinearCheck) {\n        // Linear Search Specific Color for current comparison\n        color = 'bg-red-500'; // Red for comparison check\n    } else if (isSearchMid) {\n        // Mid element (Binary Search)\n        color = 'bg-amber-500'; // Amber/Mid\n    } else if (isSearchRange) {\n        // Elements in the current search range (Binary Search)\n        color = 'bg-blue-400'; \n    } else if (isBinarySearchMode) { \n        // FIX: Only apply the excluded style if we are explicitly in Binary Search mode\n        // Excluded elements during Binary Search\n        opacity = 'opacity-30';\n        color = 'bg-gray-400';\n    }\n    \n    // --- Sorting Mode Logic (Applied if not in active search highlight) ---\n    // These only apply if the search flags above were false.\n    if (!isBinarySearchMode && !isLinearCheck) {\n        if (isSorted) {\n            color = 'bg-green-500';\n            opacity = 'opacity-100';\n        } else if (isPivot) {\n            color = 'bg-purple-600'; // Purple for Pivot/MinIndex\n        } else if (isHighlighted) {\n            color = 'bg-orange-500'; // Orange for comparison/swap\n        }\n    }\n\n    const finalWidth = width > 0 ? `${width}px` : 'auto';\n\n    return (\n        <div \n            className={`transition-all duration-100 ease-linear rounded-t-sm shadow-md flex items-end justify-center text-white font-bold relative ${color} ${opacity}`}\n            style={{\n                height: `${height}px`,\n                width: finalWidth,\n                margin: '0 1px',\n                fontSize: width > 20 ? '10px' : '8px',\n            }}\n            title={`Value: ${value}`}\n        >\n            {/* Show value for bars wide enough */}\n            {width > 20 && value}\n        </div>\n    );\n});\n\n// --- Constants ---\nconst DEFAULT_ARRAY_SIZE = 15;\nconst MAX_ARRAY_VALUE = 400; \nconst MIN_ARRAY_VALUE = 10;\nconst ANIMATION_SPEED_MS = 80; \n\n// --- Algorithm Pseudocode ---\nconst PSEUDOCODE = {\n    bubblesort: [\n        \"function bubbleSort(array):\",\n        \"  n = array.length\",\n        \"  for i from 0 to n - 2:\",\n        \"    for j from 0 to n - 2 - i:\",\n        \"      // Compare & Highlight array[j] and array[j+1]\",\n        \"      if array[j] > array[j+1]:\",\n        \"        // Swap elements\",\n        \"        swap(array[j], array[j+1])\",\n        \"  return array\"\n    ],\n    mergesort: [\n        \"function mergeSort(array):\",\n        \"  if array.length <= 1: return array\",\n        \"  mid = floor(array.length / 2)\",\n        \"  left = mergeSort(array[0...mid])\",\n        \"  right = mergeSort(array[mid...n])\",\n        \"  return merge(left, right)\",\n        \"\",\n        \"function merge(left, right):\",\n        \"  // Merging sub-arrays and placing back into the original array...\",\n        \"  result = []\",\n        \"  while left & right are not empty:\",\n        \"    if left[0] <= right[0]:\",\n        \"      result.push(left.shift())\",\n        \"    else:\",\n        \"      result.push(right.shift())\",\n        \"  return result + left + right\"\n    ],\n    quicksort: [\n        \"function quickSort(array, low, high):\",\n        \"  if low < high:\",\n        \"    // Partition the array\",\n        \"    pi = partition(array, low, high)\",\n        \"    // Recursively sort left and right sub-arrays\",\n        \"    quickSort(array, low, pi - 1)\",\n        \"    quickSort(array, pi + 1, high)\",\n        \"\",\n        \"function partition(array, low, high):\",\n        \"  pivot = array[high] // Choose the last element as pivot\",\n        \"  i = low - 1\",\n        \"  for j from low to high - 1:\",\n        \"    if array[j] < pivot:\",\n        \"      i++\",\n        \"      swap(array[i], array[j])\",\n        \"  swap(array[i+1], array[high])\",\n        \"  return i + 1\"\n    ],\n    shellsort: [\n        \"function shellSort(array):\",\n        \"  n = array.length\",\n        \"  gap = floor(n / 2)\",\n        \"  while gap > 0:\",\n        \"    // Perform gapped insertion sort\",\n        \"    for i from gap to n - 1:\",\n        \"      temp = array[i]\",\n        \"      j = i\",\n        \"      while j >= gap and array[j - gap] > temp:\",\n        \"        // Shift elements (Highlight comparison and shift)\",\n        \"        array[j] = array[j - gap]\",\n        \"        j = j - gap\",\n        \"      // Place temp (Highlight placement)\",\n        \"      array[j] = temp\",\n        \"    gap = floor(gap / 2) // Reduce the gap\"\n    ],\n    selectionsort: [\n        \"function selectionSort(array):\",\n        \"  n = array.length\",\n        \"  for i from 0 to n - 2:\",\n        \"    // Assume current position i holds the minimum\",\n        \"    minIndex = i\",\n        \"    for j from i + 1 to n - 1:\",\n        \"      // Highlight comparison between array[j] and array[minIndex]\",\n        \"      if array[j] < array[minIndex]:\",\n        \"        // Update the index of the minimum element\",\n        \"        minIndex = j\",\n        \"    // If a smaller element was found, swap it into position i\",\n        \"    if minIndex is not i:\",\n        \"      swap(array[i], array[minIndex])\",\n        \"    // Position i is finalized\",\n        \"  return array\"\n    ],\n    binarysearch: [\n        \"function binarySearch(array, target):\",\n        \"  // Array MUST be sorted\",\n        \"  low = 0\",\n        \"  high = array.length - 1\",\n        \"  while low <= high:\",\n        \"    mid = floor((low + high) / 2)\",\n        \"    // Highlight mid element (array[mid])\",\n        \"    if array[mid] == target:\",\n        \"      return mid\",\n        \"    else if array[mid] < target:\",\n        \"      // Search right (New Low = mid + 1)\",\n        \"      low = mid + 1\",\n        \"    else:\",\n        \"      // Search left (New High = mid - 1)\",\n        \"      high = mid - 1\",\n        \"  return -1\"\n    ],\n    linearsearch: [\n        \"function linearSearch(array, target):\",\n        \"  n = array.length\",\n        \"  for i from 0 to n - 1:\",\n        \"    // Highlight array[i]\",\n        \"    if array[i] == target:\",\n        \"      return i\",\n        \"  return -1\"\n    ]\n};\n\n// --- Helper Functions ---\n\nconst generateRandomArray = (size) => {\n    return Array.from({ length: size }, () => \n        Math.floor(Math.random() * (MAX_ARRAY_VALUE - MIN_ARRAY_VALUE + 1)) + MIN_ARRAY_VALUE\n    );\n};\n\nconst parseCustomArray = (inputString) => {\n    const elements = inputString.split(',')\n        .map(s => {\n            const num = parseInt(s.trim());\n            return isNaN(num) || num <= 0 ? null : Math.min(num, MAX_ARRAY_VALUE);\n        })\n        .filter(n => n !== null);\n    return elements;\n};\n\n// --- CLIENT-SIDE ALGORITHM LOGIC (Generators for visualization steps) ---\nconst getBubbleSortSteps = (initialArray) => { \n    const array = [...initialArray];\n    const steps = [];\n    const n = array.length;\n    let sortedIndices = [];\n\n    for (let i = 0; i < n - 1; i++) {\n        let swapped = false;\n        for (let j = 0; j < n - 1 - i; j++) {\n            steps.push({\n                array: [...array], \n                highlight_indices: [j, j + 1], \n                action: `Comparing array[${j}] and array[${j + 1}]`,\n                sorted_indices: [...sortedIndices]\n            });\n\n            if (array[j] > array[j + 1]) {\n                [array[j], array[j + 1]] = [array[j + 1], array[j]];\n                swapped = true;\n                steps.push({\n                    array: [...array], \n                    highlight_indices: [j, j + 1], \n                    action: `Swapping ${array[j+1]} and ${array[j]}`, \n                    sorted_indices: [...sortedIndices]\n                });\n            }\n        }\n        \n        if (n - 1 - i >= 0) {\n            sortedIndices.push(n - 1 - i);\n        }\n\n        if (!swapped) {\n            // Mark the rest as sorted if no swap occurred\n            for (let k = 0; k < n - 1 - i; k++) {\n                if (!sortedIndices.includes(k)) {\n                     sortedIndices.push(k);\n                }\n            }\n            break;\n        }\n    }\n\n    const finalSortedIndices = Array.from({ length: n }, (_, i) => i);\n    steps.push({\n        array: [...array], \n        highlight_indices: [], \n        action: \"Finished Bubble Sort\",\n        sorted_indices: finalSortedIndices\n    });\n\n    return steps;\n};\n\nconst getMergeSortSteps = (initialArray) => { \n    const array = [...initialArray];\n    const steps = [];\n    \n    const merge = (arr, start, mid, end) => {\n        const left = arr.slice(start, mid);\n        const right = arr.slice(mid, end);\n        let i = 0, j = 0, k = start;\n\n        steps.push({\n            array: [...array],\n            highlight_indices: Array.from({ length: end - start }, (_, idx) => start + idx),\n            action: `Merging sub-arrays from index ${start} to ${end - 1}`,\n            sorted_indices: []\n        });\n\n        while (i < left.length && j < right.length) {\n            if (left[i] <= right[j]) {\n                array[k] = left[i];\n                i++;\n            } else {\n                array[k] = right[j];\n                j++;\n            }\n            k++;\n            \n            steps.push({\n                array: [...array],\n                highlight_indices: [k - 1], \n                action: `Placing element at index ${k - 1}`,\n                sorted_indices: []\n            });\n        }\n\n        while (i < left.length) {\n            array[k] = left[i];\n            i++; k++;\n            steps.push({\n                array: [...array],\n                highlight_indices: [k - 1],\n                action: `Placing remaining element from left half at ${k - 1}`,\n                sorted_indices: []\n            });\n        }\n        while (j < right.length) {\n            array[k] = right[j];\n            j++; k++;\n            steps.push({\n                array: [...array],\n                highlight_indices: [k - 1],\n                action: `Placing remaining element from right half at ${k - 1}`,\n                sorted_indices: []\n            });\n        }\n        \n        steps.push({\n            array: [...array],\n            highlight_indices: [],\n            action: `Merged segment complete from index ${start} to ${end - 1}`,\n            sorted_indices: [] \n        });\n    };\n\n    const mergeSortHelper = (arr, start, end) => {\n        if (end - start <= 1) return;\n        \n        const mid = Math.floor((start + end) / 2);\n        mergeSortHelper(arr, start, mid);\n        mergeSortHelper(arr, mid, end);\n        merge(arr, start, mid, end);\n    };\n\n    mergeSortHelper(array, 0, array.length);\n\n    const finalSortedIndices = Array.from({ length: array.length }, (_, i) => i);\n    steps.push({\n        array: [...array], \n        highlight_indices: [], \n        action: \"Finished Merge Sort\",\n        sorted_indices: finalSortedIndices\n    });\n    \n    return steps;\n};\n\nconst getQuickSortSteps = (initialArray) => { \n    const array = [...initialArray];\n    const steps = [];\n\n    const recordStep = (action, highlight_indices = [], pivot_index = null, sorted_indices = []) => {\n        steps.push({\n            array: [...array],\n            action: action,\n            highlight_indices: highlight_indices,\n            pivot_index: pivot_index,\n            sorted_indices: [...sorted_indices]\n        });\n    };\n\n    const partition = (arr, low, high, sortedIndices) => {\n        const pivot = arr[high]; \n        let i = low - 1; \n\n        recordStep(`Selecting pivot ${pivot} at index ${high}`, [], high, sortedIndices);\n\n        for (let j = low; j <= high - 1; j++) {\n            recordStep(`Comparing ${arr[j]} at ${j} with pivot ${pivot}`, [j], high, sortedIndices);\n            \n            if (arr[j] < pivot) {\n                i++;\n                [arr[i], arr[j]] = [arr[j], arr[i]];\n                recordStep(`Swapping ${arr[i]} at ${i} and ${arr[j]} at ${j}`, [i, j], high, sortedIndices);\n            }\n        }\n\n        const pivotIndex = i + 1;\n        [arr[pivotIndex], arr[high]] = [arr[high], arr[pivotIndex]];\n        \n        recordStep(`Pivot ${pivot} placed correctly at index ${pivotIndex}`, [pivotIndex], null, [...sortedIndices, pivotIndex]);\n\n        return pivotIndex;\n    };\n\n    const sortedIndicesTracker = [];\n\n    const quickSortHelper = (arr, low, high) => {\n        if (low < high) {\n            const pi = partition(arr, low, high, sortedIndicesTracker);\n\n            if (!sortedIndicesTracker.includes(pi)) {\n                sortedIndicesTracker.push(pi);\n            }\n\n            quickSortHelper(arr, low, pi - 1);\n            quickSortHelper(arr, pi + 1, high);\n        } else if (low === high && low >= 0) {\n            if (!sortedIndicesTracker.includes(low)) {\n                sortedIndicesTracker.push(low);\n                recordStep(`Sub-array of size 1 at index ${low} is sorted.`, [], null, sortedIndicesTracker);\n            }\n        }\n    };\n\n    quickSortHelper(array, 0, array.length - 1);\n\n    const finalSortedIndices = Array.from({ length: array.length }, (_, i) => i);\n    steps.push({\n        array: [...array], \n        action: \"Finished Quick Sort\",\n        highlight_indices: [],\n        pivot_index: null,\n        sorted_indices: finalSortedIndices\n    });\n\n    return steps;\n};\n\nconst getShellSortSteps = (initialArray) => { \n    const array = [...initialArray];\n    const steps = [];\n    const n = array.length;\n    let gap = Math.floor(n / 2);\n    let sortedIndices = [];\n\n    const recordStep = (action, highlight_indices = [], current_gap = gap, sorted_indices = []) => {\n        steps.push({\n            array: [...array],\n            action: action,\n            highlight_indices: highlight_indices,\n            gap: current_gap,\n            sorted_indices: [...sorted_indices]\n        });\n    };\n\n    while (gap > 0) {\n        recordStep(`Starting pass with Gap = ${gap}`, [], gap, sortedIndices);\n\n        for (let i = gap; i < n; i++) {\n            const temp = array[i];\n            let j = i;\n\n            recordStep(`Selecting element ${temp} at index ${i}. Gap = ${gap}`, [i], gap, sortedIndices);\n\n            while (j >= gap && array[j - gap] > temp) {\n                recordStep(`Comparing ${array[j - gap]} at ${j - gap} and ${temp} (to be placed at ${j}). Gap = ${gap}`, [j, j - gap], gap, sortedIndices);\n                \n                array[j] = array[j - gap];\n                \n                recordStep(`Shifting ${array[j - gap]} to ${j}. Gap = ${gap}`, [j], gap, sortedIndices);\n                \n                j -= gap;\n            }\n            \n            array[j] = temp;\n            \n            recordStep(`Placing ${temp} at index ${j}. Gap = ${gap}`, [j], gap, sortedIndices);\n        }\n\n        gap = Math.floor(gap / 2);\n    }\n    \n    const finalSortedIndices = Array.from({ length: n }, (_, i) => i);\n    recordStep(\"Finished Shell Sort\", [], 0, finalSortedIndices);\n\n    return steps;\n};\n\nconst getSelectionSortSteps = (initialArray) => { \n    const array = [...initialArray];\n    const steps = [];\n    const n = array.length;\n    let sortedIndices = [];\n\n    const recordStep = (action, highlight_indices = [], min_index = null, sorted_indices = []) => {\n        steps.push({\n            array: [...array],\n            action: action,\n            highlight_indices: highlight_indices,\n            pivot_index: min_index, \n            sorted_indices: [...sorted_indices]\n        });\n    };\n\n    for (let i = 0; i < n - 1; i++) {\n        let minIndex = i;\n        \n        recordStep(`Starting pass ${i + 1}. Assume minimum is ${array[i]} at index ${i}.`, [], minIndex, sortedIndices);\n\n        for (let j = i + 1; j < n; j++) {\n            recordStep(`Comparing ${array[j]} at ${j} with current minimum ${array[minIndex]} at ${minIndex}.`, [j], minIndex, sortedIndices);\n\n            if (array[j] < array[minIndex]) {\n                minIndex = j;\n                recordStep(`New minimum found: ${array[minIndex]} at index ${minIndex}.`, [j], minIndex, sortedIndices);\n            }\n        }\n\n        if (minIndex !== i) {\n            [array[i], array[minIndex]] = [array[minIndex], array[i]];\n            recordStep(`Swapping ${array[i]} (new smallest) with ${array[minIndex]} (current position) to place smallest element at ${i}.`, [i, minIndex], null, sortedIndices);\n        } else {\n             recordStep(`Element at ${i} is already the smallest in the unsorted portion.`, [], null, sortedIndices);\n        }\n        \n        sortedIndices.push(i);\n        recordStep(`Position ${i} is finalized (Sorted).`, [], null, sortedIndices);\n    }\n    \n    if (n > 0 && !sortedIndices.includes(n - 1)) {\n        sortedIndices.push(n - 1);\n    }\n\n    const finalSortedIndices = Array.from({ length: n }, (_, k) => k);\n    recordStep(\"Finished Selection Sort\", [], null, finalSortedIndices);\n\n    return steps;\n};\n\nconst getBinarySearchSteps = (arr, target) => { \n    const steps = [];\n    const array = [...arr];\n\n    steps.push({\n        array: [...array],\n        action: `Search started for target ${target}. Array must be sorted.`,\n        low: 0,\n        high: array.length - 1,\n        mid: -1,\n        found: false,\n        search_target: target,\n        highlight_indices: [], \n        isSearch: true,\n    });\n\n    let low = 0;\n    let high = array.length - 1;\n    let found = false;\n    let mid = -1;\n\n    while (low <= high) {\n        mid = Math.floor((low + high) / 2);\n\n        steps.push({\n            array: [...array],\n            action: `Checking mid element at index ${mid}: Value is ${array[mid]}`,\n            low: low,\n            high: high,\n            mid: mid,\n            found: false,\n            search_target: target,\n            highlight_indices: [mid],\n            isSearch: true,\n        });\n\n        if (array[mid] === target) {\n            found = true;\n            break;\n        } else if (array[mid] < target) {\n            low = mid + 1;\n            steps.push({\n                array: [...array],\n                action: `Target (${target}) is greater than ${array[mid]}. Searching right half (New Low: ${low}).`,\n                low: low,\n                high: high,\n                mid: mid,\n                found: false,\n                search_target: target,\n                highlight_indices: [],\n                isSearch: true,\n            });\n        } else {\n            high = mid - 1;\n            steps.push({\n                array: [...array],\n                action: `Target (${target}) is less than ${array[mid]}. Searching left half (New High: ${high}).`,\n                low: low,\n                high: high,\n                mid: mid,\n                found: false,\n                search_target: target,\n                highlight_indices: [],\n                isSearch: true,\n            });\n        }\n    }\n\n    if (found) {\n        steps.push({\n            array: [...array],\n            action: `SUCCESS! Target ${target} found at index ${mid}. Search complete.`,\n            low: low,\n            high: high,\n            mid: mid,\n            found: true,\n            search_target: target,\n            highlight_indices: [mid],\n            isSearch: true,\n        });\n    } else {\n        steps.push({\n            array: [...array],\n            action: `FAILURE! Target ${target} not found. Low (${low}) > High (${high}).`,\n            low: low,\n            high: high,\n            mid: -1,\n            found: false,\n            search_target: target,\n            highlight_indices: [],\n            isSearch: true,\n        });\n    }\n\n    return steps;\n};\n\nconst getLinearSearchSteps = (arr, target) => { \n    const steps = [];\n    const array = [...arr];\n    const n = array.length;\n    let found = false;\n    let foundIndex = -1;\n\n    steps.push({\n        array: [...array],\n        action: `Linear Search started for target ${target}.`,\n        current_index: -1,\n        found: false,\n        search_target: target,\n        highlight_indices: [],\n        isLinearSearch: true,\n    });\n\n    for (let i = 0; i < n; i++) {\n        \n        steps.push({\n            array: [...array],\n            action: `Comparing element at index ${i}: Value is ${array[i]}`,\n            current_index: i,\n            found: false,\n            search_target: target,\n            highlight_indices: [i],\n            isLinearSearch: true,\n        });\n        \n        if (array[i] === target) {\n            found = true;\n            foundIndex = i;\n            break;\n        }\n\n        steps.push({\n            array: [...array],\n            action: `Value ${array[i]} does not match ${target}. Moving to next index.`,\n            current_index: i,\n            found: false,\n            search_target: target,\n            highlight_indices: [], \n            isLinearSearch: true,\n        });\n    }\n\n    if (found) {\n        steps.push({\n            array: [...array],\n            action: `SUCCESS! Target ${target} found at index ${foundIndex}. Search complete.`,\n            current_index: foundIndex,\n            found: true,\n            search_target: target,\n            highlight_indices: [foundIndex],\n            isLinearSearch: true,\n        });\n    } else {\n        steps.push({\n            array: [...array],\n            action: `FAILURE! Target ${target} not found after checking all elements. Search complete.`,\n            current_index: n - 1,\n            found: false,\n            search_target: target,\n            highlight_indices: [],\n            isLinearSearch: true,\n        });\n    }\n\n    return steps;\n};\n\n// --- Main App Component ---\nexport default function App() {\n  const [currentView, setCurrentView] = useState('sort'); \n    \n  // Sorting/Searching Visualizer States\n  const [steps, setSteps] = useState(null);\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [selectedAlgorithm, setSelectedAlgorithm] = useState(\"binarysearch\"); \n  const [loadingError, setLoadingError] = useState(null);\n  const [inputArray, setInputArray] = useState(() => generateRandomArray(DEFAULT_ARRAY_SIZE));\n  const [arraySize, setArraySize] = useState(DEFAULT_ARRAY_SIZE);\n  const [customInputData, setCustomInputData] = useState(\"\");\n  const [speed, setSpeed] = useState(ANIMATION_SPEED_MS);\n  \n  // State for Search Algorithms\n  const [searchTarget, setSearchTarget] = useState(50); \n  \n  // Animation State\n  const [isAnimating, setIsAnimating] = useState(false);\n  const animationRef = useRef(null);\n\n  // Derived States\n  const currentStep = steps ? steps[currentStepIndex] : null;\n  const currentArray = currentStep ? currentStep.array : inputArray; \n  const highlightIndices = currentStep ? currentStep.highlight_indices : [];\n  const pivotIndex = currentStep ? currentStep.pivot_index : null;\n  const sortedIndices = currentStep ? currentStep.sorted_indices || [] : [];\n  const isSortingComplete = steps && currentStepIndex >= steps.length - 1; \n  const currentPseudocode = PSEUDOCODE[selectedAlgorithm];\n  \n  const isSearchAlgorithm = selectedAlgorithm === 'binarysearch' || selectedAlgorithm === 'linearsearch';\n  const isSupportedAlgorithm = [\"bubblesort\", \"mergesort\", \"quicksort\", \"shellsort\", \"selectionsort\", \"binarysearch\", \"linearsearch\"].includes(selectedAlgorithm); \n  \n  // Calculate bar width based on container width and number of elements\n  const barWidth = currentArray.length > 0 ? Math.max(10, (800 / currentArray.length) - 2) : 20; // Max 800px width for visualization container\n\n  // --- Handlers ---\n  const handleGenerateNewArray = (size = arraySize) => {\n      if (isAnimating) handleStartStopAnimation();\n      const newArray = generateRandomArray(size);\n      setInputArray(newArray);\n      setCustomInputData(\"\"); \n      setArraySize(size);\n      if (isSearchAlgorithm && newArray.length > 0) {\n          // Set a random element from the new array as the target\n          setSearchTarget(newArray[Math.floor(Math.random() * newArray.length)]); \n      } else {\n          setSearchTarget(50);\n      }\n  };\n  \n  const handleLoadCustomArray = () => {\n      if (isAnimating) handleStartStopAnimation();\n      const newArray = parseCustomArray(customInputData);\n      if (newArray.length > 0 && newArray.length <= 50) {\n          setInputArray(newArray);\n          setArraySize(newArray.length); \n          setLoadingError(null);\n          if (isSearchAlgorithm && newArray.length > 0) {\n            setSearchTarget(newArray[Math.floor(Math.random() * newArray.length)]);\n          } else {\n            setSearchTarget(50);\n          }\n      } else if (newArray.length > 50) {\n           setLoadingError(\"Maximum array size for custom input is 50 elements.\");\n      } else {\n          setLoadingError(\"Invalid or empty custom array input. Please use comma-separated integers (e.g., 5,12,3,40).\");\n      }\n  };\n  \n  const handleSearchClick = () => {\n    // Re-trigger useEffect for search logic\n    const currentTarget = Number(searchTarget);\n    setSearchTarget(currentTarget);\n    if (isAnimating) handleStartStopAnimation();\n    setCurrentStepIndex(0);\n    // Note: The main logic runs in useEffect below\n  };\n\n\n  // --- Animation Control Logic ---\n\n  // Function to handle the step-by-step animation\n  const animate = useCallback(() => {\n    setCurrentStepIndex(prevIndex => {\n      if (!steps || prevIndex >= steps.length - 1) {\n          setIsAnimating(false);\n          return prevIndex;\n      }\n\n      const nextStepIndex = prevIndex + 1;\n      \n      animationRef.current = setTimeout(() => {\n          animate();\n      }, speed);\n\n      return nextStepIndex;\n    });\n  }, [steps, speed]);\n\n  // Start/Stop Animation handler\n  const handleStartStopAnimation = useCallback(() => {\n    if (isAnimating) {\n        if (animationRef.current) {\n            clearTimeout(animationRef.current);\n        }\n        setIsAnimating(false);\n    } else {\n        if (isSortingComplete) {\n            setCurrentStepIndex(0);\n        }\n        setIsAnimating(true);\n    }\n  }, [isAnimating, isSortingComplete]);\n\n  // Effect to control the animation loop start/stop\n  useEffect(() => {\n    if (isAnimating) {\n        animate();\n    } else if (animationRef.current) {\n        clearTimeout(animationRef.current);\n    }\n\n    // Cleanup function\n    return () => {\n        if (animationRef.current) {\n            clearTimeout(animationRef.current);\n        }\n    };\n  }, [isAnimating, animate]); \n\n  \n  // Effect to recalculate steps whenever the array, algorithm, or target changes\n  useEffect(() => {\n    if (isAnimating) {\n        handleStartStopAnimation(); \n    }\n    \n    // Don't reset steps immediately - keep them until new ones are ready\n    setCurrentStepIndex(0);\n    setLoadingError(null);\n\n    if (!inputArray || inputArray.length === 0) {\n        setLoadingError(\"The array is empty. Please generate or enter an array.\");\n        setSteps(null);\n        return;\n    }\n    \n    // Logic for search algorithms requiring sorting\n    let arrayToSort = [...inputArray];\n    if (selectedAlgorithm === 'binarysearch') {\n        // Binary search MUST have a sorted array\n        const isAlreadySorted = arrayToSort.every((val, i, arr) => i === 0 || val >= arr[i - 1]);\n        \n        if (!isAlreadySorted) {\n             // Sort it internally for Binary Search demonstration\n             arrayToSort.sort((a, b) => a - b);\n             // Only update if the sorted array is different to avoid infinite loops\n             const arraysEqual = arrayToSort.length === inputArray.length && \n                                arrayToSort.every((val, i) => val === inputArray[i]);\n             if (!arraysEqual) {\n                 setInputArray(arrayToSort);\n             }\n             setLoadingError(\"Binary Search requires a sorted array. The array has been sorted automatically.\");\n        }\n    } else if (selectedAlgorithm === 'linearsearch') {\n        // Linear search uses the original array\n        arrayToSort = [...inputArray];\n    }\n\n\n    try {\n        let newSteps = [];\n        switch (selectedAlgorithm) {\n            case 'bubblesort':\n                newSteps = getBubbleSortSteps(arrayToSort);\n                break;\n            case 'mergesort':\n                newSteps = getMergeSortSteps(arrayToSort);\n                break;\n            case 'quicksort':\n                newSteps = getQuickSortSteps(arrayToSort);\n                break;\n            case 'shellsort':\n                newSteps = getShellSortSteps(arrayToSort);\n                break;\n            case 'selectionsort':\n                newSteps = getSelectionSortSteps(arrayToSort);\n                break;\n            case 'binarysearch':\n                newSteps = getBinarySearchSteps(arrayToSort, searchTarget);\n                break;\n            case 'linearsearch':\n                newSteps = getLinearSearchSteps(arrayToSort, searchTarget);\n                break;\n            default:\n                setLoadingError(`Algorithm \"${selectedAlgorithm}\" is not supported.`);\n                return;\n        }\n        \n        setSteps(newSteps);\n\n    } catch (e) {\n        console.error(\"Error generating steps:\", e);\n        setLoadingError(\"An error occurred while running the algorithm.\");\n    }\n    \n  }, [selectedAlgorithm, inputArray, searchTarget]);\n  \n\n  const handleStepControl = (action) => {\n      if (isAnimating) handleStartStopAnimation();\n      \n      switch (action) {\n          case 'start':\n              setCurrentStepIndex(0);\n              break;\n          case 'back':\n              setCurrentStepIndex(prev => Math.max(0, prev - 1));\n              break;\n          case 'forward':\n              setCurrentStepIndex(prev => steps ? Math.min(steps.length - 1, prev + 1) : 0);\n              break;\n          case 'end':\n              setCurrentStepIndex(steps ? steps.length - 1 : 0);\n              break;\n          default:\n              break;\n      }\n  };\n\n\n  // --- Render Functions ---\n\n  const renderArrayVisualizer = () => {\n    // Determine the array to display - always fall back to inputArray if currentArray is empty\n    const displayArray = (currentArray && currentArray.length > 0) ? currentArray : inputArray;\n\n    // Determine Binary Search status for ArrayBar coloring\n    const isBinarySearch = selectedAlgorithm === 'binarysearch';\n    const currentLow = currentStep ? currentStep.low : null;\n    const currentHigh = currentStep ? currentStep.high : null;\n    \n    // Check if the current step is the final step where search is complete\n    const isSearchFinalized = isSearchAlgorithm && currentStep && (currentStep.found || (steps && currentStepIndex === steps.length - 1));\n\n    // Calculate scaling for bar heights\n    const containerHeight = 450;\n    const maxValue = displayArray.length > 0 ? Math.max(...displayArray) : MAX_ARRAY_VALUE;\n    const minValue = displayArray.length > 0 ? Math.min(...displayArray) : MIN_ARRAY_VALUE;\n    const valueRange = maxValue - minValue || 1; // Avoid division by zero\n    const scaleFactor = (containerHeight - 40) / (maxValue || 1); // Leave 40px padding at top\n\n    return (\n        <div className=\"flex flex-col items-center p-4\">\n            <h2 className=\"text-xl font-semibold mb-4 text-gray-700\">\n                {isSearchAlgorithm ? (\n                    `Array Visualization (Target: ${searchTarget})`\n                ) : (\n                    `Array Visualization`\n                )}\n            </h2>\n            \n            <div className=\"flex justify-center items-end h-[450px] w-full max-w-4xl border-2 border-gray-200 bg-gray-50 rounded-lg p-2 shadow-inner\">\n                {displayArray.length > 0 ? (\n                    displayArray.map((value, i) => {\n                        // Scale the height to fit within the container\n                        const scaledHeight = Math.max(20, value * scaleFactor); // Minimum 20px height\n                        return (\n                            <ArrayBar\n                                key={i}\n                                value={value}\n                                height={scaledHeight}\n                                width={barWidth}\n                            \n                            // Sorting Props\n                            isHighlighted={highlightIndices.includes(i)}\n                            isPivot={pivotIndex === i}\n                            isSorted={sortedIndices.includes(i) || isSortingComplete || isSearchFinalized}\n                            \n                            // Search Props\n                            isSearchMid={currentStep ? currentStep.mid === i : false}\n                            isSearchRange={\n                                isBinarySearch && \n                                i >= (currentLow !== null ? currentLow : 0) && // Handles start step where low is defined\n                                i <= (currentHigh !== null ? currentHigh : -1) // Handles start step where high is defined\n                            }\n                            isFound={currentStep ? currentStep.found && (currentStep.mid === i || currentStep.current_index === i) : false}\n                            isLinearCheck={selectedAlgorithm === 'linearsearch' && currentStep && currentStep.current_index === i && !currentStep.found}\n                            isBinarySearchMode={isBinarySearch} // NEW PROP: Pass down the current algorithm mode\n                            />\n                        );\n                    })\n                ) : (\n                    <p className=\"text-gray-500 italic mt-40\">No array data available. Generate a new array to begin.</p>\n                )}\n            </div>\n\n            <div className=\"mt-4 w-full max-w-4xl text-center\">\n                {currentStep && (\n                    <p className=\"text-lg font-medium text-gray-800 p-2 bg-yellow-100 border border-yellow-300 rounded-lg\">\n                        <span className=\"font-bold mr-2\">Step {currentStepIndex + 1}/{steps.length}:</span> \n                        {currentStep.action}\n                    </p>\n                )}\n                {loadingError && (\n                    <p className=\"text-red-600 font-semibold p-2 mt-2 bg-red-100 border border-red-300 rounded-lg\">{loadingError}</p>\n                )}\n            </div>\n            \n        </div>\n    );\n  };\n\n  const renderControls = () => {\n    const isAlgorithmSelected = isSupportedAlgorithm;\n    const isReadyToStart = steps && !loadingError;\n\n    return (\n        <div className=\"flex flex-col space-y-4\">\n            {/* Algorithm Selection and Input */}\n            <div className=\"bg-gray-100 p-4 rounded-xl shadow-md\">\n                <h3 className=\"text-lg font-bold text-gray-800 mb-3 border-b pb-2\">Algorithm & Data Setup</h3>\n                \n                {/* Algorithm Selector */}\n                <div className=\"flex flex-col gap-2 mb-4\">\n                    <label htmlFor=\"algorithm-select\" className=\"font-medium text-sm text-gray-700\">Select Algorithm:</label>\n                    <select\n                        id=\"algorithm-select\"\n                        value={selectedAlgorithm}\n                        onChange={(e) => {\n                            setSelectedAlgorithm(e.target.value);\n                            setCurrentView('sort'); // Switch back to sort view if changing alg\n                        }}\n                        className=\"p-2 border border-gray-300 rounded-lg bg-white\"\n                    >\n                        <option value=\"bubblesort\">Bubble Sort</option>\n                        <option value=\"selectionsort\">Selection Sort</option>\n                        <option value=\"mergesort\">Merge Sort</option>\n                        <option value=\"quicksort\">Quick Sort</option>\n                        <option value=\"shellsort\">Shell Sort</option>\n                        <option disabled>--- Search Algorithms ---</option>\n                        <option value=\"linearsearch\">Linear Search</option>\n                        <option value=\"binarysearch\">Binary Search (Requires Sorted Array)</option>\n                    </select>\n                </div>\n                \n                {/* Array Size Selector */}\n                <div className=\"flex flex-col gap-2 mb-4\">\n                    <label htmlFor=\"array-size\" className=\"font-medium text-sm text-gray-700\">Array Size ({arraySize}):</label>\n                    <input\n                        id=\"array-size\"\n                        type=\"range\"\n                        min=\"5\"\n                        max=\"50\"\n                        value={arraySize}\n                        onChange={(e) => setArraySize(Number(e.target.value))}\n                        className=\"w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer\"\n                    />\n                    <button \n                        onClick={() => handleGenerateNewArray()} \n                        className=\"w-full px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 transition\"\n                    >\n                        Generate Random Array\n                    </button>\n                </div>\n                \n                {/* Custom Input */}\n                <div className=\"flex flex-col gap-2 mb-4\">\n                    <label htmlFor=\"custom-input\" className=\"font-medium text-sm text-gray-700\">Custom Array (e.g., 5,12,3,40):</label>\n                    <input\n                        id=\"custom-input\"\n                        type=\"text\"\n                        value={customInputData}\n                        onChange={(e) => setCustomInputData(e.target.value)}\n                        placeholder=\"Comma-separated integers\"\n                        className=\"p-2 border border-gray-300 rounded-lg\"\n                    />\n                    <button \n                        onClick={handleLoadCustomArray} \n                        className=\"w-full px-4 py-2 bg-teal-500 text-white font-semibold rounded-lg shadow-md hover:bg-teal-600 transition\"\n                    >\n                        Load Custom Array\n                    </button>\n                </div>\n                \n                {/* Search Target Input */}\n                {isSearchAlgorithm && (\n                    <div className=\"flex flex-col gap-2 mb-4 p-3 bg-white border border-yellow-300 rounded-lg\">\n                        <label htmlFor=\"search-target\" className=\"font-medium text-sm text-gray-700\">Search Target:</label>\n                        <div className=\"flex gap-2\">\n                            <input\n                                id=\"search-target\"\n                                type=\"number\"\n                                value={searchTarget}\n                                onChange={(e) => setSearchTarget(Number(e.target.value))}\n                                placeholder=\"Target value\"\n                                className=\"flex-grow p-2 border border-gray-300 rounded-lg\"\n                                min={MIN_ARRAY_VALUE}\n                                max={MAX_ARRAY_VALUE}\n                            />\n                            <button \n                                onClick={handleSearchClick} \n                                className=\"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition\"\n                            >\n                                Start Search\n                            </button>\n                        </div>\n                    </div>\n                )}\n                \n                {/* Speed Control */}\n                <div className=\"flex flex-col gap-2\">\n                    <label htmlFor=\"speed-range\" className=\"font-medium text-sm text-gray-700\">Speed (Delay: {speed}ms):</label>\n                    <input\n                        id=\"speed-range\"\n                        type=\"range\"\n                        min=\"10\"\n                        max=\"500\"\n                        value={speed}\n                        onChange={(e) => setSpeed(Number(e.target.value))}\n                        className=\"w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer\"\n                    />\n                </div>\n            </div>\n\n            {/* Animation Controls */}\n            <div className=\"bg-gray-100 p-4 rounded-xl shadow-md\">\n                <h3 className=\"text-lg font-bold text-gray-800 mb-3 border-b pb-2\">Animation Controls</h3>\n                <div className=\"flex justify-between space-x-2 mb-4\">\n                    <button \n                        onClick={() => handleStartStopAnimation()} \n                        className={`flex-grow px-4 py-3 text-white font-bold rounded-lg shadow-lg transition disabled:opacity-50 ${isAnimating ? 'bg-orange-500 hover:bg-orange-600' : 'bg-green-500 hover:bg-green-600'}`}\n                        disabled={!isAlgorithmSelected || !isReadyToStart}\n                    >\n                        {isAnimating ? 'Pause' : (currentStepIndex > 0 && !isSortingComplete ? 'Resume' : 'Start/Run')}\n                    </button>\n                    <button \n                        onClick={() => handleStepControl('start')} \n                        className=\"p-3 bg-gray-300 rounded-lg hover:bg-gray-400 transition disabled:opacity-50\"\n                        disabled={!isAlgorithmSelected || !isReadyToStart || currentStepIndex === 0 || isAnimating}\n                    >\n                        <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8 9a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm3 0v4a1 1 0 11-2 0V9a1 1 0 112 0z\"/></svg>\n                    </button>\n                </div>\n                <div className=\"flex justify-between space-x-2\">\n                    <button \n                        onClick={() => handleStepControl('back')} \n                        className=\"px-4 py-2 bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition disabled:opacity-50\"\n                        disabled={!isAlgorithmSelected || !isReadyToStart || currentStepIndex === 0 || isAnimating}\n                    >\n                        &larr; Prev Step\n                    </button>\n                    <button \n                        onClick={() => handleStepControl('forward')} \n                        className=\"px-4 py-2 bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition disabled:opacity-50\"\n                        disabled={!isAlgorithmSelected || !isReadyToStart || isSortingComplete || isAnimating}\n                    >\n                        Next Step &rarr;\n                    </button>\n                    <button \n                        onClick={() => handleStepControl('end')} \n                        className=\"p-3 bg-gray-300 rounded-lg hover:bg-gray-400 transition disabled:opacity-50\"\n                        disabled={!isAlgorithmSelected || !isReadyToStart || isSortingComplete || isAnimating}\n                    >\n                        <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm-1-9a1 1 0 011-1h2a1 1 0 110 2H10a1 1 0 01-1-1zm3 0v4a1 1 0 11-2 0V9a1 1 0 112 0z\"/></svg>\n                    </button>\n                </div>\n            </div>\n\n            {/* Pseudocode Panel */}\n            <div className=\"bg-gray-100 p-4 rounded-xl shadow-md font-mono text-sm\">\n                <h3 className=\"text-lg font-bold text-gray-800 mb-3 border-b pb-2\">Pseudocode</h3>\n                <div className=\"h-48 overflow-y-auto bg-white p-2 rounded-lg border border-gray-200\">\n                    {currentPseudocode.map((line, index) => (\n                        <pre \n                            key={index} \n                            className={`whitespace-pre-wrap ${\n                                currentStep && currentStep.code_line === index + 1 ? 'bg-yellow-200 font-bold' : 'text-gray-700'\n                            }`}\n                        >\n                            {line}\n                        </pre>\n                    ))}\n                </div>\n            </div>\n            \n        </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-4 sm:p-8 font-['Inter']\">\n        <header className=\"text-center mb-8\">\n            <h1 className=\"text-4xl font-extrabold text-blue-600 mb-2\">Algorithm Visualizer</h1>\n            <p className=\"text-lg text-gray-600\">Visualize Sorting, Searching, and BST operations.</p>\n        </header>\n\n        {/* View Toggles */}\n        <div className=\"flex justify-center mb-6\">\n            <button \n                onClick={() => setCurrentView('sort')}\n                className={`px-6 py-2 rounded-l-full font-semibold transition ${currentView === 'sort' ? 'bg-blue-600 text-white shadow-lg' : 'bg-white text-gray-700 border border-blue-600'}`}\n            >\n                Array Algorithms (Sort/Search)\n            </button>\n            <button \n                onClick={() => setCurrentView('bst')}\n                className={`px-6 py-2 rounded-r-full font-semibold transition ${currentView === 'bst' ? 'bg-blue-600 text-white shadow-lg' : 'bg-white text-gray-700 border border-blue-600'}`}\n            >\n                Binary Search Tree\n            </button>\n        </div>\n\n        {currentView === 'sort' ? (\n            <main className=\"flex flex-col lg:flex-row gap-8 max-w-7xl mx-auto\">\n                {/* Controls and Pseudocode */}\n                <div className=\"lg:w-1/3\">\n                    {renderControls()}\n                </div>\n                \n                {/* Visualization */}\n                <div className=\"lg:w-2/3 bg-white p-6 rounded-xl shadow-2xl\">\n                    {renderArrayVisualizer()}\n                </div>\n            </main>\n        ) : (\n            <main className=\"max-w-4xl mx-auto\">\n                <BSTVisualizer />\n            </main>\n        )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}